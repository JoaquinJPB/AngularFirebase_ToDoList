"use strict";(self.webpackChunkToDoList_Angular=self.webpackChunkToDoList_Angular||[]).push([[179],{2011:(nt,Ce,k)=>{k.d(Ce,{hO:()=>He,xv:()=>ce,Dh:()=>fe,GT:()=>ge,cc:()=>Te,on:()=>B,pX:()=>J});var g=k(5e3),Z=k(127),O=k(5813);nt=k.hmd(nt);const ue=["ngOnDestroy"],J=(Ee,Ke,Ge,De={})=>new Proxy(Ee,{get:(_e,ve)=>Ge.runOutsideAngular(()=>{var je;if(Ee[ve])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(ve,Ee[ve]),Ee[ve];if(ue.indexOf(ve)>-1)return()=>{};const Be=Ke.toPromise().then(te=>{const q=te&&te[ve];return"function"==typeof q?q.bind(te):q&&q.then?q.then(re=>Ge.run(()=>re)):Ge.run(()=>q)});return new Proxy(()=>{},{get:(te,q)=>Be[q],apply:(te,q,re)=>Be.then(me=>{var ie;const xe=me&&me(...re);return(null===(ie=null==De?void 0:De.spy)||void 0===ie?void 0:ie.apply)&&De.spy.apply(ve,re,xe),xe})})})}),ge=(Ee,Ke)=>{Ke.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,De))})})};class se{constructor(Ke){return Ke}}const fe=new g.OlP("angularfire2.app.options"),ce=new g.OlP("angularfire2.app.name");function B(Ee,Ke,Ge){const _e="object"==typeof Ge&&Ge||{};_e.name=_e.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const je=Z.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Ke.runOutsideAngular(()=>Z.Z.initializeApp(Ee,_e));try{JSON.stringify(Ee)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new se(je)}const j=(Ee,...Ke)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ke)},Y={provide:se,useFactory:B,deps:[fe,g.R0b,[new g.FiY,ce]]};let He=(()=>{class Ee{constructor(Ge){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",g.q4F.full,Ge.toString())}static initializeApp(Ge,De){return{ngModule:Ee,providers:[{provide:fe,useValue:Ge},{provide:ce,useValue:De}]}}}return Ee.\u0275fac=function(Ge){return new(Ge||Ee)(g.LFG(g.Lbi))},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({providers:[Y]}),Ee})();function Te(Ee,Ke,Ge,De,_e){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ee)||[];if(ve)return function Me(Ee,Ke){try{return Ee.toString()===Ke.toString()}catch(Ge){return Ee===Ke}}(_e,je)||(pe("error",`${Ke} was already initialized on the ${Ge} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:_e,was:je})),ve;{const Be=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Be,_e]),Be}}const Pe=!!nt.hot,pe=(Ee,...Ke)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ce,k)=>{k.d(Ce,{q4:()=>Il,iC:()=>bl,HU:()=>Dl,vb:()=>wh,JM:()=>fa});var g=k(5e3),Z=k(5867),O=k(5861),ue=k(9681),J=k(2090),ge=k(4859),se=k(1877);const fe="@firebase/installations",j="w:0.5.8",Y="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function Ge({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function _e(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Be(D,{refreshToken:b}){const x=je(D);return x.append("Authorization",function me(D){return`${Y} ${D}`}(b)),x}function te(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function ie(D,b){return xe.apply(this,arguments)}function xe(){return(xe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Ge(D),z=je(D),ee=b.getImmediate({optional:!0});if(ee){const ft=yield ee.getHeartbeatsHeader();ft&&z.append("x-firebase-client",ft)}const ze={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:Y,appId:D.appId,sdkVersion:j})},Je=yield te(()=>fetch(F,ze));if(Je.ok){const ft=yield Je.json();return{fid:ft.fid||x,registrationStatus:2,refreshToken:ft.refreshToken,authToken:De(ft.authToken)}}throw yield _e("Create Installation",Je)})).apply(this,arguments)}function oe(D){return new Promise(b=>{setTimeout(b,D)})}const Zt=/^[cdef][\w-]{21}$/;function rt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function dt(D){return function _t(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Zt.test(x)?x:""}catch(D){return""}}function sn(D){return`${D.appName}!${D.appId}`}const on=new Map;function fi(D,b){const x=sn(D);Kt(x,b),function Ft(D,b){const x=function Xr(){return!tr&&"BroadcastChannel"in self&&(tr=new BroadcastChannel("[Firebase] FID Change"),tr.onmessage=D=>{Kt(D.data.key,D.data.fid)}),tr}();x&&x.postMessage({key:D,fid:b}),function hs(){0===on.size&&tr&&(tr.close(),tr=null)}()}(x,b)}function Kt(D,b){const x=on.get(D);if(x)for(const F of x)F(b)}let tr=null;const br="firebase-installations-store";let Ui=null;function Bi(){return Ui||(Ui=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(br)})),Ui}function ot(D,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(D,b){const x=sn(D),z=(yield Bi()).transaction(br,"readwrite"),ee=z.objectStore(br),Se=yield ee.get(x);return yield ee.put(b,x),yield z.complete,(!Se||Se.fid!==b.fid)&&fi(D,b.fid),b})).apply(this,arguments)}function Zn(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D){const b=sn(D),F=(yield Bi()).transaction(br,"readwrite");yield F.objectStore(br).delete(b),yield F.complete})).apply(this,arguments)}function ei(D,b){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(D,b){const x=sn(D),z=(yield Bi()).transaction(br,"readwrite"),ee=z.objectStore(br),Se=yield ee.get(x),ze=b(Se);return void 0===ze?yield ee.delete(x):yield ee.put(ze,x),yield z.complete,ze&&(!Se||Se.fid!==ze.fid)&&fi(D,ze.fid),ze})).apply(this,arguments)}function fn(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(D){let b;const x=yield ei(D.appConfig,F=>{const z=fs(F),ee=Qo(D,z);return b=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function fs(D){return kt(D||{fid:rt(),registrationStatus:0})}function Qo(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Lt(D,b){return et.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:gt(D)}:{installationEntry:b}}function et(){return(et=(0,O.Z)(function*(D,b){try{const x=yield ie(D,b);return ot(D.appConfig,x)}catch(x){throw Ke(x)&&409===x.customData.serverCode?yield Zn(D.appConfig):yield ot(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function gt(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(D){let b=yield Ti(D.appConfig);for(;1===b.registrationStatus;)yield oe(100),b=yield Ti(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield fn(D);return F||x}return b})).apply(this,arguments)}function Ti(D){return ei(D,b=>{if(!b)throw Ee.create("installation-not-found");return kt(b)})}function kt(D){return function Hs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function pr(D,b){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=at(D,x),z=Be(D,x),ee=b.getImmediate({optional:!0});if(ee){const ft=yield ee.getHeartbeatsHeader();ft&&z.append("x-firebase-client",ft)}const ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Je=yield te(()=>fetch(F,ze));if(Je.ok)return De(yield Je.json());throw yield _e("Generate Auth Token",Je)})).apply(this,arguments)}function at(D,{fid:b}){return`${Ge(D)}/${b}/authTokens:generate`}function gr(D){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(D,b=!1){let x;const F=yield ei(D.appConfig,ee=>{if(!St(ee))throw Ee.create("not-registered");const Se=ee.authToken;if(!b&&U(Se))return ee;if(1===Se.requestStatus)return x=qe(D,b),ee;{if(!navigator.onLine)throw Ee.create("app-offline");const ze=H(ee);return x=ut(D,ze),ze}});return x?yield x:F.authToken})).apply(this,arguments)}function qe(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let x=yield Ze(D.appConfig);for(;1===x.authToken.requestStatus;)yield oe(100),x=yield Ze(D.appConfig);const F=x.authToken;return 0===F.requestStatus?gr(D,b):F})).apply(this,arguments)}function Ze(D){return ei(D,b=>{if(!St(b))throw Ee.create("not-registered");return function de(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ut(D,b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(D,b){try{const x=yield pr(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield ot(D.appConfig,F),x}catch(x){if(!Ke(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield ot(D.appConfig,F)}else yield Zn(D.appConfig);throw x}})).apply(this,arguments)}function St(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function H(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield fn(b);return F?F.catch(console.error):gr(b).catch(console.error),x.fid})).apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(D,b=!1){const x=D;return yield mr(x),(yield gr(x,b)).token})).apply(this,arguments)}function mr(D){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield fn(D);b&&(yield b)})).apply(this,arguments)}function $n(D){return Ee.create("missing-app-config-values",{valueName:D})}const Xo="installations",Re=D=>{const b=D.getProvider("app").getImmediate(),x=function ji(D){if(!D||!D.options)throw $n("App Configuration");if(!D.name)throw $n("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw $n(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},At=D=>{const b=D.getProvider("app").getImmediate(),x=(0,ue._getProvider)(b,Xo).getImmediate();return{getId:()=>function K(D){return Le.apply(this,arguments)}(x),getToken:z=>function ht(D){return jt.apply(this,arguments)}(x,z)}};(function cn(){(0,ue._registerComponent)(new ge.wA(Xo,Re,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",At,"PRIVATE"))})(),(0,ue.registerVersion)(fe,"0.5.8"),(0,ue.registerVersion)(fe,"0.5.8","esm2017");const ir="@firebase/remote-config",Rn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ch{constructor(b,x,F,z){this.client=b,this.storage=x,this.storageCache=F,this.logger=z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const ee=yield x.client.fetch(b),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function wc(D=navigator){return D.languages&&D.languages[0]||D.language}class qa{constructor(b,x,F,z,ee,Se){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=z,this.apiKey=ee,this.appId=Se}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Je={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:x.appId,language_code:wc()},ft={method:"POST",headers:ze,body:JSON.stringify(Je)},Ut=fetch(Se,ft),vt=new Promise((xr,Wr)=>{b.signal.addEventListener(()=>{const vi=new Error("The operation was aborted.");vi.name="AbortError",Wr(vi)})});let Pn;try{yield Promise.race([Ut,vt]),Pn=yield Ut}catch(xr){let Wr="fetch-client-network";throw"AbortError"===xr.name&&(Wr="fetch-timeout"),Rn.create(Wr,{originalErrorMessage:xr.message})}let wn=Pn.status;const ma=Pn.headers.get("ETag")||void 0;let Po,Sr;if(200===Pn.status){let xr;try{xr=yield Pn.json()}catch(Wr){throw Rn.create("fetch-client-parse",{originalErrorMessage:Wr.message})}Po=xr.entries,Sr=xr.state}if("INSTANCE_STATE_UNSPECIFIED"===Sr?wn=500:"NO_CHANGE"===Sr?wn=304:("NO_TEMPLATE"===Sr||"EMPTY_CONFIG"===Sr)&&(Po={}),304!==wn&&200!==wn)throw Rn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:ma,config:Po}})()}}class Ep{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function Vn(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),ee=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(ee),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ee=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Ic(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Se),z.attemptFetch(b,Se)}})()}}class Dc{constructor(b,x,F,z,ee){this.app=b,this._client=x,this._storageCache=F,this._storage=z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yu(D,b){const x=D.target.error||void 0;return Rn.create(b,{originalErrorMessage:x&&x.message})}const _s="app_namespace_store";class bp{constructor(b,x,F,z=function Dp(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(Yu(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(x){b(Rn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,ee)=>{const ze=F.transaction([_s],"readonly").objectStore(_s),Je=x.createCompositeKey(b);try{const ft=ze.get(Je);ft.onerror=Ut=>{ee(Yu(Ut,"storage-get"))},ft.onsuccess=Ut=>{const vt=Ut.target.result;z(vt?vt.value:void 0)}}catch(ft){ee(Rn.create("storage-get",{originalErrorMessage:ft&&ft.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((ee,Se)=>{const Je=z.transaction([_s],"readwrite").objectStore(_s),ft=F.createCompositeKey(b);try{const Ut=Je.put({compositeKey:ft,value:x});Ut.onerror=vt=>{Se(Yu(vt,"storage-set"))},Ut.onsuccess=()=>{ee()}}catch(Ut){Se(Rn.create("storage-set",{originalErrorMessage:Ut&&Ut.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,ee)=>{const ze=F.transaction([_s],"readwrite").objectStore(_s),Je=x.createCompositeKey(b);try{const ft=ze.delete(Je);ft.onerror=Ut=>{ee(Yu(Ut,"storage-delete"))},ft.onsuccess=()=>{z()}}catch(ft){ee(Rn.create("storage-delete",{originalErrorMessage:ft&&ft.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Cc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),ee=yield x;ee&&(b.lastFetchStatus=ee);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const ze=yield z;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function zs(){return dh.apply(this,arguments)}function dh(){return(dh=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Do(){(0,ue._registerComponent)(new ge.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,J.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:ze}=F.options;if(!ee)throw Rn.create("registration-project-id");if(!Se)throw Rn.create("registration-api-key");if(!ze)throw Rn.create("registration-app-id");const Je=new bp(ze,F.name,x=x||"firebase"),ft=new Cc(Je),Ut=new se.Yd(ir);Ut.logLevel=se.in.ERROR;const vt=new qa(z,ue.SDK_VERSION,x,ee,Se,ze),Pn=new Ep(vt,Je),wn=new ch(Pn,Je,ft,Ut),ma=new Dc(F,wn,ft,Je,Ut);return function Vr(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(ir,"0.3.7"),(0,ue.registerVersion)(ir,"0.3.7","esm2017")}();const Qu="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",Br="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",ta="google.c.a.c_l",Tc="google.c.a.ts",Cp="google.c.a.e";var Es=(()=>{return(D=Es||(Es={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Es;var D})();function ri(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wa(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),z=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)z[ee]=F.charCodeAt(ee);return z}const Za="fcm_token_details_db",sr="fcm_token_object_Store";function hh(D){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Za))return null;let b=null;return(yield(0,J.X3)(Za,5,function(){var F=(0,O.Z)(function*(z,ee,Se,ze){var Je;if(ee<2||!z.objectStoreNames.contains(sr))return;const ft=ze.objectStore(sr),Ut=yield ft.index("fcmSenderId").get(D);if(yield ft.clear(),Ut)if(2===ee){const vt=Ut;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;b={token:vt.fcmToken,createTime:null!==(Je=vt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:ri(vt.vapidKey)}}}else if(3===ee){const vt=Ut;b={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ri(vt.auth),p256dh:ri(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ri(vt.vapidKey)}}}else if(4===ee){const vt=Ut;b={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:ri(vt.auth),p256dh:ri(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:ri(vt.vapidKey)}}}});return function(z,ee,Se,ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Za),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Ac(b)?b:null}),Ka.apply(this,arguments)}function Ac(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const qi="firebase-messaging-store";let na=null;function Ju(){return na||(na=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(qi)})),na}function dn(D){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D){const b=Ks(D),F=yield(yield Ju()).transaction(qi).objectStore(qi).get(b);if(F)return F;{const z=yield hh(D.appConfig.senderId);if(z)return yield ws(D,z),z}})).apply(this,arguments)}function ws(D,b){return rn.apply(this,arguments)}function rn(){return(rn=(0,O.Z)(function*(D,b){const x=Ks(D),z=(yield Ju()).transaction(qi,"readwrite");return yield z.objectStore(qi).put(b,x),yield z.complete,b})).apply(this,arguments)}function Sc(D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D){const b=Ks(D),F=(yield Ju()).transaction(qi,"readwrite");yield F.objectStore(qi).delete(b),yield F.complete})).apply(this,arguments)}function Ks({appConfig:D}){return D.appId}const Nn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ra(D,b){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(D,b){const x=yield Ds(D),F=lt(b),z={method:"POST",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch($r(D.appConfig),z)).json()}catch(Se){throw Nn.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw Nn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Nn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function _r(D,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(D,b){const x=yield Ds(D),F=lt(b.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${$r(D.appConfig)}/${b.token}`,z)).json()}catch(Se){throw Nn.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw Nn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Nn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function zi(D,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ds(D)};try{const ee=yield(yield fetch(`${$r(D.appConfig)}/${b}`,F)).json();if(ee.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(z){throw Nn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function $r({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const z={web:{endpoint:x,auth:b,p256dh:D}};return F!==Br&&(z.web.applicationPubKey=F),z}const Xa=6048e5;function ia(D){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D){const b=yield tl(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ri(b.getKey("auth")),p256dh:ri(b.getKey("p256dh"))},F=yield dn(D.firebaseDependencies);if(F){if(Ao(F.subscriptionOptions,x))return Date.now()>=F.createTime+Xa?Xu(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield zi(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return we(D.firebaseDependencies,x)}return we(D.firebaseDependencies,x)})).apply(this,arguments)}function tu(D){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(D){const b=yield dn(D.firebaseDependencies);b&&(yield zi(D.firebaseDependencies,b.token),yield Sc(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Xu(D,b){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(D,b){try{const x=yield _r(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield ws(D.firebaseDependencies,F),x}catch(x){throw yield tu(D),x}})).apply(this,arguments)}function we(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,b){const F={token:yield ra(D,b),createTime:Date.now(),subscriptionOptions:b};return yield ws(D,F),F.token})).apply(this,arguments)}function tl(D,b){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wa(b)})})).apply(this,arguments)}function Ao(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function So(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Hr(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function nl(D,b){!b.data||(D.data=b.data)}(b,D),function rl(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function xc(D){return"object"==typeof D&&!!D&&Ws in D}function il(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function Cs(D){return Nn.create("missing-app-config-values",{valueName:D})}il("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),il("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class or{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function ru(D){if(!D||!D.options)throw Cs("App Configuration Object");if(!D.name)throw Cs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw Cs(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ii(D){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Qu,{scope:vs}),D.swRegistration.update().catch(()=>{})}catch(b){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ts(D,b){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ii(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function sl(D,b){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Br)})).apply(this,arguments)}function ol(){return(ol=(0,O.Z)(function*(D,b){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield sl(D,null==b?void 0:b.vapidKey),yield Ts(D,null==b?void 0:b.serviceWorkerRegistration),ia(D)})).apply(this,arguments)}function sa(D,b,x){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(D,b,x){const F=al(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ws],message_name:x[ta],message_time:x[Tc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function al(D){switch(D){case Es.NOTIFICATION_CLICKED:return"notification_open";case Es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mc(){return(Mc=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Es.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(So(x)):D.onMessageHandler.next(So(x)));const F=x.data;xc(F)&&"1"===F[Cp]&&(yield sa(D,x.messageType,F))})).apply(this,arguments)}const ll="@firebase/messaging",Rc=D=>{const b=new or(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ul(D,b){return Mc.apply(this,arguments)}(b,x)),b},Qs=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function ou(D,b){return ol.apply(this,arguments)}(b,F)}};function Oc(){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nc(){(0,ue._registerComponent)(new ge.wA("messaging",Rc,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Qs,"PRIVATE")),(0,ue.registerVersion)(ll,"0.9.12"),(0,ue.registerVersion)(ll,"0.9.12","esm2017")}();const dl="analytics",Ym="firebase_id",aa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",au="https://www.googletagmanager.com/gtag/js",Un=new se.Yd("@firebase/analytics");function Pc(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Tp(D,b){const x=document.createElement("script");x.src=`${au}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function xo(D,b,x,F,z,ee){return kc.apply(this,arguments)}function kc(){return(kc=(0,O.Z)(function*(D,b,x,F,z,ee){const Se=F[z];try{if(Se)yield b[Se];else{const Je=(yield Pc(x)).find(ft=>ft.measurementId===z);Je&&(yield b[Je.appId])}}catch(ze){Un.error(ze)}D("config",z,ee)})).apply(this,arguments)}function fl(D,b,x,F,z){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,b,x,F,z){try{let ee=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield Pc(x);for(const Je of Se){const ft=ze.find(vt=>vt.measurementId===Je),Ut=ft&&b[ft.appId];if(!Ut){ee=[];break}ee.push(Ut)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,z||{})}catch(ee){Un.error(ee)}})).apply(this,arguments)}function Ap(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(au))return b;return null}const mn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ua=new class gl{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function eo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Lc(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,z={method:"GET",headers:eo(F)},ee=aa.replace("{app-id}",x),Se=yield fetch(ee,z);if(200!==Se.status&&304!==Se.status){let ze="";try{const Je=yield Se.json();(null===(b=Je.error)||void 0===b?void 0:b.message)&&(ze=Je.error.message)}catch(Je){}throw mn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function Mo(D){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(D,b=ua,x){const{appId:F,apiKey:z,measurementId:ee}=D.options;if(!F)throw mn.create("no-app-id");if(!z){if(ee)return{measurementId:ee,appId:F};throw mn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new uu;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),Ct({appId:F,apiKey:z,measurementId:ee},Se,ze,b)})).apply(this,arguments)}function Ct(D,b,x){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,z=ua){const{appId:ee,measurementId:Se}=D;try{yield Sp(F,b)}catch(ze){if(Se)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ee,measurementId:Se};throw ze}try{const ze=yield Lc(D);return z.deleteThrottleMetadata(ee),ze}catch(ze){if(!ml(ze)){if(z.deleteThrottleMetadata(ee),Se)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ee,measurementId:Se};throw ze}const Je=503===Number(ze.customData.httpStatus)?(0,J.$s)(x,z.intervalMillis,30):(0,J.$s)(x,z.intervalMillis),ft={throttleEndTimeMillis:Date.now()+Je,backoffCount:x+1};return z.setThrottleMetadata(ee,ft),Un.debug(`Calling attemptFetch again in ${Je} millis`),Ct(D,ft,F,z)}})).apply(this,arguments)}function Sp(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),ee=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(ee),F(mn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function ml(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class uu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function gh(){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(){if(!(0,J.hl)())return Un.warn(mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Un.warn(mn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(D,b,x,F,z,ee,Se){var ze;const Je=Mo(D);Je.then(wn=>{x[wn.measurementId]=wn.appId,D.options.measurementId&&wn.measurementId!==D.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>Un.error(wn)),b.push(Je);const ft=gh().then(wn=>{if(wn)return F.getId()}),[Ut,vt]=yield Promise.all([Je,ft]);Ap()||Tp(ee,Ut.measurementId),z("js",new Date);const Pn=null!==(ze=null==Se?void 0:Se.config)&&void 0!==ze?ze:{};return Pn.origin="firebase",Pn.update=!0,null!=vt&&(Pn[Ym]=vt),z("config",Ut.measurementId,Pn),Ut.measurementId})).apply(this,arguments)}class Ro{constructor(b){this.app=b}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},no=[];const yl={};let oi,Ms,ro="dataLayer",Gn=!1;function Yi(D,b,x){!function _l(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),x=mn.create("invalid-analytics-context",{errorInfo:b});Un.warn(x.message)}}();const F=D.options.appId;if(!F)throw mn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw mn.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[F])throw mn.create("already-exists",{id:F});if(!Gn){!function Zi(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(ro);const{wrappedGtag:ee,gtagCore:Se}=function ph(D,b,x,F,z){let ee=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ee=window[z]),window[z]=function Fc(D,b,x,F){function ee(){return(ee=(0,O.Z)(function*(Se,ze,Je){try{"event"===Se?yield fl(D,b,x,ze,Je):"config"===Se?yield xo(D,b,x,F,ze,Je):D("set",ze)}catch(ft){Un.error(ft)}})).apply(this,arguments)}return function z(Se,ze,Je){return ee.apply(this,arguments)}}(ee,D,b,x),{gtagCore:ee,wrappedGtag:window[z]}}(Cr,no,yl,ro,"gtag");Ms=ee,oi=Se,Gn=!0}return Cr[F]=function si(D,b,x,F,z,ee,Se){return Hn.apply(this,arguments)}(D,no,yl,b,oi,ro,x),new Ro(D)}function la(){return(la=(0,O.Z)(function*(D,b,x,F,z){if(z&&z.global)D("event",x,F);else{const ee=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function oo(){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const wl="@firebase/analytics";!function yh(){(0,ue._registerComponent)(new ge.wA(dl,(b,{options:x})=>Yi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function D(b){try{const x=b.getProvider(dl).getImmediate();return{logEvent:(F,z,ee)=>function jc(D,b,x,F){D=(0,J.m9)(D),function Vc(D,b,x,F,z){return la.apply(this,arguments)}(Ms,Cr[D.app.options.appId],b,x,F).catch(z=>Un.error(z))}(x,F,z,ee)}}catch(x){throw mn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(wl,"0.7.8"),(0,ue.registerVersion)(wl,"0.7.8","esm2017")}();var Hc=k(4408),_h=k(7565);const du=new class En extends _h.v{}(class Si extends Hc.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var Tr=k(4986),hu=k(8505),Ar=k(9468),_i=k(5363);const Il=new g.GfV("7.3.0"),Rs="__angularfire_symbol__analyticsIsSupportedValue",qr="__angularfire_symbol__analyticsIsSupported",zr="__angularfire_symbol__remoteConfigIsSupportedValue",da="__angularfire_symbol__remoteConfigIsSupported",ha="__angularfire_symbol__messagingIsSupportedValue",Gc="__angularfire_symbol__messagingIsSupported";function fa(D,b,x){if(b){if(1===b.length)return b[0];const ee=b.filter(Se=>Se.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[qr]||(globalThis[qr]=oo().then(D=>globalThis[Rs]=D).catch(()=>globalThis[Rs]=!1)),globalThis[Gc]||(globalThis[Gc]=Oc().then(D=>globalThis[ha]=D).catch(()=>globalThis[ha]=!1)),globalThis[da]||(globalThis[da]=zs().then(D=>globalThis[zr]=D).catch(()=>globalThis[zr]=!1));const wh=(D,b)=>{const x=b?[b]:(0,Z.C6)(),F=[];return x.forEach(z=>{z.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ao(){}class pa{constructor(b,x=du){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{b.apply(this,[Se])})},x,F)}}class Ih{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),x.pipe((0,hu.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dl=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new pa(Zone.current)),this.insideAngular=x.run(()=>new pa(Zone.current,Tr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Xi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function bl(D){return Xi(),function es(D){return function(x){return(x=x.lift(new Ih(D.ngZone))).pipe((0,Ar.R)(D.outsideAngular),(0,_i.Q)(D.insideAngular))}}(Xi())(D)}},2090:(nt,Ce,k)=>{k.d(Ce,{BH:()=>Te,LL:()=>_t,ZR:()=>oe,zI:()=>me,US:()=>se,tV:()=>B,L:()=>ce,$s:()=>Hs,r3:()=>Kt,Sg:()=>Me,ne:()=>ot,vZ:()=>hs,ZB:()=>Y,Lj:()=>Ot,pd:()=>Ui,m9:()=>at,z$:()=>Pe,jU:()=>Ke,ru:()=>Ge,d:()=>_e,xb:()=>tr,w1:()=>ve,hl:()=>q,uI:()=>pe,UG:()=>Ee,b$:()=>De,G6:()=>te,Mn:()=>je,X3:()=>ut,xO:()=>Ci,zd:()=>br,eu:()=>re});var g=k(5861);const J=function(U){const L=[];let H=0;for(let de=0;de<U.length;de++){let K=U.charCodeAt(de);K<128?L[H++]=K:K<2048?(L[H++]=K>>6|192,L[H++]=63&K|128):55296==(64512&K)&&de+1<U.length&&56320==(64512&U.charCodeAt(de+1))?(K=65536+((1023&K)<<10)+(1023&U.charCodeAt(++de)),L[H++]=K>>18|240,L[H++]=K>>12&63|128,L[H++]=K>>6&63|128,L[H++]=63&K|128):(L[H++]=K>>12|224,L[H++]=K>>6&63|128,L[H++]=63&K|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let K=0;K<U.length;K+=3){const Le=U[K],ht=K+1<U.length,jt=ht?U[K+1]:0,mr=K+2<U.length,Vt=mr?U[K+2]:0;let ln=(15&jt)<<2|Vt>>6,Yn=63&Vt;mr||(Yn=64,ht||(ln=64)),de.push(H[Le>>2],H[(3&Le)<<4|jt>>4],H[ln],H[Yn])}return de.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let H=0,de=0;for(;H<U.length;){const K=U[H++];if(K<128)L[de++]=String.fromCharCode(K);else if(K>191&&K<224){const Le=U[H++];L[de++]=String.fromCharCode((31&K)<<6|63&Le)}else if(K>239&&K<365){const mr=((7&K)<<18|(63&U[H++])<<12|(63&U[H++])<<6|63&U[H++])-65536;L[de++]=String.fromCharCode(55296+(mr>>10)),L[de++]=String.fromCharCode(56320+(1023&mr))}else{const Le=U[H++],ht=U[H++];L[de++]=String.fromCharCode((15&K)<<12|(63&Le)<<6|63&ht)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let K=0;K<U.length;){const Le=H[U.charAt(K++)],jt=K<U.length?H[U.charAt(K)]:0;++K;const Vt=K<U.length?H[U.charAt(K)]:64;++K;const Tt=K<U.length?H[U.charAt(K)]:64;if(++K,null==Le||null==jt||null==Vt||null==Tt)throw Error();de.push(Le<<2|jt>>4),64!==Vt&&(de.push(jt<<4&240|Vt>>2),64!==Tt&&de.push(Vt<<6&192|Tt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ce=function(U){return function(U){const L=J(U);return se.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return se.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Y(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!He(H)||(U[H]=Y(U[H],L[H]));return U}function He(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,de)=>{H?this.reject(H):this.resolve(de),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,de))}}}function Me(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=L||"demo-project",K=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:K,exp:K+3600,auth_time:K,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ht)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ke(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return Pe().indexOf("MSAppHost/")>=0}function te(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function re(){return new Promise((U,L)=>{try{let H=!0;const de="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(de);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(de),U(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Le;L((null===(Le=K.error)||void 0===Le?void 0:Le.message)||"")}}catch(H){L(H)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(L,H,de){super(H),this.code=L,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(L,H,de){this.service=L,this.serviceName=H,this.errors=de}create(L,...H){const de=H[0]||{},K=`${this.service}/${L}`,Le=this.errors[L],ht=Le?function Zt(U,L){return U.replace(Mn,(H,de)=>{const K=L[de];return null!=K?String(K):`<${de}?>`})}(Le,de):"Error";return new oe(K,`${this.serviceName}: ${ht} (${K}).`,de)}}const Mn=/\{\$([^}]+)}/g;function Kt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function tr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function hs(U,L){if(U===L)return!0;const H=Object.keys(U),de=Object.keys(L);for(const K of H){if(!de.includes(K))return!1;const Le=U[K],ht=L[K];if(Dr(Le)&&Dr(ht)){if(!hs(Le,ht))return!1}else if(Le!==ht)return!1}for(const K of de)if(!H.includes(K))return!1;return!0}function Dr(U){return null!==U&&"object"==typeof U}function Ci(U){const L=[];for(const[H,de]of Object.entries(U))Array.isArray(de)?de.forEach(K=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(de));return L.length?"&"+L.join("&"):""}function br(U){const L={};return U.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[K,Le]=de.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Le)}}),L}function Ui(U){const L=U.indexOf("?");if(!L)return"";const H=U.indexOf("#",L);return U.substring(L,H>0?H:void 0)}function ot(U,L){const H=new Lr(U,L);return H.subscribe.bind(H)}class Lr{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(de=>{this.error(de)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,de){let K;if(void 0===L&&void 0===H&&void 0===de)throw new Error("Missing Observer.");K=function jn(U,L){if("object"!=typeof U||null===U)return!1;for(const H of L)if(H in U&&"function"==typeof U[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:de},void 0===K.next&&(K.next=ei),void 0===K.error&&(K.error=ei),void 0===K.complete&&(K.complete=ei);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(ht){}}),this.observers.push(K),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}function Hs(U,L=1e3,H=2){const de=L*Math.pow(H,U),K=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+K)}function at(U){return U&&U._delegate?U._delegate:U}function gr(U,L){return new Promise((H,de)=>{U.onsuccess=K=>{H(K.target.result)},U.onerror=K=>{var Le;de(`${L}: ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}})}class Rt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H="readonly"){return new qe(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new be(this._db.createObjectStore(L,H))}close(){this._db.close()}}class qe{constructor(L){this._transaction=L,this.complete=new Promise((H,de)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new Ze(this._store.index(L))}createIndex(L,H,de){return new Ze(this._store.createIndex(L,H,de))}get(L){return gr(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return gr(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return gr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return gr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ze{constructor(L){this._index=L}get(L){return gr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,H){return new Promise((de,K)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=ht=>{de(new Rt(ht.target.result))},Le.onerror=ht=>{var jt;K(`Error opening indexedDB: ${null===(jt=ht.target.error)||void 0===jt?void 0:jt.message}`)},Le.onupgradeneeded=ht=>{H(new Rt(Le.result),ht.oldVersion,ht.newVersion,new qe(Le.transaction))}}catch(Le){K(`Error opening indexedDB: ${Le.message}`)}})}function Ot(U){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(U){return new Promise((L,H)=>{try{const de=indexedDB.deleteDatabase(U);de.onsuccess=()=>{L()},de.onerror=K=>{var Le;H(`Error deleting indexedDB database "${U}": ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}}catch(de){H(`Error deleting indexedDB database "${U}": ${de.message}`)}})})).apply(this,arguments)}},18:(nt,Ce,k)=>{var g=k(5e3);let Z=null;function O(){return Z}const se=new g.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ce(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new j((0,g.LFG)(se))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,g.LFG)(se).location;return new Ge((0,g.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new g.OlP("appBaseHref");let Ge=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Pe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Pe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(Ke,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Pe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Pe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe),g.LFG(Ke,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(g.LFG(pe),g.LFG(fe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new _e((0,g.LFG)(pe),(0,g.LFG)(fe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class ms{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ms(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),$i(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{$i(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function $i(n,e){n.context.$implicit=e.item}let Vr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$a("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$a("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class nn{constructor(){this.$implicit=null,this.ngIf=null}}function $a(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function sr(n){return"server"===n}let Ya=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Qa((0,g.LFG)(se),window)}),n})();class Qa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function na(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qi(this.window.history)||qi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class To extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Z||(Z=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Sc(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function Ks(n){Zs=Zs||document.createElement("a"),Zs.setAttribute("href",n);const e=Zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Io(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Zs,rn=null;const yr=new g.OlP("TRANSITION_ID"),ra=[{provide:g.ip1,useFactory:function Nn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[yr,se,g.zs3],multi:!0}];class gi{static init(){(0,g.VLi)(new gi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new g.OlP("EventManagerPlugins");let zi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $r=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends $r{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xa=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(Xa,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ao(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new nl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new rl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class nl extends Ao{constructor(e,t,r,o){super(e),this.component=r;const u=we(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Xu(n){return"_ngcontent-%COMP%".replace(Xa,n)}(o+"-"+r.id),this.hostAttr=function el(n){return"_nghost-%COMP%".replace(Xa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rl extends Ao{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=we(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xc=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const il=["alt","control","meta","shift"],Cs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},or={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let iu=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(il.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ts(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&or.hasOwnProperty(e)&&(e=or[e]))}return Cs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),il.forEach(u=>{u!=o&&ii[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ol=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function mi(){ws.makeCurrent(),gi.init()},multi:!0},{provide:se,useFactory:function su(){return(0,g.RDi)(document),document},deps:[]}]),sa=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function sl(){return new g.qLn},deps:[]},{provide:Is,useClass:xc,multi:!0,deps:[se,g.R0b,g.Lbi]},{provide:Is,useClass:iu,multi:!0,deps:[se]},{provide:gn,useClass:gn,deps:[zi,Ds,g.AFp]},{provide:g.FYo,useExisting:gn},{provide:$r,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[se]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:zi,useClass:zi,deps:[Is,g.R0b]},{provide:class dn{},useClass:_r,deps:[]}];let oa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:yr,useExisting:g.AFp},ra]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:sa,imports:[Co,g.hGG]}),n})();"undefined"!=typeof window&&window;var On=k(8996),mn=k(8306);const{isArray:pl}=Array,{getPrototypeOf:Ki,prototype:gl,keys:ua}=Object;function eo(n){if(1===n.length){const e=n[0];if(pl(e))return{args:e,keys:null};if(function Lc(n){return n&&"object"==typeof n&&Ki(n)===gl}(e)){const t=ua(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Xt=k(8421),Mo=k(7669),yn=k(5403),Ct=k(4004);const{isArray:xs}=Array;function ml(n){return(0,Ct.U)(e=>function Sp(n,e){return xs(e)?n(...e):n(e)}(n,e))}function uu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let to=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),si=(()=>{class n extends to{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Hn=new g.OlP("NgValueAccessor"),Ro={provide:Hn,useExisting:(0,g.Gpc)(()=>Cr),multi:!0};let Cr=(()=>{class n extends si{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},features:[g._Bn([Ro]),g.qOj]}),n})();const no={provide:Hn,useExisting:(0,g.Gpc)(()=>No),multi:!0},ro=new g.OlP("CompositionEventMode");let No=(()=>{class n extends to{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yl(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ro,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([no]),g.qOj]}),n})();const Gn=new g.OlP("NgValidators"),io=new g.OlP("NgAsyncValidators");function ai(n){return null!=n}function Uc(n){const e=(0,g.QGY)(n)?(0,On.D)(n):n;return(0,g.CqO)(e),e}function lu(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function oo(n,e){return e.map(t=>t(n))}function mh(n){return n.map(e=>function cu(n){return!n.validate}(e)?e:t=>e.validate(t))}function Bc(n){return null!=n?function Cn(n){if(!n)return null;const e=n.filter(ai);return 0==e.length?null:function(t){return lu(oo(t,e))}}(mh(n)):null}function jc(n){return null!=n?function xp(n){if(!n)return null;const e=n.filter(ai);return 0==e.length?null:function(t){return function gh(...n){const e=(0,Mo.jO)(n),{args:t,keys:r}=eo(n),o=new mn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let M=0;M<d;M++){let N=!1;(0,Xt.Xf)(t[M]).subscribe((0,yn.x)(u,G=>{N||(N=!0,C--),m[M]=G},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?uu(r,m):m),u.complete())}))}});return e?o.pipe(ml(e)):o}(oo(t,e).map(Uc)).pipe((0,Ct.U)(lu))}}(mh(n)):null}function wl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hc(n){return n?Array.isArray(n)?n:[n]:[]}function Si(n,e){return Array.isArray(n)?n.includes(e):n===e}function _h(n,e){const t=Hc(e);return Hc(n).forEach(o=>{Si(t,o)||t.push(o)}),t}function En(n,e){return Hc(e).filter(t=>!Si(n,t))}class du{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Bc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Gr extends du{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tr extends du{get formDirective(){return null}get path(){return null}}let Il=(()=>{class n extends class hu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Gr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})();function Er(n,e){(function es(n,e){const t=function $c(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(wl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function yh(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(wl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Oo(e._rawValidators,o),Oo(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function Cl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function x(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function bl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Oo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Sr="VALID",xr="INVALID",Wr="PENDING",vi="DISABLED";function zc(n){return(Wc(n)?n.validators:n)||null}function Tl(n){return Array.isArray(n)?Bc(n):n||null}function ko(n,e){return(Wc(e)?e.asyncValidators:n)||null}function Dh(n){return Array.isArray(n)?jc(n):n||null}function Wc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Os=n=>n instanceof Ch;function Np(n){return(n=>n instanceof Qm)(n)?n.value:n.getRawValue()}function Op(n,e){const t=Os(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function bh(n,e){Os(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class pu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Tl(this._rawValidators),this._composedAsyncValidatorFn=Dh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sr}get invalid(){return this.status===xr}get pending(){return this.status==Wr}get disabled(){return this.status===vi}get enabled(){return this.status!==vi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Tl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Dh(e)}addValidators(e){this.setValidators(_h(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_h(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(En(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(En(e,this._rawAsyncValidators))}hasValidator(e){return Si(this._rawValidators,e)}hasAsyncValidator(e){return Si(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vi,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sr||this.status===Wr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vi:Sr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wr,this._hasOwnPendingAsyncValidator=!0;const t=Uc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Mp(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Os(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof Jm)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?vi:this.errors?xr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wr)?Wr:this._anyControlsHaveStatus(xr)?xr:Sr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Qm extends pu{constructor(e=null,t,r){super(zc(t),ko(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wc(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ch extends pu{constructor(e,t,r){super(zc(t),ko(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bh(this,e),Object.keys(e).forEach(r=>{Op(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Np(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Jm extends pu{constructor(e,t,r){super(zc(t),ko(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){bh(this,e),e.forEach((r,o)=>{Op(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Np(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const kp={provide:Gr,useExisting:(0,g.Gpc)(()=>Kc)},Zc=(()=>Promise.resolve(null))();let Kc=(()=>{class n extends Gr{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new Qm,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Pn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===No?t=u:function Ut(n){return Object.getPrototypeOf(n.constructor)===si}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ft(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Er(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Zc.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Zc.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function fu(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Tr,9),g.Y36(Gn,10),g.Y36(io,10),g.Y36(Hn,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([kp]),g.qOj,g.TTD]}),n})(),ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),F0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ts]]}),n})(),Ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[F0]}),n})();var pn=k(2011),Ea=k(4986);function mt(...n){const e=(0,Mo.yG)(n);return(0,On.D)(n,e)}var an=k(5813),Lo=k(8189);function jh(...n){return function Bh(){return(0,Lo.J)(1)}()((0,On.D)(n,(0,Mo.yG)(n)))}var Mr=k(4482);function _u(...n){const e=(0,Mo.yG)(n);return(0,Mr.e)((t,r)=>{(e?jh(n,t,e):jh(n,t)).subscribe(r)})}function nd(){return(0,Mr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Yp(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,yn.x)(d,M=>{const N=C++;w=m?n(w,M,N):(m=!0,M),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Pl(n,e){return(0,Mr.e)(Yp(n,e,arguments.length>=2,!0))}var li=k(4671);function cy(n,e){return n===e}function ns(n,e){return(0,Mr.e)((t,r)=>{let o=0;t.subscribe((0,yn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}k(820);var We,Jp=k(3942),ae=k(5861),uo=k(9681),vu=k(4859),Vo=k(1877),wt=k(2090),kl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rs={},$h=$h||{},Et=kl||self;function rd(){}function Hh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),h=0;function p(n,e,t){return n.call.apply(n.bind,arguments)}function v(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function T(n,e,t){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)}function R(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function ne(){this.s=this.s,this.o=this.o}var Ye={};ne.prototype.s=!1,ne.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function dy(n){return Object.prototype.hasOwnProperty.call(n,y)&&n[y]||(n[y]=++h)}(this);delete Ye[n]}},ne.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ct=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},it=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Ei(n){return Array.prototype.concat.apply([],arguments)}function wa(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ia(n){return/^[\s\xa0]*$/.test(n)}var kn,Eu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wr(n,e){return-1!=n.indexOf(e)}function Gh(n,e){return n<e?-1:n>e?1:0}e:{var Ll=Et.navigator;if(Ll){var id=Ll.userAgent;if(id){kn=id;break e}}kn=""}function Vl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ul(n){const e={};for(const t in n)e[t]=n[t];return e}var Xp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sd(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Xp.length;u++)t=Xp[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qh(n){return qh[" "](n),n}qh[" "]=rd;var eg,n,pD=wr(kn,"Opera"),od=wr(kn,"Trident")||wr(kn,"MSIE"),hy=wr(kn,"Edge"),zh=hy||od,fy=wr(kn,"Gecko")&&!(wr(kn.toLowerCase(),"webkit")&&!wr(kn,"Edge"))&&!(wr(kn,"Trident")||wr(kn,"MSIE"))&&!wr(kn,"Edge"),py=wr(kn.toLowerCase(),"webkit")&&!wr(kn,"Edge");function V0(){var n=Et.document;return n?n.documentMode:void 0}e:{var tg="",ng=(n=kn,fy?/rv:([^\);]+)(\)|;)/.exec(n):hy?/Edge\/([\d\.]+)/.exec(n):od?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):py?/WebKit\/(\S+)/.exec(n):pD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ng&&(tg=ng?ng[1]:""),od){var Da=V0();if(null!=Da&&Da>parseFloat(tg)){eg=String(Da);break e}}eg=tg}var U0={};var gD=Et.document&&od&&(V0()||parseInt(eg,10))||void 0,j0=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",rd,e),Et.removeEventListener("test",rd,e)}catch(t){}return n}();function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ad(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fy){e:{try{qh(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:my[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ad.Z.h.call(this)}}Kr.prototype.h=function(){this.defaultPrevented=!0},$(ad,Kr);var my={2:"touch",3:"pen",4:"mouse"};ad.prototype.h=function(){ad.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ud="closure_listenable_"+(1e6*Math.random()|0),rg=0;function ig(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++rg,this.ca=this.fa=!1}function Zh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ld(n){this.src=n,this.g={},this.h=0}function sg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ct(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Zh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Kh(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}ld.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Kh(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new ig(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Bl="closure_lm_"+(1e6*Math.random()|0),yy={};function _y(n,e,t,r,o){if(r&&r.once)return vy(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)_y(n,e[u],t,r,o);return null}return t=wy(t),n&&n[ud]?n.N(e,t,Fl(r)?!!r.capture:!!r,o):$0(n,e,t,!1,r,o)}function $0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Fl(o)?!!o.capture:!!o,m=Ey(n);if(m||(n[Bl]=m=new ld(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function mD(){var e=H0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)j0||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(yD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vy(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vy(n,e[u],t,r,o);return null}return t=wy(t),n&&n[ud]?n.O(e,t,Fl(r)?!!r.capture:!!r,o):$0(n,e,t,!0,r,o)}function og(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)og(n,e[u],t,r,o);else r=Fl(r)?!!r.capture:!!r,t=wy(t),n&&n[ud]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Kh(u=n.g[e],t,r,o))&&(Zh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ey(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Kh(e,t,r,o)),(t=-1<n?e[n]:null)&&ag(t))}function ag(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ud])sg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(yD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ey(e))?(sg(t,n),0==t.h&&(t.src=null,e[Bl]=null)):Zh(n)}}}function yD(n){return n in yy?yy[n]:yy[n]="on"+n}function H0(n,e){if(n.ca)n=!0;else{e=new ad(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ag(n),n=t.call(r,e)}return n}function Ey(n){return(n=n[Bl])instanceof ld?n:null}var ug="__closure_events_fn_"+(1e9*Math.random()>>>0);function wy(n){return"function"==typeof n?n:(n[ug]||(n[ug]=function(e){return n.handleEvent(e)}),n[ug])}function Rr(){ne.call(this),this.i=new ld(this),this.P=this,this.I=null}function _n(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var o=e;sd(e=new Kr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=lg(d,r,!0,e)&&o}if(o=lg(d=e.g=n,r,!0,e)&&o,o=lg(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=lg(d=e.g=t[u],r,!1,e)&&o}function lg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&sg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}$(Rr,ne),Rr.prototype[ud]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){og(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zh(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var cg=Et.JSON.stringify;function _D(){var n=by;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Dy,G0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ED,n=>n.reset());class ED{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function q0(n){Et.setTimeout(()=>{throw n},0)}function Iy(n,e){Dy||function wD(){var n=Et.Promise.resolve(void 0);Dy=function(){n.then(z0)}}(),Dt||(Dy(),Dt=!0),by.add(n,e)}var Dt=!1,by=new class vD{constructor(){this.h=this.g=null}add(e,t){const r=G0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function z0(){for(var n;n=_D();){try{n.h.call(n.g)}catch(t){q0(t)}var e=G0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dt=!1}function Yh(n,e){Rr.call(this),this.h=n||1,this.g=e||Et,this.j=T(this.kb,this),this.l=Date.now()}function cd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function is(n,e,t){if("function"==typeof n)t&&(n=T(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=T(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function Cy(n){n.g=is(()=>{n.g=null,n.i&&(n.i=!1,Cy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$(Yh,Rr),(We=Yh.prototype).da=!1,We.S=null,We.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_n(this,"tick"),this.da&&(cd(this),this.start()))}},We.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.M=function(){Yh.Z.M.call(this),cd(this),delete this.g};class ID extends ne{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cy(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jl(n){ne.call(this),this.h=n,this.g={}}$(jl,ne);var Uo=[];function dg(n,e,t,r){Array.isArray(t)||(t&&(Uo[0]=t.toString()),t=Uo);for(var o=0;o<t.length;o++){var u=_y(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ty(n){Vl(n.g,function(e,t){this.g.hasOwnProperty(t)&&ag(e)},n),n.g={}}function dd(){this.g=!0}function Qh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function fg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return cg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}jl.prototype.M=function(){jl.Z.M.call(this),Ty(this)},jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dd.prototype.Aa=function(){this.g=!1},dd.prototype.info=function(){};var ba={},pg=null;function hd(){return pg=pg||new Rr}function DD(n){Kr.call(this,ba.Ma,n)}function Jh(n){const e=hd();_n(e,new DD(e,n))}function Z0(n,e){Kr.call(this,ba.STAT_EVENT,n),this.stat=e}function wi(n){const e=hd();_n(e,new Z0(e,n))}function K0(n,e){Kr.call(this,ba.Na,n),this.size=e}function fd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}ba.Ma="serverreachability",$(DD,Kr),ba.STAT_EVENT="statevent",$(Z0,Kr),ba.Na="timingevent",$(K0,Kr);var Ay={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Y0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Q0(){}function xy(){}Q0.prototype.h=null;var X0,Xh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ef(){Kr.call(this,"d")}function J0(){Kr.call(this,"c")}function My(){}function gg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new jl(this),this.P=vT,this.W=new Yh(n=zh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}$(ef,Kr),$(J0,Kr),$(My,Q0),My.prototype.g=function(){return new XMLHttpRequest},My.prototype.i=function(){return{}},X0=new My;var vT=45e3,eE={},Ry={};function tE(n,e,t){n.K=1,n.v=nf(Mi(e)),n.s=t,n.U=!0,CD(n,null)}function CD(n,e){n.F=Date.now(),pd(n),n.A=Mi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ri(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bD,n.g=$y(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ID(T(n.Ia,n,n.g),n.O)),dg(n.V,n.g,"readystatechange",n.gb),e=n.H?Ul(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jh(1),function _T(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");d=2<=N.length&&"type"==N[1]?d+(M+"=")+C+"&":d+(M+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ca(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function mg(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=TD(n,t),o==Ry){4==e&&(n.o=4,wi(14),r=!1),Qh(n.j,n.m,null,"[Incomplete Response]");break}if(o==eE){n.o=4,wi(15),Qh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qh(n.j,n.m,o,null),Bo(n,o)}Ca(n)&&o!=Ry&&o!=eE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),By(e),e.L=!0,wi(11))):(Qh(n.j,n.m,t,"[Invalid Chunked Response]"),Hl(n),$l(n))}function TD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ry:(t=Number(e.substring(t,r)),isNaN(t)?eE:(r+=1)+t>e.length?Ry:(e=e.substr(r,t),n.C=r+t,e))}function pd(n){n.Y=Date.now()+n.P,yg(n,n.P)}function yg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fd(T(n.eb,n),e)}function tf(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function $l(n){0==n.l.G||n.I||jy(n.l,n)}function Hl(n){tf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,cd(n.W),Ty(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bo(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sf(t.i,n)))if(t.I=n.N,!n.J&&sf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=fd(T(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vd(t),Ly(t)}Uy(t),wi(18)}if(1>=hE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else co(t,11)}else if((n.J||t.g==n)&&vd(t),!Ia(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.K=r=1.5*G,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const he=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.i;!u.g&&(wr(he,"spdy")||wr(he,"quic")||wr(he,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(vg(u,u.h),u.h=null))}if(r.D){const ke=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.sa=ke,Fn(r.F,r.D,ke))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Sg(r,r.H?r.la:null,r.W),d.J){fE(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(tf(m),pd(m)),r.g=d}else df(r);0<t.l.length&&cf(t)}else"stop"!=C[0]&&"close"!=C[0]||co(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?co(t,7):lf(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Jh(4)}catch(C){}}function Ny(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hh(n)||"string"==typeof n)it(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Hh(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function nE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Hh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function wu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof wu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Oy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Iu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Iu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Iu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(We=gg.prototype).setTimeout=function(n){this.P=n},We.gb=function(n){n=n.target;const e=this.L;e&&3==Sa(n)?e.l():this.Ia(n)},We.Ia=function(n){try{if(n==this.g)e:{const M=Sa(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||zh||this.g&&(this.h.h||this.g.ga()||bg(this.g)))){this.I||4!=M||7==e||Jh(8==e||0>=N?3:2),tf(this);var t=this.g.ba();this.N=t;t:if(Ca(this)){var r=bg(this.g);n="";var o=r.length,u=4==Sa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Hl(this),$l(this);var d="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function W0(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ia(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,wi(12),Hl(this),$l(this);break e}Qh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bo(this,t)}this.U?(mg(this,M,d),zh&&this.i&&3==M&&(dg(this.V,this.W,"tick",this.fb),this.W.start())):(Qh(this.j,this.m,d,null),Bo(this,d)),4==M&&Hl(this),this.i&&!this.I&&(4==M?jy(this.l,this):(this.i=!1,pd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Hl(this),$l(this)}}}catch(M){}},We.fb=function(){if(this.g){var n=Sa(this.g),e=this.g.ga();this.C<e.length&&(tf(this),mg(this,n,e),this.i&&4!=n&&pd(this))}},We.cancel=function(){this.I=!0,Hl(this)},We.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function hg(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jh(3),wi(17)),Hl(this),this.o=2,$l(this)):yg(this,this.Y-n)},(We=wu.prototype).R=function(){Oy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},We.T=function(){return Oy(this),this.g.concat()},We.get=function(n,e){return Iu(this.h,n)?this.h[n]:e},We.set=function(n,e){Iu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},We.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var rE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof lo){this.g=void 0!==e?e:n.g,gd(this,n.j),this.s=n.s,Ta(this,n.i),Du(this,n.m),this.l=n.l,e=n.h;var t=new rf;t.i=e.i,e.g&&(t.g=new wu(e.g),t.h=e.h),Gl(this,t),this.o=n.o}else n&&(t=String(n).match(rE))?(this.g=!!e,gd(this,t[1]||"",!0),this.s=ql(t[2]||""),Ta(this,t[3]||"",!0),Du(this,t[4]),this.l=ql(t[5]||"",!0),Gl(this,t[6]||"",!0),this.o=ql(t[7]||"")):(this.g=!!e,this.h=new rf(null,this.g))}function Mi(n){return new lo(n)}function gd(n,e,t){n.j=t?ql(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ta(n,e,t){n.i=t?ql(e,!0):e}function Du(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gl(n,e,t){e instanceof rf?(n.h=e,function SD(n,e){e&&!n.j&&(Aa(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(lE(this,r),Ri(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=md(e,aE)),n.h=new rf(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function nf(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ql(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function md(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_g),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _g(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(md(e,sE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(md(e,sE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(md(t,"/"==t.charAt(0)?ET:oE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",md(t,uE)),n.join("")};var sE=/[#\/\?@]/g,oE=/[#\?:]/g,ET=/[#\?]/g,aE=/[#\?@]/g,uE=/#/g;function rf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Aa(n){n.g||(n.g=new wu,n.h=0,n.i&&function AD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lE(n,e){Aa(n),e=yd(n,e),Iu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Iu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Oy(n)))}function cE(n,e){return Aa(n),e=yd(n,e),Iu(n.g.h,e)}function Ri(n,e,t){lE(n,e),0<t.length&&(n.i=null,n.g.set(yd(n,e),wa(t)),n.h+=t.length)}function yd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xD(n){this.l=n||dE,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=rf.prototype).add=function(n,e){Aa(this),this.i=null,n=yd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){Aa(this),this.g.forEach(function(t,r){it(t,function(o){n.call(e,o,r,this)},this)},this)},We.T=function(){Aa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},We.R=function(n){Aa(this);var e=[];if("string"==typeof n)cE(this,n)&&(e=Ei(e,this.g.get(yd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ei(e,n[t])}return e},We.set=function(n,e){return Aa(this),this.i=null,cE(this,n=yd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var dE=10;function MD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function hE(n){return n.h?1:n.g?n.g.size:0}function sf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vg(n,e){n.g?n.g.add(e):n.h=e}function fE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wa(n.i)}function ky(){}function gE(){this.g=new ky}function RD(n,e,t){const r=t||"";try{Ny(n,function(o,u){let d=o;Fl(o)&&(d=cg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Eg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function of(n){this.l=n.$b||null,this.j=n.ib||!1}function af(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=wg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xD.prototype.cancel=function(){if(this.i=pE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ky.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},ky.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},$(of,Q0),of.prototype.g=function(){return new af(this.l,this.j)},of.prototype.i=function(n){return function(){return n}}({}),$(af,Rr);var wg=0;function yE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ni(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zl(n)}function zl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=af.prototype).open=function(n,e){if(this.readyState!=wg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zl(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ni(this)),this.readyState=wg},We.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},We.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ni(this):zl(this),3==this.readyState&&yE(this)}},We.Ua=function(n){this.g&&(this.response=this.responseText=n,Ni(this))},We.Ta=function(n){this.g&&(this.response=n,Ni(this))},We.ha=function(){this.g&&Ni(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(af.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ND=Et.JSON.parse;function ar(n){Rr.call(this),this.headers=new wu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=OD,this.K=this.L=!1}$(ar,Rr);var OD="",_E=/^https?$/i,PD=["POST","PUT"];function FD(n){return"content-type"==n.toLowerCase()}function Ig(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vE(n),Wl(n)}function vE(n){n.D||(n.D=!0,_n(n,"complete"),_n(n,"error"))}function EE(n){if(n.h&&void 0!==$h&&(!n.C[1]||4!=Sa(n)||2!=n.ba()))if(n.v&&4==Sa(n))is(n.Fa,0,n);else if(_n(n,"readystatechange"),4==Sa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(rE)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!_E.test(o?o.toLowerCase():"")}t=r}if(t)_n(n,"complete"),_n(n,"success");else{n.m=6;try{var d=2<Sa(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",vE(n)}}finally{Wl(n)}}}function Wl(n,e){if(n.g){Dg(n);const t=n.g,r=n.C[0]?rd:null;n.g=null,n.C=null,e||_n(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Dg(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Sa(n){return n.g?n.g.readyState:0}function bg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case OD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Fy(n){let e="";return Vl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function uf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wE(n){this.za=0,this.l=[],this.h=new dd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uf("baseRetryDelayMs",5e3,n),this.$a=uf("retryDelaySeedMs",1e4,n),this.Ya=uf("forwardChannelMaxRetries",2,n),this.ra=uf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new xD(n&&n.concurrentRequestLimit),this.Ca=new gE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function lf(n){if(IE(n),3==n.G){var e=n.V++,t=Mi(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),_d(n,t),(e=new gg(n,n.h,e,void 0)).K=2,e.v=nf(Mi(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=$y(e.l,null),e.g.ea(e.v)),e.F=Date.now(),pd(e)}bE(n)}function Ly(n){n.g&&(By(n),n.g.cancel(),n.g=null)}function IE(n){Ly(n),n.u&&(Et.clearTimeout(n.u),n.u=null),vd(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function Tg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&cf(n)}function cf(n){MD(n.i)||n.m||(n.m=!0,Iy(n.Ha,n),n.C=0)}function Vy(n,e){var t;t=e?e.m:n.V++;const r=Mi(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),_d(n,r),n.o&&n.s&&Cg(r,n.o,n.s),t=new gg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=jo(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),vg(n.i,t),tE(t,r,e)}function _d(n,e){n.j&&Ny({},function(t,r){Fn(e,r,t)})}function jo(n,e,t){t=Math.min(n.l.length,t);var r=n.j?T(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const M=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{RD(M,d,"req"+C+"_")}catch(N){r&&r(M)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function df(n){n.g||n.u||(n.Y=1,Iy(n.Ga,n),n.A=0)}function Uy(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=fd(T(n.Ga,n),Ag(n,n.A)),n.A++,0))}function By(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function LD(n){n.g=new gg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Mi(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),_d(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&Cg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=nf(Mi(e)),t.s=null,t.U=!0,CD(t,n)}function vd(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function jy(n,e){var t=null;if(n.g==e){vd(n),By(n),n.g=null;var r=2}else{if(!sf(n.i,e))return;t=e.D,fE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;_n(r=hd(),new K0(r,t,e,o)),cf(n)}else df(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function DE(n,e){return!(hE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=fd(T(n.Ha,n,e),Ag(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:co(n,5);break;case 4:co(n,10);break;case 3:co(n,6);break;default:co(n,2)}}function Ag(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function co(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=T(n.jb,n);t||(t=new lo("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||gd(t,"https"),nf(t)),function mE(n,e){const t=new dd;if(Et.Image){const r=new Image;r.onload=R(Eg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=R(Eg,t,r,"TestLoadImage: error",!1,e),r.onabort=R(Eg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=R(Eg,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wi(2);n.G=0,n.j&&n.j.va(e),bE(n),IE(n)}function bE(n){n.G=0,n.I=-1,n.j&&((0!=pE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,wa(n.l),n.l.length=0),n.j.ua())}function Sg(n,e,t){let r=function iE(n){return n instanceof lo?Mi(n):new lo(n,void 0)}(t);if(""!=r.i)e&&Ta(r,e+"."+r.i),Du(r,r.m);else{const o=Et.location;r=function Py(n,e,t,r){var o=new lo(null,void 0);return n&&gd(o,n),e&&Ta(o,e),t&&Du(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Vl(n.aa,function(o,u){Fn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),_d(n,r),r}function $y(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new of({ib:!0}):n.qa)).L=n.H,e}function Hy(){}function hf(){if(od&&!(10<=Number(gD)))throw Error("Environmental error: no available transport.")}function ss(n,e){Rr.call(this),this.g=new wE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ia(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ia(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ed(this)}function xg(n){ef.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function CE(){J0.call(this),this.status=1}function Ed(n){this.g=n}(We=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():X0.g(),this.C=function Sy(n){return n.h||(n.h=n.i())}(this.u?this.u:X0),this.g.onreadystatechange=T(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Ig(this,u)}n=t||"";const o=new wu(this.headers);r&&Ny(r,function(u,d){o.set(d,u)}),r=function Tn(n){e:{var e=FD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=ct(PD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Dg(this),0<this.B&&((this.K=function kD(n){return od&&function B0(){return function fD(n){var e=U0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Eu(String(eg)).split("."),t=Eu("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Gh(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Gh(0==o[2].length,0==u[2].length)||Gh(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=T(this.pa,this)):this.A=is(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ig(this,u)}},We.pa=function(){void 0!==$h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_n(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_n(this,"complete"),_n(this,"abort"),Wl(this))},We.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wl(this,!0)),ar.Z.M.call(this)},We.Fa=function(){this.s||(this.F||this.v||this.l?EE(this):this.cb())},We.cb=function(){EE(this)},We.ba=function(){try{return 2<Sa(this)?this.g.status:-1}catch(n){return-1}},We.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},We.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ND(e)}},We.Da=function(){return this.m},We.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=wE.prototype).ma=8,We.G=1,We.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},We.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new gg(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Ul(u),sd(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jo(this,o,e),Fn(t=Mi(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),_d(this,t),this.o&&u&&Cg(t,this.o,u),vg(this.i,o),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),o.$=!0,tE(o,t,null)):tE(o,t,e),this.G=2}}else 3==this.G&&(n?Vy(this,n):0==this.l.length||MD(this.i)||Vy(this))},We.Ga=function(){if(this.u=null,LD(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=fd(T(this.bb,this),n)}},We.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wi(10),Ly(this),LD(this))},We.ab=function(){null!=this.v&&(this.v=null,Ly(this),Uy(this),wi(19))},We.jb=function(n){n?(this.h.info("Successfully pinged google.com"),wi(2)):(this.h.info("Failed to ping google.com"),wi(1))},(We=Hy.prototype).xa=function(){},We.wa=function(){},We.va=function(){},We.ua=function(){},We.Oa=function(){},hf.prototype.g=function(n,e){return new ss(n,e)},$(ss,Rr),ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Iy(T(n.hb,n,e))),wi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Sg(n,null,n.W),cf(n)},ss.prototype.close=function(){lf(this.g)},ss.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Tg(this.g,e)}else this.v?((e={}).__data__=cg(n),Tg(this.g,e)):Tg(this.g,n)},ss.prototype.M=function(){this.g.j=null,delete this.j,lf(this.g),delete this.g,ss.Z.M.call(this)},$(xg,ef),$(CE,J0),$(Ed,Hy),Ed.prototype.xa=function(){_n(this.g,"a")},Ed.prototype.wa=function(n){_n(this.g,new xg(n))},Ed.prototype.va=function(n){_n(this.g,new CE(n))},Ed.prototype.ua=function(){_n(this.g,"b")},hf.prototype.createWebChannel=hf.prototype.g,ss.prototype.send=ss.prototype.u,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,Ay.NO_ERROR=0,Ay.TIMEOUT=8,Ay.HTTP_ERROR=6,Y0.COMPLETE="complete",xy.EventType=Xh,Xh.OPEN="a",Xh.CLOSE="b",Xh.ERROR="c",Xh.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var TE=rs.createWebChannelTransport=function(){return new hf},wd=rs.getStatEventTarget=function(){return hd()},Mg=rs.ErrorCode=Ay,VD=rs.EventType=Y0,UD=rs.Event=ba,Zl=rs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},BD=rs.FetchXmlHttpFactory=of,Rg=rs.WebChannel=xy,jD=rs.XhrIo=ar;const AE="@firebase/firestore";class vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let bu="9.6.11";const xa=new Vo.Yd("@firebase/firestore");function Ng(){return xa.logLevel}function Ne(n,...e){if(xa.logLevel<=Vo.in.DEBUG){const t=e.map(Gy);xa.debug(`Firestore (${bu}): ${n}`,...t)}}function ur(n,...e){if(xa.logLevel<=Vo.in.ERROR){const t=e.map(Gy);xa.error(`Firestore (${bu}): ${n}`,...t)}}function ff(n,...e){if(xa.logLevel<=Vo.in.WARN){const t=e.map(Gy);xa.warn(`Firestore (${bu}): ${n}`,...t)}}function Gy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${bu}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function It(n,e){n||Xe()}function $e(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $D{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}}class HD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xE{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Yr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ae.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Yr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new $D(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new vn(e)}}class ME{constructor(e,t,r){this.type="FirstParty",this.user=vn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class DT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ME(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ps{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new Ps(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function RE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Oi.A=-1;class zy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=RE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function pf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Wy(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Bn(0,0))}static max(){return new yt(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Og(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends gf{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const GD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends gf{construct(e,t,r){return new Nr(e,t,r)}static isValidIdentifier(e){return GD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class Ma{constructor(e){this.fields=e,e.sort(Nr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const mf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(n){if(It(!!n),"string"==typeof n){let e=0;const t=mf.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ra(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function ks(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dd(n){const e=n.mapValue.fields.__previous_value__;return ks(e)?Dd(e):e}function lr(n){const e=Cu(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class Yl{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Fs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fs&&e.projectId===this.projectId&&e.database===this.database}}function Or(n){return null==n}function Ql(n){return 0===n&&1/n==-1/0}function Jl(n){return"number"==typeof n&&Number.isInteger(n)&&!Ql(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Yt.fromString(e))}static fromName(e){return new Fe(Yt.fromString(e).popFirst(5))}static empty(){return new Fe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Yt(e.slice()))}}const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ec={nullValue:"NULL_VALUE"};function Ls(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ks(n)?4:OE(n)?9:10:Xe()}function Ii(n,e){if(n===e)return!0;const t=Ls(n);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lr(n).isEqual(lr(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Cu(r.timestampValue),d=Cu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ra(n.bytesValue).isEqual(Ra(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return zn(r.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return zn(r.integerValue)===zn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=zn(r.doubleValue),d=zn(o.doubleValue);return u===d?Ql(u)===Ql(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return pf(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Og(u)!==Og(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ii(u[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var o}function $o(n,e){return void 0!==(n.values||[]).find(t=>Ii(t,e))}function os(n,e){if(n===e)return 0;const t=Ls(n),r=Ls(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=zn(o.integerValue||o.doubleValue),m=zn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return tc(n.timestampValue,e.timestampValue);case 4:return tc(lr(n),lr(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ra(o),m=Ra(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Mt(d[w],m[w]);if(0!==C)return C}return Mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Mt(zn(o.latitude),zn(u.latitude));return 0!==d?d:Mt(zn(o.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=os(d[w],m[w]);if(C)return C}return Mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const N=Mt(m[M],C[M]);if(0!==N)return N;const G=os(d[m[M]],w[C[M]]);if(0!==G)return G}return Mt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function tc(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Cu(n),r=Cu(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function nc(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Cu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ra(n.bytesValue).toBase64():"referenceValue"in n?Fe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Pg(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Pg(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function Tu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function bd(n){return!!n&&"arrayValue"in n}function Zy(n){return!!n&&"nullValue"in n}function Ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function Cd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PE(n){return"nullValue"in n?ec:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tu(Fs.empty(),Fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function qD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tu(Fs.empty(),Fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xl:Xe()}function Yy(n,e){return void 0===n?e:void 0===e||os(n,e)>0?n:e}function Qy(n,e){return void 0===n?e:void 0===e||os(n,e)<0?n:e}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cd(t)}setAll(e){let t=Nr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Cd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];yf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Kl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ci(Cd(this.value))}}function kE(n){const e=[];return Kl(n.fields,(t,r)=>{const o=new Nr([t]);if(yf(r)){const u=kE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ma(e)}class In{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new In(e,0,yt.min(),yt.min(),ci.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,yt.min(),ci.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,yt.min(),ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Lg(n){return n.fields.find(e=>2===e.kind)}function rc(n){return n.fields.filter(e=>2!==e.kind)}Fg.UNKNOWN_ID=-1;class Vg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ug{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ug(0,ho.min())}}function FE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=yt.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new ho(o,Fe.empty(),e)}function Jy(n){return new ho(n.readTime,n.key,-1)}class ho{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ho(yt.min(),Fe.empty(),-1)}static max(){return new ho(yt.max(),Fe.empty(),-1)}}function zD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fe.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class CT{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function WD(n,e=null,t=[],r=[],o=null,u=null,d=null){return new CT(n,e,t,r,o,u,d)}function Td(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+nc(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Or(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nc(r)).join(",")),e.P=t}return e.P}function Ad(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!jE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ii(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!e_(n.startAt,e.startAt)&&e_(n.endAt,e.endAt)}function Xy(n){return Fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Bg(n,e){return n.filters.filter(t=>t instanceof Pr&&t.field.isEqual(e))}function ic(n,e,t){let r,o=!0;for(const u of Bg(n,e)){let d,m=!0;switch(u.op){case"<":case"<=":d=PE(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=ec}Yy(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Yy(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function LE(n,e,t){let r,o=!0;for(const u of Bg(n,e)){let d,m=!0;switch(u.op){case">=":case">":d=qD(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Xl}Qy(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Qy(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Pr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new KD(e,t,r):"array-contains"===t?new BE(e,r):"in"===t?new YD(e,r):"not-in"===t?new QD(e,r):"array-contains-any"===t?new JD(e,r):new Pr(e,t,r)}static V(e,t,r){return"in"===t?new VE(e,r):new jg(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(os(t,this.value)):null!==t&&Ls(this.value)===Ls(t)&&this.v(os(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class KD extends Pr{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.v(t)}}class VE extends Pr{constructor(e,t){super(e,"in",t),this.keys=UE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jg extends Pr{constructor(e,t){super(e,"not-in",t),this.keys=UE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class BE extends Pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bd(t)&&$o(t.arrayValue,this.value)}}class YD extends Pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$o(this.value.arrayValue,t)}}class QD extends Pr{constructor(e,t){super(e,"not-in",t)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$o(this.value.arrayValue,t)}}class JD extends Pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}}class Au{constructor(e,t){this.position=e,this.inclusive=t}}class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function jE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $E(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Fe.comparator(Fe.fromName(d.referenceValue),t.key):os(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function e_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}class Ho{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function $g(n,e,t,r,o,u,d,m){return new Ho(n,e,t,r,o,u,d,m)}function _f(n){return new Ho(n)}function xd(n){return!Or(n.limit)&&"F"===n.limitType}function Hg(n){return!Or(n.limit)&&"L"===n.limitType}function HE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sc(n){for(const e of n.filters)if(e.S())return e.field;return null}function Gg(n){return null!==n.collectionGroup}function Su(n){const e=$e(n);if(null===e.D){e.D=[];const t=sc(e),r=HE(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Sd(t)),e.D.push(new Sd(Nr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Sd(Nr.keyField(),u))}}}return e.D}function Pi(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=WD(e.path,e.collectionGroup,Su(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Su(e))t.push(new Sd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Au(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Au(e.startAt.position,!e.startAt.inclusive):null;e.C=WD(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function GE(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xu(n,e){return Ad(Pi(n),Pi(e))&&n.limitType===e.limitType}function vf(n){return`${Td(Pi(n))}|lt:${n.limitType}`}function Ef(n){return`Query(target=${function ZD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${nc(r.value)}`;var r}).join(", ")}]`),Or(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>nc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>nc(t)).join(",")),`Target(${e})`}(Pi(n))}; limitType=${n.limitType})`}function qE(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Fe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=$E(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Su(t),r)||t.endAt&&!function(o,u,d){const m=$E(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Su(t),r)));var t,r}function zE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qg(n){return(e,t)=>{let r=!1;for(const o of Su(n)){const u=t_(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function t_(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?os(m,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function n_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function r_(n){return{integerValue:""+n}}function zg(n,e){return Jl(e)?r_(e):n_(n,e)}class wf{constructor(){this._=void 0}}function WE(n,e,t){return n instanceof Md?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Mu?o_(n,e):n instanceof Na?a_(n,e):function(r,o){const u=s_(r,o),d=ZE(u)+ZE(r.k);return kg(u)&&kg(r.k)?r_(d):n_(r.M,d)}(n,e)}function i_(n,e,t){return n instanceof Mu?o_(n,e):n instanceof Na?a_(n,e):t}function s_(n,e){return n instanceof Rd?kg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Md extends wf{}class Mu extends wf{constructor(e){super(),this.elements=e}}function o_(n,e){const t=KE(e);for(const r of n.elements)t.some(o=>Ii(o,r))||t.push(r);return{arrayValue:{values:t}}}class Na extends wf{constructor(e){super(),this.elements=e}}function a_(n,e){let t=KE(e);for(const r of n.elements)t=t.filter(o=>!Ii(o,r));return{arrayValue:{values:t}}}class Rd extends wf{constructor(e,t){super(),this.M=e,this.k=t}}function ZE(n){return zn(n.integerValue||n.doubleValue)}function KE(n){return bd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nd{constructor(e,t){this.field=e,this.transform=t}}class YE{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function If(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Df{}function QE(n,e,t){n instanceof bf?function(r,o,u){const d=r.value.clone(),m=XE(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!If(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=XE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(l_(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zg(n,e,t){var o;n instanceof bf?function(r,o,u){if(!If(r.precondition,o))return;const d=r.value.clone(),m=cr(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(XD(o),d).setHasLocalMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!If(r.precondition,o))return;const d=cr(r.fieldTransforms,u,o),m=o.data;m.setAll(l_(r)),m.setAll(d),o.convertToFoundDocument(XD(o),m).setHasLocalMutations()}(n,e,t):If(n.precondition,o=e)&&o.convertToNoDocument(yt.min())}function JE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=s_(r.transform,o||null);null!=u&&(null==t&&(t=ci.empty()),t.set(r.field,u))}return t||null}function u_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pf(t,r,(o,u)=>function Wg(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mu&&r instanceof Mu||t instanceof Na&&r instanceof Na?pf(t.elements,r.elements,Ii):t instanceof Rd&&r instanceof Rd?Ii(t.k,r.k):t instanceof Md&&r instanceof Md);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function XD(n){return n.isFoundDocument()?n.version:yt.min()}class bf extends Df{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class oc extends Df{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function l_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function XE(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,i_(d,m,t[o]))}return r}function cr(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,WE(u,d,e))}return r}class Od extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class c_ extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class eb{constructor(e){this.count=e}}var Xn,Qt;function d_(n){switch(n){default:return Xe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function h_(n){if(void 0===n)return ur("GRPC error has no .code"),le.UNKNOWN;switch(n){case Xn.OK:return le.OK;case Xn.CANCELLED:return le.CANCELLED;case Xn.UNKNOWN:return le.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return le.INTERNAL;case Xn.UNAVAILABLE:return le.UNAVAILABLE;case Xn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Xn.NOT_FOUND:return le.NOT_FOUND;case Xn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Xn.ABORTED:return le.ABORTED;case Xn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Xn.DATA_LOSS:return le.DATA_LOSS;default:return Xe()}}(Qt=Xn||(Xn={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}class er{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kg(this.root,e,this.comparator,!0)}}class Kg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:kr.RED,this.left=null!=o?o:kr.EMPTY,this.right=null!=u?u:kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new kr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return kr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1,kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new f_(this.data.getIterator())}getIteratorFrom(e){return new f_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class f_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cf(n){return n.hasNext()?n.getNext():void 0}const ew=new er(Fe.comparator);function ki(){return ew}const Go=new er(Fe.comparator);function p_(){return Go}function Tf(){return new as(n=>n.toString(),(n,e)=>n.isEqual(e))}const qo=new er(Fe.comparator),fo=new An(Fe.comparator);function Pt(...n){let e=fo;for(const t of n)e=e.add(t);return e}const tw=new An(Mt);function Af(){return tw}class Sf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,xf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sf(yt.min(),r,Af(),ki(),Pt())}}class xf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xf(Ir.EMPTY_BYTE_STRING,t,Pt(),Pt(),Pt())}}class Yg{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class nw{constructor(e,t){this.targetId=e,this.$=t}}class Qg{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Pd{constructor(){this.B=0,this.L=rw(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Pt(),t=Pt(),r=Pt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new xf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=rw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class tb{constructor(e){this.nt=e,this.st=new Map,this.it=ki(),this.rt=g_(),this.ot=new An(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Xy(u))if(0===r){const d=new Fe(u.path);this.ct(t,d,In.newNoDocument(d,yt.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Xy(m.target)){const w=new Fe(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,In.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Pt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Sf(e,t,this.ot,this.it,r);return this.it=ki(),this.rt=g_(),this.ot=new An(Mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Pd,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new An(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Pd),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function g_(){return new er(Fe.comparator)}function rw(){return new er(Fe.comparator)}const iw={asc:"ASCENDING",desc:"DESCENDING"},sw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jg{constructor(e,t){this.databaseId=e,this.N=t}}function Mf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m_(n,e){return n.N?e.toBase64():e.toUint8Array()}function ow(n,e){return Mf(n,e.toTimestamp())}function dr(n){return It(!!n),yt.fromTimestamp(function(e){const t=Cu(e);return new Bn(t.seconds,t.nanos)}(n))}function Rf(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function y_(n){const e=Yt.fromString(n);return It(I_(e)),e}function kd(n,e){return Rf(n.databaseId,e.path)}function po(n,e){const t=y_(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(v_(t))}function Xg(n,e){return Rf(n.databaseId,e)}function __(n){const e=y_(n);return 4===e.length?Yt.emptyPath():v_(e)}function Fd(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v_(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function E_(n,e,t){return{name:kd(n,e),fields:t.value.mapValue.fields}}function aw(n,e,t){const r=po(n,e.name),o=dr(e.updateTime),u=new ci({mapValue:{fields:e.fields}}),d=In.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Nf(n,e){let t;if(e instanceof bf)t={update:E_(n,e.key,e.value)};else if(e instanceof Od)t={delete:kd(n,e.key)};else if(e instanceof oc)t={update:E_(n,e.key,e.data),updateMask:cb(e.fieldMask)};else{if(!(e instanceof c_))return Xe();t={verify:kd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Md)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Mu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Na)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:ow(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function w_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Jn.updateTime(dr(o.updateTime)):void 0!==o.exists?Jn.exists(o.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),m=new Md):"appendMissingElements"in d?m=new Mu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Na(d.removeAllFromArray.values||[]):"increment"in d?m=new Rd(u,d.increment):Xe();const w=Nr.fromServerFormat(d.fieldPath);return new Nd(w,m)}(n,o)):[];var o;if(e.update){const o=po(n,e.update.name),u=new ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ma((e.updateMask.fieldPaths||[]).map(C=>Nr.fromServerFormat(C)));return new oc(o,u,d,t,r)}return new bf(o,u,t,r)}if(e.delete){const o=po(n,e.delete);return new Od(o,t)}if(e.verify){const o=po(n,e.verify);return new c_(o,t)}return Xe()}function uw(n,e){return{documents:[Xg(n,e.path)]}}function lw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Xg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(M=>function(N){if("=="===N.op){if(Ky(N.value))return{unaryFilter:{field:Ld(N.field),op:"IS_NAN"}};if(Zy(N.value))return{unaryFilter:{field:Ld(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Ky(N.value))return{unaryFilter:{field:Ld(N.field),op:"IS_NOT_NAN"}};if(Zy(N.value))return{unaryFilter:{field:Ld(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ld(N.field),op:ab(N.op),value:N.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Ld((M=C).field),direction:ob(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Or(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function cw(n){let e=__(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=dw(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Sd(Vd((N=M).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(M){let N;return N="object"==typeof M?M.value:M,Or(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new Au((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Au(M.values||[],!M.before)}(t.endAt)),$g(e,o,d,u,m,"F",w,C)}function dw(n){return n?void 0!==n.unaryFilter?[lb(n)]:void 0!==n.fieldFilter?[ub(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dw(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function ob(n){return iw[n]}function ab(n){return sw[n]}function Ld(n){return{fieldPath:n.canonicalString()}}function Vd(n){return Nr.fromServerFormat(n.fieldPath)}function ub(n){return Pr.create(Vd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function lb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vd(n.unaryFilter.field);return Pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vd(n.unaryFilter.field);return Pr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vd(n.unaryFilter.field);return Pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vd(n.unaryFilter.field);return Pr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function cb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D_(e)),e=hw(n.get(t),e);return D_(e)}function hw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function D_(n){return n+"\x01\x01"}function go(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Xe()}u=d+2}return new Yt(r)}const b_=["userId","batchId"];function Of(n,e){return[n,di(e)]}function C_(n,e,t){return[n,di(e),t]}const fw={},pw=["prefixPath","collectionGroup","readTime","documentId"],gw=["prefixPath","collectionGroup","documentId"],ac=["collectionGroup","readTime","prefixPath","documentId"],db=["canonicalId","targetId"],hb=["targetId","path"],Ud=["path","targetId"],TT=["collectionId","parent"],T_=["indexId","uid"],AT=["uid","sequenceNumber"],mw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yw=["indexId","uid","orderedDocumentKey"],ST=["userId","collectionPath","documentId"],pt=["userId","collectionPath","largestBatchId"],fb=["userId","collectionGroup","largestBatchId"],_w=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pb=[..._w,"documentOverlays"],Pf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gb=[...Pf,"indexConfiguration","indexState","indexEntries"],kf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ff{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(o=>o?X.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class A_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Lf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=x_(r.target.error);this.At.reject(new Lf(e,o))}}static open(e,t,r,o){try{return new A_(t,e.transaction(o,r))}catch(u){throw new Lf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vw(t)}}class Vs{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Vs.Vt((0,wt.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Nu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,wt.hl)())return!1;if(Vs.St())return!0;const e=(0,wt.z$)(),t=Vs.Vt(e),r=0<t&&t<10,o=Vs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ae.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Lf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Ae(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Lf(e,m))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ae.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=A_.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(M=>(w.Pt(),M)).catch(M=>(w.abort(M),X.reject(M))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Nu(this.Ft.delete())}}class Lf extends Ae{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ru(n){return"IndexedDbTransactionError"===n.name}class vw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nu(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Nu(this.store.add(e))}get(e){return Nu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Nu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Nu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new X((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new X((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new X((r,o)=>{t.onerror=u=>{const d=x_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new X((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new mb(m),C=t(m.primaryKey,m.value,w);if(C instanceof X){const M=C.catch(N=>(w.done(),X.reject(N)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>X.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nu(n){return new X((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=x_(r.target.error);t(o)}})}let S_=!1;function x_(n){const e=Vs.Vt((0,wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S_||(S_=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ew extends Ff{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=$e(n);return Vs.xt(t.Ht,e)}class uc{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&QE(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&pf(this.mutations,e.mutations,(t,r)=>u_(t,r))&&pf(this.baseMutations,e.baseMutations,(t,r)=>u_(t,r))}}class M_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=qo;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new M_(e,t,r,o)}}class R_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ou{constructor(e,t,r,o,u=yt.min(),d=yt.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vf{constructor(e){this.Jt=e}}function N_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:kd(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Mf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lc(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:lc(e.version)}}var o,u;return r}function Uf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mo(n){const e=new Bn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function zo(n,e){const t=(e.baseMutations||[]).map(u=>w_(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>w_(n.Jt,u)),o=Bn.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,o,t,r)}function Bf(n){const e=mo(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mo(n.lastLimboFreeSnapshotVersion):yt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=Pi(_f(__(o.documents[0])))):r=Pi(cw(n.query)),new Ou(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function Iw(n,e){const t=lc(e.snapshotVersion),r=lc(e.lastLimboFreeSnapshotVersion);let o;o=Xy(e.target)?uw(n.Jt,e.target):lw(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Td(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function O_(n){const e=cw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?GE(e,e.limit,"L"):e}function em(n,e){return new R_(e.largestBatchId,w_(n.Jt,e.overlayMutation))}function P_(n,e){const t=e.path.lastSegment();return[n,di(e.path.popLast()),t]}class Dw{getBundleMetadata(e,t){return bw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:mo(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return bw(e).put({bundleId:(r=t).id,createTime:lc(dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return k_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:O_(o.bundledQuery),readTime:mo(o.readTime)};var o})}saveNamedQuery(e,t){return k_(e).put({name:(r=t).name,readTime:lc(dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function bw(n){return Fr(n,"bundles")}function k_(n){return Fr(n,"namedQueries")}class F_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new F_(e,t.uid||"")}getOverlay(e,t){return jf(e).get(P_(this.userId,t)).next(r=>r?em(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new R_(t,d);o.push(this.Xt(e,m))}),X.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(di(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(jf(e).Qt("collectionPathOverlayIndex",m))}),X.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Tf(),u=di(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return jf(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=em(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Tf();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jf(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,M)=>{const N=em(this.M,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return jf(e).put(function(r,o,u){const[d,m,w]=P_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Nf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function jf(n){return Fr(n,"documentOverlays")}class Bd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ql(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ra(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?OE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Fe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function xT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yb(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=xT(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Bd.fe=new Bd;class MT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=yb(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=yb(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Cw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class tm{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class $f{constructor(){this.De=new MT,this.Ce=new Cw(this.De),this.xe=new tm(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Pu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pu(this.indexId,this.documentKey,this.arrayValue,r)}}function ku(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jd(n.arrayValue,e.arrayValue),0!==t?t:(t=jd(n.directionalValue,e.directionalValue),0!==t?t:Fe.comparator(n.documentKey,e.documentKey)))}function jd(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _b{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Lg(e);if(void 0!==t&&!this.Be(t))return!1;const r=rc(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class vb{constructor(){this.qe=new L_}addToCollectionParentIndex(e,t){return this.qe.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getFieldIndex(e,t){return X.resolve(null)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class L_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new An(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new An(Yt.comparator)).toArray()}}const $d=new Uint8Array(0);class Eb{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new L_,this.Ge=new as(r=>Td(r),(r,o)=>Ad(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:di(o)};return V_(e).put(u)}return X.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Wy(t),""],!1,!0);return V_(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(go(d.parent))}return r})}addFieldIndex(e,t){const r=nm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=nm(e),o=Oa(e),u=Hf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Hf(e);let o=!0;const u=new Map;return X.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Pt();const m=[];return X.forEach(u,(w,C)=>{var M;Ne("IndexedDbIndexManager",`Using index ${M=w,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Wt=>`${Wt.fieldPath}:${Wt.kind}`).join(",")}`} to execute ${Td(t)}`);const N=function(Wt,Nt){const qt=Lg(Nt);if(void 0===qt)return null;for(const hn of Bg(Wt,qt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(C,w),G=function(Wt,Nt){const qt=new Map;for(const hn of rc(Nt))for(const Li of Bg(Wt,hn.fieldPath))switch(Li.op){case"==":case"in":qt.set(hn.fieldPath.canonicalString(),Li.value);break;case"not-in":case"!=":return qt.set(hn.fieldPath.canonicalString(),Li.value),Array.from(qt.values())}return null}(C,w),Q=function(Wt,Nt){const qt=[];let hn=!0;for(const Li of rc(Nt)){const vp=0===Li.kind?ic(Wt,Li.fieldPath,Wt.startAt):LE(Wt,Li.fieldPath,Wt.startAt);if(!vp.value)return null;qt.push(vp.value),hn&&(hn=vp.inclusive)}return new Au(qt,hn)}(C,w),he=function(Wt,Nt){const qt=[];let hn=!0;for(const Li of rc(Nt)){const vp=0===Li.kind?LE(Wt,Li.fieldPath,Wt.endAt):ic(Wt,Li.fieldPath,Wt.endAt);if(!vp.value)return null;qt.push(vp.value),hn&&(hn=vp.inclusive)}return new Au(qt,hn)}(C,w),ke=this.je(w,C,Q),tt=this.je(w,C,he),Ht=this.We(w,C,G),Gt=this.ze(w.indexId,N,ke,!!Q&&Q.inclusive,tt,!!he&&he.inclusive,Ht);return X.forEach(Gt,Wt=>r.Gt(Wt,t.limit).next(Nt=>{Nt.forEach(qt=>{const hn=Fe.fromSegments(qt.documentKey);d.has(hn)||(d=d.add(hn),m.push(hn))})}))}).next(()=>m)}return X.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const G=t?this.He(t[N/C]):$d,Q=r?this.Je(e,G,r[N%C],o):this.Ye(e),he=u?this.Xe(e,G,u[N%C],d):this.Ye(e+1);M.push(...this.createRange(Q,he,m.map(ke=>this.Je(e,G,ke,!0))))}return M}Je(e,t,r,o){const u=new Pu(e,Fe.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Pu(e,Fe.empty(),t,r);return o?u.ke():u}Ye(e){return new Pu(e,Fe.empty(),$d,$d)}getFieldIndex(e,t){const r=new _b(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new $f;for(const o of rc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Bd.fe.Zt(u,d)}return r.Se()}He(e){const t=new $f;return Bd.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new $f;return Bd.fe.Zt(Tu(this.databaseId,t),r.Ne(function(o){const u=rc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new $f);let u=0;for(const d of rc(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&bd(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);Bd.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new $f;w.seed(m.Se()),Bd.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Pr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=nm(e),o=Oa(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return X.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,M){const N=M?new Ug(M.sequenceNumber,new ho(mo(M.readTime),new Fe(go(M.documentKey)),M.largestBatchId)):Ug.empty(),G=C.fields.map(([Q,he])=>new Vg(Nr.fromServerFormat(Q),he));return new Fg(C.indexId,C.collectionGroup,G,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=nm(e),u=Oa(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>X.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:lc((G=r).readTime),documentKey:di(G.documentKey.path),largestBatchId:G.largestBatchId});var G})))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?X.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),X.forEach(m,w=>this.on(e,o,w).next(C=>{const M=this.un(u,w);return C.isEqual(M)?X.resolve():this.an(e,u,w,C,M)}))))})}cn(e,t,r,o){return Hf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Hf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Hf(e);let u=new An(ku);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Pu(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new An(ku);const o=this.Ze(t,e);if(null==o)return r;const u=Lg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(bd(d))for(const m of d.arrayValue.values||[])r=r.add(new Pu(t.indexId,e.key,this.He(m),o))}else r=r.add(new Pu(t.indexId,e.key,$d,o));return r}an(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,M,N){const G=m.getIterator(),Q=w.getIterator();let he=Cf(G),ke=Cf(Q);for(;he||ke;){let tt=!1,Ht=!1;if(he&&ke){const Gt=C(he,ke);Gt<0?Ht=!0:Gt>0&&(tt=!0)}else null!=he?Ht=!0:tt=!0;tt?(M(ke),ke=Cf(Q)):Ht?(N(he),he=Cf(G)):(he=Cf(G),ke=Cf(Q))}}(o,u,ku,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),X.waitFor(d)}rn(e){let t=1;return Oa(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>ku(d,m)).filter((d,m,w)=>!m||0!==ku(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=ku(d,e),w=ku(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,$d,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,$d,[]]));return u}}function V_(n){return Fr(n,"collectionParents")}function Hf(n){return Fr(n,"indexEntries")}function nm(n){return Fr(n,"indexConfiguration")}function Oa(n){return Fr(n,"indexState")}const Tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Di{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Aw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(M,N,G)=>(m++,G.delete()));u.push(w.next(()=>{It(1===m)}));const C=[];for(const M of t.mutations){const N=C_(e,M.key.path,t.batchId);u.push(o.delete(N)),C.push(M.key)}return X.waitFor(u).next(()=>C)}function Gf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(41943040,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class U_{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new U_(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Lu(e),d=Fu(e);return d.add({}).next(m=>{It("number"==typeof m);const w=new uc(m,t,r,o),C=function(G,Q,he){const ke=he.baseMutations.map(Ht=>Nf(G.Jt,Ht)),tt=he.mutations.map(Ht=>Nf(G.Jt,Ht));return{userId:Q,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:ke,mutations:tt}}(this.M,this.userId,w),M=[];let N=new An((G,Q)=>Mt(G.canonicalString(),Q.canonicalString()));for(const G of o){const Q=C_(this.userId,G.key.path,m);N=N.add(G.key.path.popLast()),M.push(d.put(C)),M.push(u.put(Q,fw))}return N.forEach(G=>{M.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),X.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(r=>r?(It(r.userId===this.userId),zo(this.M,r)):null)}fn(e,t){return this.ln[t]?X.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Fu(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=zo(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).qt("userMutationsIndex",t).next(r=>r.map(o=>zo(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Of(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Lu(e).Wt({range:o},(d,m,w)=>{const[C,M,N]=d,G=go(M);if(C===this.userId&&t.path.isEqual(G))return Fu(e).get(N).next(Q=>{if(!Q)throw Xe();It(Q.userId===this.userId),u.push(zo(this.M,Q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Mt);const o=[];return t.forEach(u=>{const d=Of(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Lu(e).Wt({range:m},(C,M,N)=>{const[G,Q,he]=C,ke=go(Q);G===this.userId&&u.path.isEqual(ke)?r=r.add(he):N.done()});o.push(w)}),X.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Of(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new An(Mt);return Lu(e).Wt({range:d},(w,C,M)=>{const[N,G,Q]=w,he=go(G);N===this.userId&&r.isPrefixOf(he)?he.length===o&&(m=m.add(Q)):M.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Fu(e).get(u).next(d=>{if(null===d)throw Xe();It(d.userId===this.userId),r.push(zo(this.M,d))}))}),X.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Aw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),X.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Lu(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=go(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return B_(e,this.userId,t)}wn(e){return Sw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function B_(n,e,t){const r=Of(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Lu(n).Wt({range:u,jt:!0},(m,w,C)=>{const[M,N,G]=m;M===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Fu(n){return Fr(n,"mutations")}function Lu(n){return Fr(n,"documentMutations")}function Sw(n){return Fr(n,"mutationQueues")}class Vu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Vu(0)}static yn(){return new Vu(-1)}}class xw{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Vu(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hd(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Hd(e).Wt((d,m)=>{const w=Bf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>X.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Hd(e).Wt((r,o)=>{const u=Bf(o);t(u)})}pn(e){return Mw(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return Mw(e).put("targetGlobalKey",t)}Tn(e,t){return Hd(e).put(Iw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Td(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Hd(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Bf(m);Ad(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Uu(e);return t.forEach(d=>{const m=di(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),X.waitFor(o)}removeMatchingKeys(e,t,r){const o=Uu(e);return X.forEach(t,u=>{const d=di(u.path);return X.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Uu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Uu(e);let u=Pt();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=go(d[1]),M=new Fe(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=di(t.path),o=IDBKeyRange.bound([r],[Wy(r)],!1,!0);let u=0;return Uu(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Hd(e).get(t).next(r=>r?Bf(r):null)}}function Hd(n){return Fr(n,"targets")}function Mw(n){return Fr(n,"targetGlobal")}function Uu(n){return Fr(n,"targetDocuments")}function Pa(n){return j_.apply(this,arguments)}function j_(){return j_=(0,ae.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==kf)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),j_.apply(this,arguments)}function $_([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class wb{constructor(e){this.An=e,this.buffer=new An($_),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ib{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ae.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Ru(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Pa(o)}yield t.Sn(e)}))}}class Db{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return X.resolve(Oi.A);const r=new wb(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Tw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tw):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Ng()<=Vo.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class bb{constructor(e,t){this.db=e,this.garbageCollector=new Db(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return rm(e,r)}removeReference(e,t,r){return rm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rm(e,t)}On(e,t){return function(r,o){let u=!1;return Sw(r).zt(d=>B_(r,d,o).next(m=>(m&&(u=!0),X.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,yt.min()),Uu(e).delete([0,di(d.path)])))});o.push(w)}}).next(()=>X.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rm(e,t)}Mn(e,t){const r=Uu(e);let o,u=Oi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Oi.A&&t(new Fe(go(o)),u),u=C,o=w):u=Oi.A}).next(()=>{u!==Oi.A&&t(new Fe(go(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rm(n,e){return Uu(n).put((r=n.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:r}));var r}class Rw{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bu(e).put(r)}removeEntry(e,t,r){return Bu(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Uf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=In.newInvalidDocument(t);return Bu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:In.newInvalidDocument(t)};return Bu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(o,u)=>{r={document:this.$n(t,u),size:Gf(u)}}).next(()=>r)}getEntries(e,t){let r=ki();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=ki(),o=new er(Fe.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,Gf(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return X.resolve();let o=new An(G_);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(qf(o.first()),qf(o.last())),d=o.getIterator();let m=d.getNext();return Bu(e).Wt({index:"documentKeyIndex",range:u},(w,C,M)=>{const N=Fe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&G_(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?M.Ut(qf(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bu(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ki();for(const w of d){const C=this.$n(Fe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ki();const d=Nw(t,r),m=Nw(t,ho.max());return Bu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,M)=>{const N=this.$n(Fe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new Tb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return H_(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return H_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function ww(n,e){let t;if(e.document)t=aw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Fe.fromSegments(e.noDocument.path),o=mo(e.noDocument.readTime);t=In.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Fe.fromSegments(e.unknownDocument.path),o=mo(e.unknownDocument.version);t=In.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Bn(r[0],r[1]);return yt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return In.newInvalidDocument(e)}}class Tb extends Rw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new as(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new An((u,d)=>Mt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=N_(this.Kn.M,d);o=o.add(u.path.popLast()),r+=Gf(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=N_(this.Kn.M,d.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function H_(n){return Fr(n,"remoteDocumentGlobal")}function Bu(n){return Fr(n,"remoteDocumentsV14")}function qf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nw(n,e){const t=e.documentKey.path.toArray();return[n,Uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G_(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class Ab{constructor(e){this.M=e}kt(e,t,r,o){const u=new A_("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0}),m.createObjectStore("documentMutations"),Ow(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=X.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ow(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0});const M=w.store("mutations"),N=C.map(G=>M.put(G));return X.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:ST});w.createIndex("collectionPathOverlayIndex",pt,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",fb,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:pw});w.createIndex("documentKeyIndex",gw),w.createIndex("collectionGroupIndex",ac)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:T_}).createIndex("sequenceNumberIndex",AT,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:mw}).createIndex("documentKeyIndex",yw,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Gf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>X.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>X.forEach(m,w=>{It(w.userId===u.userId);const C=zo(this.M,w);return Aw(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Yt(d),C=[0,di(w)];u.push(t.get(C).next(M=>M?X.resolve():t.put({targetId:0,path:di(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>X.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:TT});const r=t.store("collectionParents"),o=new L_,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:di(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Yt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const M=go(m);return u(M.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Bf(o),d=Iw(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Fe(Yt.fromString(C.document.name).popFirst(5)):C.noDocument?Fe.fromSegments(C.noDocument.path):C.unknownDocument?Fe.fromSegments(C.unknownDocument.path):Xe()).path.toArray();var C;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(M))}).next(()=>X.waitFor(o))}}function Ow(n){n.createObjectStore("targetDocuments",{keyPath:hb}).createIndex("documentTargetsIndex",Ud,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",db,{unique:!0}),n.createObjectStore("targetGlobal")}const q_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zf{constructor(e,t,r,o,u,d,m,w,C,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=M,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=G=>Promise.resolve(),!zf.vt())throw new Ae(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bb(this,o),this.hs=t+"main",this.M=new Vf(w),this.ls=new Vs(this.hs,this.ts,new Ab(this.M)),this.fs=new xw(this.referenceDelegate,this.M),this.ds=new Cb(this.M),this._s=new Dw,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===M&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,q_);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Oi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Ru(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return cc(e).get("owner").next(t=>X.resolve(this.bs(t)))}Vs(e){return Wf(e).delete(this.clientId)}vs(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Fr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return X.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?X.resolve(!0):cc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,q_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wf(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ew(t,Oi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Wf(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return U_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Eb(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return F_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?gb:13===d?Pf:12===d?pb:11===d?_w:void Xe();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new Ew(w,this.es?this.es.next():Oi.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ae(le.FAILED_PRECONDITION,kf);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return cc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(le.FAILED_PRECONDITION,q_)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cc(e).put("owner",t)}static vt(){return Vs.vt()}Rs(e){const t=cc(e);return t.get("owner").next(r=>this.bs(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):X.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cc(n){return Fr(n,"owner")}function Wf(n){return Fr(n,"clientMetadata")}function Zf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Sb{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Fe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Gg(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Fe(t)).next(r=>{let o=p_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=p_();return this.indexManager.getCollectionParents(e,o).next(d=>X.forEach(d,m=>{const w=(C=t,M=m.child(o),new Ho(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.zs(e,w,r).next(C=>{C.forEach((M,N)=>{u=u.insert(M,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=In.newInvalidDocument(w),o=o.insert(w,C)),Zg(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{qE(t,d)||(o=o.remove(u))}),o))}}class z_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Pt(),o=Pt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new z_(e,t.fromCache,r,o)}}class im{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(yt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const d=this.ei(t,u);return(xd(t)||Hg(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(Ng()<=Vo.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ef(t)),this.Zs.Qs(e,t,FE(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ei(e,t){let r=new An(qg(e));return t.forEach((o,u)=>{qE(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return Ng()<=Vo.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Ef(t)),this.Zs.Qs(e,t,ho.min())}}class xb{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new er(Mt),this.ri=new as(u=>Td(u),Ad),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Sb(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function W_(n,e,t,r){return new xb(n,e,t,r)}function Pw(n,e){return sm.apply(this,arguments)}function sm(){return sm=(0,ae.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Pt();for(const C of o){d.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of u){m.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:d,addedBatchIds:m}))})})}),sm.apply(this,arguments)}function Mb(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const M=w.batch,N=M.keys();let G=X.resolve();return N.forEach(Q=>{G=G.next(()=>C.getEntry(m,Q)).next(he=>{const ke=w.docVersions.get(Q);It(null!==ke),he.version.compareTo(ke)<0&&(M.applyToRemoteDocument(he,w),he.isValidDocument()&&(he.setReadTime(w.commitVersion),C.addEntry(he)))})}),G.next(()=>d.Bs.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function Z_(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function RT(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,M)=>{const N=o.get(M);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,M).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,M)));let G=N.withSequenceNumber(u.currentSequenceNumber);var Q,he,ke;e.targetMismatches.has(M)?G=G.withResumeToken(Ir.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):C.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(C.resumeToken,r)),o=o.insert(M,G),he=G,ke=C,(0===(Q=N).resumeToken.approximateByteSize()||he.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,G))});let w=ki();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(kw(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(yt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(M=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return X.waitFor(m).next(()=>d.apply(u)).next(()=>t.ci.Gs(u,w)).next(()=>w)}).then(u=>(t.ii=o,u))}function kw(n,e,t){let r=Pt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=ki();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Ne("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function om(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Gd(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,X.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Ou(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function yo(n,e,t){return dc.apply(this,arguments)}function dc(){return dc=(0,ae.Z)(function*(n,e,t){const r=$e(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ru(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),dc.apply(this,arguments)}function am(n,e,t){const r=$e(n);let o=yt.min(),u=Pt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const M=$e(m),N=M.ri.get(C);return void 0!==N?X.resolve(M.ii.get(N)):M.fs.getTargetData(w,C)}(r,d,Pi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.si.Qs(d,e,t?o:yt.min(),t?u:Pt())).next(m=>(Fw(r,zE(e),m),{documents:m,li:u})))}function Rb(n,e){const t=$e(n),r=$e(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function K_(n,e){const t=$e(n),r=t.oi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,FE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Fw(t,e,o),o))}function Fw(n,e,t){let r=yt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function Y_(){return Y_=(0,ae.Z)(function*(n,e,t,r){const o=$e(n);let u=Pt(),d=ki();for(const C of t){const M=e.fi(C.metadata.name);C.document&&(u=u.add(M));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),d=d.insert(M,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield Gd(o,(C=r,Pi(_f(Yt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>kw(C,m,d).next(M=>(m.apply(C),M)).next(M=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.ci.Gs(C,M)).next(()=>M)))}),Y_.apply(this,arguments)}function Ob(n,e){return um.apply(this,arguments)}function um(){return um=(0,ae.Z)(function*(n,e,t=Pt()){const r=yield Gd(n,Pi(O_(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=dr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),um.apply(this,arguments)}class Lw{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return X.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:dr(r.createTime)}),X.resolve()}getNamedQuery(e,t){return X.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:O_(r.bundledQuery),readTime:dr(r.readTime)}),X.resolve();var r}}class Q_{constructor(){this.overlays=new er(Fe.comparator),this.gi=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const o=Tf(),u=t.length+1,d=new Fe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new er((C,M)=>C-M);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=Tf(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=Tf(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return X.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new R_(t,r));let u=this.gi.get(t);void 0===u&&(u=Pt(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class qd{constructor(){this.yi=new An(Wn.pi),this.Ii=new An(Wn.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Wn(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Wn(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Fe(new Yt([])),r=new Wn(t,e),o=new Wn(t,e+1),u=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),u.push(d.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Fe(new Yt([])),r=new Wn(t,e),o=new Wn(t,e+1);let u=Pt();return this.Ii.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Wn(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wn{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Fe.comparator(e.key,t.key)||Mt(e.vi,t.vi)}static Ti(e,t){return Mt(e.vi,t.vi)||Fe.comparator(e.key,t.key)}}class Pb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new An(Wn.pi)}checkEmpty(e){return X.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const d=new uc(u,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new Wn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return X.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return X.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wn(t,0),o=new Wn(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);u.push(m)}),X.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Mt);return t.forEach(o=>{const u=new Wn(o,0),d=new Wn(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,d],m=>{r=r.add(m.vi)})}),X.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Fe.isDocumentKey(u)||(u=u.child(""));const d=new Wn(new Fe(u),0);let m=new An(Mt);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},d),X.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return X.forEach(t.mutations,o=>{const u=new Wn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Wn(t,0),o=this.Di.firstAfterOrEqual(r);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return X.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Vw{constructor(e){this.Mi=e,this.docs=new er(Fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=ki();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():In.newInvalidDocument(o))}),X.resolve(r)}getAllFromCollection(e,t,r){let o=ki();const u=new Fe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||zD(Jy(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}Oi(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Uw(this)}getSize(e){return X.resolve(this.size)}}class Uw extends Rw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class kb{constructor(e){this.persistence=e,this.Fi=new as(t=>Td(t),Ad),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new qd,this.targetCount=0,this.Li=Vu.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),X.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Vu(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Tn(t),X.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),X.waitFor(u).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),X.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.Bi.containsKey(t))}}class Fb{constructor(e,t){this.Ui={},this.overlays={},this.es=new Oi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new kb(this),this.indexManager=new vb,this.ds=new Vw(r=>this.referenceDelegate.qi(r)),this.M=new Vf(t),this._s=new Lw(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Pb(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new J_(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return X.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class J_ extends Ff{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.ji=new qd,this.Wi=null}static zi(e){return new X_(e)}get Hi(){if(this.Wi)return this.Wi;throw Xe()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),X.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Hi,r=>{const o=Fe.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,yt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return X.or([()=>X.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Lb(n,e){return`firestore_clients_${n}_${e}`}function Bw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ev(n,e){return`firestore_targets_${n}_${e}`}class ka{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ae(o.error.code,o.error.message))),d?new ka(e,t,o.state,u):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new zd(e,r.state,o):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fa{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Af();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Jl(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Fa(e,u):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jw{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jw(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lm{constructor(){this.activeTargetIds=Af()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tv{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new er(Mt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Lb(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new lm),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(Lb(e.persistenceKey,o));if(u){const d=Fa.Yi(o,u);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ev(this.persistenceKey,e));if(r){const o=zd.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ev(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let d=Oi.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),d=m}catch(m){ur("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Oi.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new ka(this.currentUser,e,t,r),u=Bw(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=Bw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=ev(this.persistenceKey,e),u=new zd(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Fa.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return ka.Yi(new vn(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return zd.Yi(o,t)}mr(e){return jw.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Af();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Vb{constructor(){this.$r=new lm,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new lm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $w{Lr(e){}shutdown(){}}class Ub{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class nv{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Bb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const d=this.uo(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,u),this.co(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw ff("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${Hw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const m=new jD;m.listenOnce(VD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Mg.NO_ERROR:const C=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Mg.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case Mg.HTTP_ERROR:const M=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const G=function(Q){const he=Q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(he)>=0?he:le.UNKNOWN}(N.status);d(new Ae(G,N.message))}else d(new Ae(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=TE(),d=wd(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new BD({})),this.ao(m.initMessageHeaders,t,r),(0,wt.uI)()||(0,wt.b$)()||(0,wt.d)()||(0,wt.w1)()||(0,wt.Mn)()||(0,wt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let M=!1,N=!1;const G=new nv({Wr:he=>{N?Ne("Connection","Not sending because WebChannel is closed:",he):(M||(Ne("Connection","Opening WebChannel transport."),C.open(),M=!0),Ne("Connection","WebChannel sending:",he),C.send(he))},zr:()=>C.close()}),Q=(he,ke,tt)=>{he.listen(ke,Ht=>{try{tt(Ht)}catch(Gt){setTimeout(()=>{throw Gt},0)}})};return Q(C,Rg.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),Q(C,Rg.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),G.no())}),Q(C,Rg.EventType.ERROR,he=>{N||(N=!0,ff("Connection","WebChannel transport errored:",he),G.no(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),Q(C,Rg.EventType.MESSAGE,he=>{var ke;if(!N){const tt=he.data[0];It(!!tt);const Ht=tt,Gt=Ht.error||(null===(ke=Ht[0])||void 0===ke?void 0:ke.error);if(Gt){Ne("Connection","WebChannel received error:",Gt);const Wt=Gt.status;let Nt=function(hn){const Li=Xn[hn];if(void 0!==Li)return h_(Li)}(Wt),qt=Gt.message;void 0===Nt&&(Nt=le.INTERNAL,qt="Unknown error status: "+Wt+" with message "+Gt.message),N=!0,G.no(new Ae(Nt,qt)),C.close()}else Ne("Connection","WebChannel received:",tt),G.so(tt)}}),Q(d,UD.STAT_EVENT,he=>{he.stat===Zl.PROXY?Ne("Connection","Detected buffering proxy"):he.stat===Zl.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.eo()},0),G}}function Gw(){return"undefined"!=typeof window?window:null}function cm(){return"undefined"!=typeof document?document:null}function Kf(n){return new Jg(n,!0)}class rv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class qw{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new rv(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ae.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ae.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Ae(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,ae.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jb extends qw{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function rb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(It(void 0===C||"string"==typeof C),Ir.fromBase64String(C||"")):(It(void 0===C||C instanceof Uint8Array),Ir.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?le.UNKNOWN:h_(w.code);return new Ae(C,w.message||"")}(d);t=new Qg(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=po(n,r.document.name),u=dr(r.document.updateTime),d=new ci({mapValue:{fields:r.document.fields}}),m=In.newFoundDocument(o,u,d);t=new Yg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=po(n,r.document),u=r.readTime?dr(r.readTime):yt.min(),d=In.newNoDocument(o,u);t=new Yg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=po(n,r.document);t=new Yg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new eb(r.count||0);t=new nw(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return yt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?dr(u.readTime):yt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Fd(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Xy(m)?{documents:uw(o,m)}:{query:lw(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=m_(o,u.resumeToken):u.snapshotVersion.compareTo(yt.min())>0&&(d.readTime=Mf(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function sb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Fd(this.M),t.removeTarget=e,this.Fo(t)}}class $b extends qw{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function ib(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=dr(r.updateTime?r.updateTime:o);return u.isEqual(yt.min())&&(u=dr(o)),new YE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.Yo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Fd(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nf(this.M,r))};this.Fo(t)}}class Hb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(le.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(le.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class Gb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ur(t),this.iu=!1):Ne("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Yf{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,ae.Z)(function*(){var w;ju(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ae.Z)(function*(C){const M=$e(C);M.fu.add(4),yield hc(M),M.wu.set("Unknown"),M.fu.delete(4),yield Wd(M)}),function(C){return w.apply(this,arguments)})(d))}))}),this.wu=new Gb(r,o)}}function Wd(n){return dm.apply(this,arguments)}function dm(){return dm=(0,ae.Z)(function*(n){if(ju(n))for(const e of n.du)yield e(!0)}),dm.apply(this,arguments)}function hc(n){return hm.apply(this,arguments)}function hm(){return hm=(0,ae.Z)(function*(n){for(const e of n.du)yield e(!1)}),hm.apply(this,arguments)}function Qf(n,e){const t=$e(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),ov(t)?sv(t):Yd(t).xo()&&iv(t,e))}function Jf(n,e){const t=$e(n),r=Yd(t);t.lu.delete(e),r.xo()&&zw(t,e),0===t.lu.size&&(r.xo()?r.Mo():ju(t)&&t.wu.set("Unknown"))}function iv(n,e){n.mu.Z(e.targetId),Yd(n).jo(e)}function zw(n,e){n.mu.Z(e),Yd(n).Wo(e)}function sv(n){n.mu=new tb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Yd(n).start(),n.wu.ru()}function ov(n){return ju(n)&&!Yd(n).Co()&&n.lu.size>0}function ju(n){return 0===$e(n).fu.size}function Ww(n){n.mu=void 0}function Xf(n){return av.apply(this,arguments)}function av(){return av=(0,ae.Z)(function*(n){n.lu.forEach((e,t)=>{iv(n,e)})}),av.apply(this,arguments)}function uv(n,e){return Us.apply(this,arguments)}function Us(){return Us=(0,ae.Z)(function*(n,e){Ww(n),ov(n)?(n.wu.au(e),sv(n)):n.wu.set("Unknown")}),Us.apply(this,arguments)}function qb(n,e,t){return ep.apply(this,arguments)}function ep(){return ep=(0,ae.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Qg&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $u(n,r)}else if(e instanceof Yg?n.mu.ut(e):e instanceof nw?n.mu._t(e):n.mu.ht(e),!t.isEqual(yt.min()))try{const r=yield Z_(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.mu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(Ir.EMPTY_BYTE_STRING,w.snapshotVersion)),zw(o,m);const C=new Ou(w.target,m,1,w.sequenceNumber);iv(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield $u(n,r)}var r}),ep.apply(this,arguments)}function $u(n,e,t){return lv.apply(this,arguments)}function lv(){return lv=(0,ae.Z)(function*(n,e,t){if(!Ru(e))throw e;n.fu.add(1),yield hc(n),n.wu.set("Offline"),t||(t=()=>Z_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Wd(n)}))}),lv.apply(this,arguments)}function Zw(n,e){return e().catch(t=>$u(n,t,e))}function Zd(n){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,ae.Z)(function*(n){const e=$e(n),t=Hu(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;fm(e);)try{const o=yield om(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,zb(e,o)}catch(o){yield $u(e,o)}Kw(e)&&cv(e)}),Kd.apply(this,arguments)}function fm(n){return ju(n)&&n.hu.length<10}function zb(n,e){n.hu.push(e);const t=Hu(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Kw(n){return ju(n)&&!Hu(n).Co()&&n.hu.length>0}function cv(n){Hu(n).start()}function Yw(n){return tp.apply(this,arguments)}function tp(){return tp=(0,ae.Z)(function*(n){Hu(n).Zo()}),tp.apply(this,arguments)}function Qw(n){return dv.apply(this,arguments)}function dv(){return dv=(0,ae.Z)(function*(n){const e=Hu(n);for(const t of n.hu)e.Jo(t.mutations)}),dv.apply(this,arguments)}function Wb(n,e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,ae.Z)(function*(n,e,t){const r=n.hu.shift(),o=M_.from(r,e,t);yield Zw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Zd(n)}),Jw.apply(this,arguments)}function hv(n,e){return np.apply(this,arguments)}function np(){return np=(0,ae.Z)(function*(n,e){var t;e&&Hu(n).Ho&&(yield(t=(0,ae.Z)(function*(r,o){if(d_(u=o.code)&&u!==le.ABORTED){const d=r.hu.shift();Hu(r).ko(),yield Zw(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Zd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Kw(n)&&cv(n)}),np.apply(this,arguments)}function fv(n,e){return rp.apply(this,arguments)}function rp(){return rp=(0,ae.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=ju(t);t.fu.add(3),yield hc(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Wd(t)}),rp.apply(this,arguments)}function ip(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,ae.Z)(function*(n,e){const t=$e(n);e?(t.fu.delete(2),yield Wd(t)):e||(t.fu.add(2),yield hc(t),t.wu.set("Unknown"))}),pv.apply(this,arguments)}function Yd(n){return n.gu||(n.gu=function(e,t,r){const o=$e(e);return o.eu(),new jb(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Xf.bind(null,n),Yr:uv.bind(null,n),Qo:qb.bind(null,n)}),n.du.push(function(){var e=(0,ae.Z)(function*(t){t?(n.gu.ko(),ov(n)?sv(n):n.wu.set("Unknown")):(yield n.gu.stop(),Ww(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Hu(n){return n.yu||(n.yu=function(e,t,r){const o=$e(e);return o.eu(),new $b(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Yw.bind(null,n),Yr:hv.bind(null,n),Xo:Qw.bind(null,n),Yo:Wb.bind(null,n)}),n.du.push(function(){var e=(0,ae.Z)(function*(t){t?(n.yu.ko(),yield Zd(n)):(yield n.yu.stop(),n.hu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class gv{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new gv(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Ru(n))return new Ae(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Gu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=p_(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Gu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mv{constructor(){this.pu=new er(Fe.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Xe():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qd{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Qd(e,t,Gu.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Xw{constructor(){this.Tu=void 0,this.listeners=[]}}class eI{constructor(){this.queries=new as(e=>vf(e),xu),this.onlineState="Unknown",this.Eu=new Set}}function yv(n,e){return pm.apply(this,arguments)}function pm(){return pm=(0,ae.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Xw),o)try{u.Tu=yield t.onListen(r)}catch(d){const m=fc(d,`Initialization of query '${Ef(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&Qr(t)}),pm.apply(this,arguments)}function gm(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,ae.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),_v.apply(this,arguments)}function tI(n,e){const t=$e(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&Qr(t)}function Zb(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Qr(n){n.Eu.forEach(e=>{e.next()})}class qu{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Qd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Kb{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class nI{constructor(e){this.M=e}fi(e){return po(this.M,e)}di(e){return e.metadata.exists?aw(this.M,e.document,!1):In.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return dr(e)}}class NT{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jd(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new nI(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Pt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function Nb(n,e,t,r){return Y_.apply(this,arguments)}(e.localStore,new nI(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield Ob(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Jd(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rI{constructor(e){this.key=e}}class mm{constructor(e){this.key=e}}class iI{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Pt(),this.mutatedKeys=Pt(),this.Uu=qg(e),this.qu=new Gu(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new mv,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=xd(this.query)&&o.size===this.query.limit?o.last():null,C=Hg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const G=o.get(M),Q=qE(this.query,N)?N:null,he=!!G&&this.mutatedKeys.has(G.key),ke=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let tt=!1;G&&Q?G.data.isEqual(Q.data)?he!==ke&&(r.track({type:3,doc:Q}),tt=!0):this.ju(G,Q)||(r.track({type:2,doc:Q}),tt=!0,(w&&this.Uu(Q,w)>0||C&&this.Uu(Q,C)<0)&&(m=!0)):!G&&Q?(r.track({type:0,doc:Q}),tt=!0):G&&!Q&&(r.track({type:1,doc:G}),tt=!0,(w||C)&&(m=!0)),tt&&(Q?(d=d.add(Q),u=ke?u.add(M):u.delete(M)):(d=d.delete(M),u=u.delete(M)))}),xd(this.query)||Hg(this.query))for(;d.size>this.query.limit;){const M=xd(this.query)?d.last():d.first();d=d.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{qu:d,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((C,M)=>function(N,G){const Q=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return Q(N)-Q(G)}(C.type,M.type)||this.Uu(C.doc,M.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==u.length||w?{snapshot:new Qd(this.query,e.qu,o,u,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new mv,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Pt(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new mm(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new rI(r))}),t}Yu(e){this.$u=e.li,this.Lu=Pt();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Qd.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class sI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Yb{constructor(e){this.key=e,this.Zu=!1}}class Qb{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new as(m=>vf(m),xu),this.na=new Map,this.sa=new Set,this.ia=new er(Fe.comparator),this.ra=new Map,this.oa=new qd,this.ua={},this.aa=new Map,this.ca=Vu.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function vv(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,ae.Z)(function*(n,e){const t=Tm(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const d=yield Gd(t.localStore,Pi(e));t.isPrimaryClient&&Qf(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield _m(t,e,r,"current"===m)}return o}),ym.apply(this,arguments)}function _m(n,e,t,r){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,ae.Z)(function*(n,e,t,r){n.la=(M,N,G)=>{return(Q=(0,ae.Z)(function*(he,ke,tt,Ht){let Gt=ke.view.Gu(tt);Gt.ni&&(Gt=yield am(he.localStore,ke.query,!1).then(({documents:qt})=>ke.view.Gu(qt,Gt)));const Wt=Ht&&Ht.targetChanges.get(ke.targetId),Nt=ke.view.applyChanges(Gt,he.isPrimaryClient,Wt);return Av(he,ke.targetId,Nt.Hu),Nt.snapshot}),function(he,ke,tt,Ht){return Q.apply(this,arguments)})(n,M,N,G);var Q};const o=yield am(n.localStore,e,!0),u=new iI(e,o.li),d=u.Gu(o.documents),m=xf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);Av(n,t,w.Hu);const C=new sI(e,t,u);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),Xd.apply(this,arguments)}function Ev(n,e){return oI.apply(this,arguments)}function oI(){return oI=(0,ae.Z)(function*(n,e){const t=$e(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!xu(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yo(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jf(t.remoteStore,r.targetId),pc(t,r.targetId)}).catch(Pa))):(pc(t,r.targetId),yield yo(t.localStore,r.targetId,!0))}),oI.apply(this,arguments)}function wv(){return wv=(0,ae.Z)(function*(n,e,t){const r=vI(n);try{const o=yield function(u,d){const m=$e(u),w=Bn.now(),C=d.reduce((N,G)=>N.add(G.key),Pt());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(G=>{M=G;const Q=[];for(const he of d){const ke=JE(he,M.get(he.key));null!=ke&&Q.push(new oc(he.key,ke,kE(ke.value.mapValue),Jn.exists(!0)))}return m.Bs.addMutationBatch(N,w,Q,d)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ua[u.currentUser.toKey()];w||(w=new er(Mt)),w=w.insert(d,m),u.ua[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Wo(r,o.changes),yield Zd(r.remoteStore)}catch(o){const u=fc(o,"Failed to persist write");t.reject(u)}}),wv.apply(this,arguments)}function Iv(n,e){return eh.apply(this,arguments)}function eh(){return eh=(0,ae.Z)(function*(n,e){const t=$e(n);try{const r=yield RT(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ra.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?It(d.Zu):o.removedDocuments.size>0&&(It(d.Zu),d.Zu=!1))}),yield Wo(t,r,e)}catch(r){yield Pa(r)}}),eh.apply(this,arguments)}function Dv(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=$e(u);m.onlineState=d;let w=!1;m.queries.forEach((C,M)=>{for(const N of M.listeners)N.Au(d)&&(w=!0)}),w&&Qr(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jb(n,e,t){return sp.apply(this,arguments)}function sp(){return sp=(0,ae.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let d=new er(Fe.comparator);d=d.insert(u,In.newNoDocument(u,yt.min()));const m=Pt().add(u),w=new Sf(yt.min(),new Map,new An(Mt),d,m);yield Iv(r,w),r.ia=r.ia.remove(u),r.ra.delete(e),Sv(r)}else yield yo(r.localStore,e,!1).then(()=>pc(r,e,t)).catch(Pa)}),sp.apply(this,arguments)}function bv(n,e){return uI.apply(this,arguments)}function uI(){return uI=(0,ae.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield Mb(t.localStore,e);Em(t,r,null),Tv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wo(t,o)}catch(o){yield Pa(o)}}),uI.apply(this,arguments)}function Xb(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ae.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(u,d){const m=$e(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(M=>(It(null!==M),C=M.keys(),m.Bs.removeMutationBatch(w,M))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);Em(r,e,t),Tv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wo(r,o)}catch(o){yield Pa(o)}}),Cv.apply(this,arguments)}function vm(){return vm=(0,ae.Z)(function*(n,e){const t=$e(n);ju(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=$e(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=fc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),vm.apply(this,arguments)}function Tv(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Em(n,e,t){const r=$e(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function pc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||cI(n,r)})}function cI(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Jf(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Sv(n))}function Av(n,e,t){for(const r of t)r instanceof rI?(n.oa.addReference(r.key,e),dI(n,r)):r instanceof mm?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||cI(n,r.key)):Xe()}function dI(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.sa.add(r),Sv(n))}function Sv(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Fe(Yt.fromString(e)),r=n.ca.next();n.ra.set(r,new Yb(t)),n.ia=n.ia.insert(t,r),Qf(n.remoteStore,new Ou(Pi(_f(t.path)),r,2,Oi.A))}}function Wo(n,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,ae.Z)(function*(n,e,t){const r=$e(n),o=[],u=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=z_.Ys(w.targetId,C);u.push(M)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,ae.Z)(function*(w,C){const M=$e(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>X.forEach(C,G=>X.forEach(G.Hs,Q=>M.persistence.referenceDelegate.addReference(N,G.targetId,Q)).next(()=>X.forEach(G.Js,Q=>M.persistence.referenceDelegate.removeReference(N,G.targetId,Q)))))}catch(N){if(!Ru(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const G=N.targetId;if(!N.fromCache){const Q=M.ii.get(G),ke=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);M.ii=M.ii.insert(G,ke)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),wm.apply(this,arguments)}function hI(n,e){return Im.apply(this,arguments)}function Im(){return Im=(0,ae.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Pw(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new Ae(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wo(t,r.hi)}var o}),Im.apply(this,arguments)}function eC(n,e){const t=$e(n),r=t.ra.get(e);if(r&&r.Zu)return Pt().add(r.key);{let o=Pt();const u=t.na.get(e);if(!u)return o;for(const d of u){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function tC(n,e){return fI.apply(this,arguments)}function fI(){return fI=(0,ae.Z)(function*(n,e){const t=$e(n),r=yield am(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&Av(t,e.targetId,o.Hu),o}),fI.apply(this,arguments)}function pI(n,e){return gI.apply(this,arguments)}function gI(){return gI=(0,ae.Z)(function*(n,e){const t=$e(n);return K_(t.localStore,e).then(r=>Wo(t,r))}),gI.apply(this,arguments)}function OT(n,e,t,r){return mI.apply(this,arguments)}function mI(){return mI=(0,ae.Z)(function*(n,e,t,r){const o=$e(n),u=yield function(d,m){const w=$e(d),C=$e(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.fn(M,m).next(N=>N?w.ci.Ks(M,N):X.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Zd(o.remoteStore):"acknowledged"===t||"rejected"===t?(Em(o,e,r||null),Tv(o,e),m=e,$e($e(o.localStore).Bs)._n(m)):Xe(),yield Wo(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),mI.apply(this,arguments)}function yI(){return yI=(0,ae.Z)(function*(n,e){const t=$e(n);if(Tm(t),vI(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield nC(t,r.toArray());t.ha=!0,yield ip(t.remoteStore,!0);for(const u of o)Qf(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(pc(t,d),yo(t.localStore,d,!0))),Jf(t.remoteStore,d)}),yield o,yield nC(t,r),function(u){const d=$e(u);d.ra.forEach((m,w)=>{Jf(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new er(Fe.comparator)}(t),t.ha=!1,yield ip(t.remoteStore,!1)}}),yI.apply(this,arguments)}function nC(n,e,t){return _I.apply(this,arguments)}function _I(){return _I=(0,ae.Z)(function*(n,e,t){const r=$e(n),o=[],u=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield Gd(r.localStore,Pi(w[0]));for(const C of w){const M=r.ea.get(C),N=yield tC(r,M);N.snapshot&&u.push(N.snapshot)}}else{const C=yield Rb(r.localStore,d);m=yield Gd(r.localStore,C),yield _m(r,rC(C),d,!1)}o.push(m)}return r.ta.Qo(u),o}),_I.apply(this,arguments)}function rC(n){return $g(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dm(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function kT(n,e,t,r){return bm.apply(this,arguments)}function bm(){return bm=(0,ae.Z)(function*(n,e,t,r){const o=$e(n);if(o.ha)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield K_(o.localStore,zE(u[0])),m=Sf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wo(o,d,m);break}case"rejected":yield yo(o.localStore,e,!0),pc(o,e,r);break;default:Xe()}}),bm.apply(this,arguments)}function xv(n,e,t){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ae.Z)(function*(n,e,t){const r=Tm(n);if(r.ha){for(const o of e){if(r.na.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield Rb(r.localStore,o),d=yield Gd(r.localStore,u);yield _m(r,rC(u),d.targetId,!1),Qf(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield yo(r.localStore,o,!1).then(()=>{Jf(r.remoteStore,o),pc(r,o)}).catch(Pa))}}),Cm.apply(this,arguments)}function Tm(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jb.bind(null,e),e.ta.Qo=tI.bind(null,e.eventManager),e.ta.fa=Zb.bind(null,e.eventManager),e}function vI(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xb.bind(null,e),e}class Rv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.M=Kf(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return W_(this.persistence,new im,e.initialUser,this.M)}wa(e){return new Fb(X_.zi,this.M)}_a(e){return new Vb}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Nv extends Rv{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield vI(r.ya.syncEngine),yield Zd(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return W_(this.persistence,new im,e.initialUser,this.M)}ma(e){return new Ib(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new zf(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Gw(),cm(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Vb}}class EI extends Nv{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof tv&&(r.sharedClientState.syncEngine={Mr:OT.bind(null,o),Or:kT.bind(null,o),Fr:xv.bind(null,o),Fs:Dm.bind(null,o),kr:pI.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ae.Z)(function*(d){yield function PT(n,e){return yI.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}_a(e){const t=Gw();if(!tv.vt(t))throw new Ae(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wI{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Dv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=hI.bind(null,r.syncEngine),yield ip(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eI}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),r=new Bb(e.databaseInfo);return new Hb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Dv(this.syncEngine,m,0),d=Ub.vt()?new Ub:new $w,new Yf(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const M=new Qb(r,o,u,d,m,w);return C&&(M.ha=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const r=$e(t);Ne("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield hc(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ov(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Am{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Pv{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new Kb(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ae.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ae.Z)(function*(u,d){const m=$e(u),w=Fd(m.M)+"/documents",C={documents:d.map(Q=>kd(m.M,Q))},M=yield m.ho("BatchGetDocuments",w,C),N=new Map;M.forEach(Q=>{const he=function nb(n,e){return"found"in e?function(t,r){It(!!r.found);const o=po(t,r.found.name),u=dr(r.found.updateTime),d=new ci({mapValue:{fields:r.found.fields}});return In.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=po(t,r.missing),u=dr(r.readTime);return In.newNoDocument(o,u)}(n,e):Xe()}(m.M,Q);N.set(he.key.toString(),he)});const G=[];return d.forEach(Q=>{const he=N.get(Q.toString());It(!!he),G.push(he)}),G}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Od(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Fe.fromPath(o);e.mutations.push(new c_(u,e.precondition(u)))}),yield(r=(0,ae.Z)(function*(o,u){const d=$e(o),m=Fd(d.M)+"/documents",w={writes:u.map(C=>Nf(d.M,C))};yield d.oo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new Ae(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FT{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new rv(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ae.Z)(function*(){const t=new iC(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Or(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!d_(t)}return!1}}class LT{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=zy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ae.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=fc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function sC(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ae.Z)(function*(u){r.isEqual(u)||(yield Pw(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kv.apply(this,arguments)}function II(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DI(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>fv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>fv(e.remoteStore,u)),n.onlineComponents=e}),Fv.apply(this,arguments)}function DI(n){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,ae.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield sC(n,new Rv)),n.offlineComponents}),Lv.apply(this,arguments)}function th(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ae.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield II(n,new wI)),n.onlineComponents}),Vv.apply(this,arguments)}function Bs(n){return DI(n).then(e=>e.persistence)}function Uv(n){return DI(n).then(e=>e.localStore)}function Sm(n){return th(n).then(e=>e.remoteStore)}function Bv(n){return th(n).then(e=>e.syncEngine)}function nh(n){return op.apply(this,arguments)}function op(){return op=(0,ae.Z)(function*(n){const e=yield th(n),t=e.eventManager;return t.onListen=vv.bind(null,e.syncEngine),t.onUnlisten=Ev.bind(null,e.syncEngine),t}),op.apply(this,arguments)}function jv(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(o,u,d,m,w){const C=new Am({next:N=>{u.enqueueAndForget(()=>gm(o,M));const G=N.docs.has(d);!G&&N.fromCache?w.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new qu(_f(d.path),C,{includeMetadataChanges:!0,Cu:!0});return yv(o,M)}(yield nh(n),n.asyncQueue,e,t,r)})),r.promise}function AI(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(o,u,d,m,w){const C=new Am({next:N=>{u.enqueueAndForget(()=>gm(o,M)),N.fromCache&&"server"===m.source?w.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new qu(d,C,{includeMetadataChanges:!0,Cu:!0});return yv(o,M)}(yield nh(n),n.asyncQueue,e,t,r)})),r.promise}const lC=new Map;function Hv(n,e,t){if(!t)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Gv(n,e,t,r){if(!0===e&&!0===r)throw new Ae(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SI(n){if(!Fe.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xI(n){if(Fe.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ap(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(n);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cC(n,e){if(e<=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,e instanceof Fs?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fs(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qy;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new DT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lC.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),lC.delete(e),t.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class js extends Jr{constructor(e,t,r){super(e,t,_f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Fe(e))}withConverter(e){return new js(this.firestore,e,this._path)}}function xm(n,e,...t){if(n=(0,wt.m9)(n),Hv("collection","path",e),n instanceof rh){const r=Yt.fromString(e,...t);return xI(r),new js(n,null,r)}{if(!(n instanceof Sn||n instanceof js))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return xI(r),new js(n.firestore,null,r)}}function Mm(n,e,...t){if(n=(0,wt.m9)(n),1===arguments.length&&(e=zy.R()),Hv("doc","path",e),n instanceof rh){const r=Yt.fromString(e,...t);return SI(r),new Sn(n,null,new Fe(r))}{if(!(n instanceof Sn||n instanceof js))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return SI(r),new Sn(n.firestore,n instanceof js?n.converter:null,new Fe(r))}}function zv(n,e){return n=(0,wt.m9)(n),e=(0,wt.m9)(e),(n instanceof Sn||n instanceof js)&&(e instanceof Sn||e instanceof js)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Wv(n,e){return n=(0,wt.m9)(n),e=(0,wt.m9)(e),n instanceof Jr&&e instanceof Jr&&n.firestore===e.firestore&&xu(n._query,e._query)&&n.converter===e.converter}class hC{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new rv(this,"async_queue_retry"),this.qa=()=>{const t=cm();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=cm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=cm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Yr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Ru(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,ur("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=gv.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&Xe()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Zv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class VT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xn extends rh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new hC,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fC(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||fC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fC(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Yl(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new LT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pC(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield sC(n,t),yield II(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function Kv(n){if(n._initialized||n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(Ir.fromBase64String(e))}catch(t){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zo(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class La{constructor(e){this._methodName=e}}class ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const Nm=/^__.*__$/;class zT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new bf(e,this.data,t,this.fieldTransforms)}}class yC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _C(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Yv{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return n0(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(_C(this.Xa)&&Nm.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class OI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Kf(e)}ac(e,t,r,o=!1){return new Yv({Xa:e,methodName:t,uc:r,path:Nr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function mc(n){const e=n._freezeSettings(),t=Kf(n._databaseId);return new OI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Om(n,e,t,r,o,u={}){const d=n.ac(u.merge||u.mergeFields?2:0,e,t,o);Xv("Data must be an object, but it was:",d,r);const m=Jv(r,d);let w,C;if(u.merge)w=new Ma(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const M=[];for(const N of u.mergeFields){const G=e0(e,N,t);if(!d.contains(G))throw new Ae(le.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);LI(M,G)||M.push(G)}w=new Ma(M),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new zT(new ci(m),w,C)}class up extends La{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function PI(n,e,t){return new Yv({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Pm extends La{_toFieldTransform(e){return new Nd(e.path,new Md)}isEqual(e){return e instanceof Pm}}class kI extends La{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=PI(this,e,!0),r=this.cc.map(u=>sh(u,t)),o=new Mu(r);return new Nd(e.path,o)}isEqual(e){return this===e}}class FI extends La{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=PI(this,e,!0),r=this.cc.map(u=>sh(u,t)),o=new Na(r);return new Nd(e.path,o)}isEqual(e){return this===e}}class vC extends La{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Rd(e.M,zg(e.M,this.hc));return new Nd(e.path,t)}isEqual(e){return this===e}}function Qv(n,e,t,r){const o=n.ac(1,e,t);Xv("Data must be an object, but it was:",o,r);const u=[],d=ci.empty();Kl(r,(w,C)=>{const M=t0(e,w,t);C=(0,wt.m9)(C);const N=o.sc(M);if(C instanceof up)u.push(M);else{const G=sh(C,N);null!=G&&(u.push(M),d.set(M,G))}});const m=new Ma(u);return new yC(d,m,o.fieldTransforms)}function km(n,e,t,r,o,u){const d=n.ac(1,e,t),m=[e0(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)m.push(e0(e,u[G])),w.push(u[G+1]);const C=[],M=ci.empty();for(let G=m.length-1;G>=0;--G)if(!LI(C,m[G])){const Q=m[G];let he=w[G];he=(0,wt.m9)(he);const ke=d.sc(Q);if(he instanceof up)C.push(Q);else{const tt=sh(he,ke);null!=tt&&(C.push(Q),M.set(Q,tt))}}const N=new Ma(C);return new yC(M,N,d.fieldTransforms)}function Fm(n,e,t,r=!1){return sh(t,n.ac(r?4:3,e))}function sh(n,e){if(Lm(n=(0,wt.m9)(n)))return Xv("Unsupported field value:",e,n),Jv(n,e);if(n instanceof La)return function(t,r){if(!_C(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=sh(d,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zg(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Bn.fromDate(t);return{timestampValue:Mf(r.M,o)}}if(t instanceof Bn){const o=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mf(r.M,o)}}if(t instanceof ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zo)return{bytesValue:m_(r.M,t._byteString)};if(t instanceof Sn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${ap(t)}`)}(n,e)}function Jv(n,e){const t={};return NE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(n,(r,o)=>{const u=sh(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Lm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof ih||n instanceof Zo||n instanceof Sn||n instanceof La)}function Xv(n,e,t){if(!Lm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ap(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function e0(n,e,t){if((e=(0,wt.m9)(e))instanceof vo)return e._internalPath;if("string"==typeof e)return t0(n,e);throw n0("Field path arguments must be of type string or ",n,!1,void 0,t)}const WT=new RegExp("[~\\*/\\[\\]]");function t0(n,e,t){if(e.search(WT)>=0)throw n0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vo(...e.split("."))._internalPath}catch(r){throw n0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function n0(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(le.INVALID_ARGUMENT,m+n+w)}function LI(n,e){return n.some(t=>t.isEqual(e))}class lp{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(r0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZT extends lp{data(){return super.data()}}function r0(n,e){return"string"==typeof e?t0(n,e):e instanceof vo?e._internalPath:e._delegate._internalPath}class oh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zu extends lp{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(r0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vm extends zu{data(e={}){return super.data(e)}}class Wu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new oh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vm(this._firestore,this._userDataWriter,r.key,r,new oh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Vm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new oh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Vm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new oh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:KT(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function EC(n,e){return n instanceof zu&&e instanceof zu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wu&&e instanceof Wu&&n._firestore===e._firestore&&Wv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function wC(n){if(Hg(n)&&0===n.explicitOrderBy.length)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Um{}function i(n,...e){for(const t of e)n=t._apply(n);return n}class s extends Um{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=mc(e.firestore),r=function(o,u,d,m,w,C,M){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){Ue(M,C);const Q=[];for(const he of M)Q.push(Oe(m,o,he));N={arrayValue:{values:Q}}}else N=Oe(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||Ue(M,C),N=Fm(d,"where",M,"in"===C||"not-in"===C);const G=Pr.create(w,C,N);return function(Q,he){if(he.S()){const tt=sc(Q);if(null!==tt&&!tt.isEqual(he.field))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${he.field.toString()}'`);const Ht=HE(Q);null!==Ht&&Qe(0,he.field,Ht)}const ke=function(tt,Ht){for(const Gt of tt.filters)if(Ht.indexOf(Gt.op)>=0)return Gt.op;return null}(Q,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(he.op));if(null!==ke)throw new Ae(le.INVALID_ARGUMENT,ke===he.op?`Invalid query. You cannot use more than one '${he.op.toString()}' filter.`:`Invalid query. You cannot use '${he.op.toString()}' filters with '${ke.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Jr(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ho(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class l extends Um{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Sd(o,u);return function(m,w){if(null===HE(m)){const C=sc(m);null!==C&&Qe(0,C,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Jr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ho(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class f extends Um{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Jr(e.firestore,e.converter,GE(e._query,this.wc,this.mc))}}class I extends Um{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ye(e,this.type,this.gc,this.yc);return new Jr(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class P extends Um{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ye(e,this.type,this.gc,this.yc);return new Jr(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function ye(n,e,t,r){if(t[0]=(0,wt.m9)(t[0]),t[0]instanceof lp)return function(o,u,d,m,w){if(!m)throw new Ae(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const M of Su(o))if(M.field.isKeyField())C.push(Tu(u,m.key));else{const N=m.data.field(M.field);if(ks(N))throw new Ae(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=M.field.canonicalString();throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(N)}return new Au(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=mc(n.firestore);return function(u,d,m,w,C,M){const N=u.explicitOrderBy;if(C.length>N.length)throw new Ae(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let Q=0;Q<C.length;Q++){const he=C[Q];if(N[Q].field.isKeyField()){if("string"!=typeof he)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof he}`);if(!Gg(u)&&-1!==he.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${he}' contains a slash.`);const ke=u.path.child(Yt.fromString(he));if(!Fe.isDocumentKey(ke))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const tt=new Fe(ke);G.push(Tu(d,tt))}else{const ke=Fm(m,w,he);G.push(ke)}}return new Au(G,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Oe(n,e,t){if("string"==typeof(t=(0,wt.m9)(t))){if(""===t)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gg(e)&&-1!==t.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Fe.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tu(n,new Fe(r))}if(t instanceof Sn)return Tu(n,t._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(t)}.`)}function Ue(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Qe(n,e,t){if(!t.isEqual(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ie{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Kl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ih(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dd(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lr(e));default:return null}}convertTimestamp(e){const t=Cu(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);It(I_(r));const o=new Fs(r.get(1),r.get(3)),u=new Fe(r.popFirst(5));return o.isEqual(t)||ur(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function st(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Bt extends Ie{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class un{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,r){this._verifyNotCommitted();const o=fr(e,this._firestore),u=st(o.converter,t,r),d=Om(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Jn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=fr(e,this._firestore);let d;return d="string"==typeof(t=(0,wt.m9)(t))||t instanceof vo?km(this._dataReader,"WriteBatch.update",u._key,t,r,o):Qv(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fr(e,this._firestore);return this._mutations=this._mutations.concat(new Od(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fr(n,e){if((n=(0,wt.m9)(n)).firestore!==e)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Va extends Ie{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function Bm(n,e,t){n=zt(n,Sn);const r=zt(n.firestore,xn),o=st(n.converter,e,t);return $m(r,[Om(mc(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Jn.none())])}function jm(n,e,t,...r){n=zt(n,Sn);const o=zt(n.firestore,xn),u=mc(o);let d;return d="string"==typeof(e=(0,wt.m9)(e))||e instanceof vo?km(u,"updateDoc",n._key,e,t,r):Qv(u,"updateDoc",n._key,e),$m(o,[d.toMutation(n._key,Jn.exists(!0))])}function YT(n,...e){var t,r,o;n=(0,wt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Zv(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(Zv(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,M;if(n instanceof Sn)C=zt(n.firestore,xn),M=_f(n._key.path),w={next:N=>{e[d]&&e[d](IC(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=zt(n,Jr);C=zt(N.firestore,xn),M=N._query;const G=new Va(C);w={next:Q=>{e[d]&&e[d](new Wu(C,G,N,Q))},error:e[d+1],complete:e[d+2]},wC(n._query)}return function(N,G,Q,he){const ke=new Am(he),tt=new qu(G,ke,Q);return N.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return yv(yield nh(N),tt)})),()=>{ke.Ia(),N.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return gm(yield nh(N),tt)}))}}(hr(C),M,m,w)}function $m(n,e){return function(t,r){const o=new Yr;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function aI(n,e,t){return wv.apply(this,arguments)}(yield Bv(t),r,o)})),o.promise}(hr(n),e)}function IC(n,e,t){const r=t.docs.get(e._key),o=new Va(n);return new zu(n,o,e._key,r,new oh(t.hasPendingWrites,t.fromCache),e.converter)}class ix extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mc(e)}get(e){const t=fr(e,this._firestore),r=new Bt(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new lp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new lp(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=fr(e,this._firestore),u=st(o.converter,t,r),d=Om(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=fr(e,this._firestore);let d;return d="string"==typeof(t=(0,wt.m9)(t))||t instanceof vo?km(this._dataReader,"Transaction.update",u._key,t,r,o):Qv(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=fr(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fr(e,this._firestore),r=new Va(this._firestore);return super.get(e).then(o=>new zu(this._firestore,r,t._key,o._document,new oh(!1,!1),t.converter))}}function DC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JT(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function XT(){if(!function Id(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bu=uo.SDK_VERSION,(0,uo._registerComponent)(new vu.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new xn(o,new xE(t.getProvider("auth-internal")),new bT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,uo.registerVersion)(AE,"3.4.8",n),(0,uo.registerVersion)(AE,"3.4.8","esm2017")}();class d0{constructor(e){this._delegate=e}static fromBase64String(e){return XT(),new d0(Zo.fromBase64String(e))}static fromUint8Array(e){return JT(),new d0(Zo.fromUint8Array(e))}toBase64(){return XT(),this._delegate.toBase64()}toUint8Array(){return JT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bC(n){return function fx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class px{enableIndexedDbPersistence(e,t){return function $T(n,e){Kv(n=zt(n,xn));const t=hr(n),r=n._freezeSettings(),o=new wI;return pC(t,o,new Nv(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function HT(n){Kv(n=zt(n,xn));const e=hr(n),t=n._freezeSettings(),r=new wI;return pC(e,r,new EI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function GT(n){if(n._initialized&&!n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(r){if(!Vs.vt())return Promise.resolve();const o=r+"main";yield Vs.delete(o)}),function(r){return t.apply(this,arguments)})(Zf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ff("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dC(n,e,t,r={}){var o;const u=(n=zt(n,rh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ff("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=vn.MOCK_USER;else{d=(0,wt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new vn(w)}n._authCredentials=new HD(new $D(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Rm(n){return function bI(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Bs(n),t=yield Sm(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.fu.delete(0),Wd(o)}(t)}))}(hr(n=zt(n,xn)))}(this._delegate)}disableNetwork(){return function mC(n){return function CI(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Bs(n),t=yield Sm(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(o){const u=$e(o);u.fu.add(0),yield hc(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(hr(n=zt(n,xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Gv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gC(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function lI(n,e){return vm.apply(this,arguments)}(yield Bv(e),t)})),t.promise}(hr(n=zt(n,xn)))}(this._delegate)}onSnapshotsInSync(e){return function rx(n,e){return function aC(n,e){const t=new Am(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield nh(n),o=t,$e(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield nh(n),o=t,void $e(r).Eu.delete(o);var r,o}))}}(hr(n=zt(n,xn)),Zv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hm(this,xm(this._delegate,e))}catch(t){throw us(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,Mm(this._delegate,e))}catch(t){throw us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ls(this,function MI(n,e){if(n=zt(n,rh),Hv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jr(n,null,(t=e,new Ho(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sx(n,e){return function $v(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const r=yield(o=n,th(o).then(u=>u.datastore));var o;new FT(n.asyncQueue,r,e,t).run()})),t.promise}(hr(n=zt(n,xn)),t=>e(new ix(n,t)))}(this._delegate,t=>e(new tA(this,t)))}batch(){return hr(this._delegate),new nA(new un(this._delegate,e=>$m(this._delegate,e)))}loadBundle(e){return function RI(n,e){const t=hr(n=zt(n,xn)),r=new VT;return function _o(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return Ov(w,C);if(w instanceof ArrayBuffer)return Ov(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Pv(w,d);var w}(t,Kf(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function Mv(n,e,t){const r=$e(n);var o;(o=(0,ae.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(G,Q){const he=$e(G),ke=dr(Q.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",tt=>he._s.getBundleMetadata(tt,Q.id)).then(tt=>!!tt&&tt.createTime.compareTo(ke)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);m._updateProgress(Jd(w));const C=new NT(w,u.localStore,d.M);let M=yield d.da();for(;M;){const G=yield C.ku(M);G&&m._updateProgress(G),M=yield d.da()}const N=yield C.complete();return yield Wo(u,N.Fu,void 0),yield function(G,Q){const he=$e(G);return he.persistence.runTransaction("Save bundle","readwrite",ke=>he._s.saveBundleMetadata(ke,Q))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(w){return ff("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var G}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Bv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gc(n,e){return function uC(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield Uv(n),e)}))}(hr(n=zt(n,xn)),e).then(t=>t?new Jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ls(this,t):null)}}class VI extends Ie{constructor(e){super(),this.firestore=e}convertBytes(e){return new d0(new Zo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class tA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VI(e)}get(e){const t=dp(e);return this._delegate.get(t).then(r=>new h0(this._firestore,new zu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=dp(e);return r?(DC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dp(e);return this._delegate.delete(t),this}}class nA{constructor(e){this._delegate=e}set(e,t,r){const o=dp(e);return r?(DC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new f0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new cp(e,new VI(e),t),o.set(t,u)),u}}cp.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new Sn(t._delegate,r,new Fe(e)))}static forKey(e,t,r){return new Ko(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hm(this.firestore,xm(this._delegate,e))}catch(t){throw us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,wt.m9)(e))instanceof Sn&&zv(this._delegate,e)}set(e,t){t=DC("DocumentReference.set",t);try{return t?Bm(this._delegate,e,t):Bm(this._delegate,e)}catch(r){throw us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jm(this._delegate,e):jm(this._delegate,e,t,...r)}catch(o){throw us(o,"updateDoc()","DocumentReference.update()")}}delete(){return function c0(n){return $m(zt(n.firestore,xn),[new Od(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=rA(e),r=iA(e,o=>new h0(this.firestore,new zu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return YT(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function s0(n){n=zt(n,Sn);const e=zt(n.firestore,xn),t=hr(e),r=new Va(e);return function oC(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(o,u,d){try{const m=yield function(w,C){const M=$e(w);return M.persistence.runTransaction("read document","readonly",N=>M.ci.Ls(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ae(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=fc(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Uv(n),e,t);var r})),t.promise}(t,n._key).then(o=>new zu(e,r,n._key,o,new oh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function o0(n){n=zt(n,Sn);const e=zt(n.firestore,xn);return jv(hr(e),n._key,{source:"server"}).then(t=>IC(e,n,t))}(this._delegate):function yc(n){n=zt(n,Sn);const e=zt(n.firestore,xn);return jv(hr(e),n._key).then(t=>IC(e,n,t))}(this._delegate),t.then(r=>new h0(this.firestore,new zu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function us(n,e,t){return n.message=n.message.replace(e,t),n}function rA(n){for(const e of n)if("object"==typeof e&&!bC(e))return e;return{}}function iA(n,e){var t,r;let o;return o=bC(n[0])?n[0]:bC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class h0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EC(this._delegate,e._delegate)}}class f0 extends h0{data(e){const t=this._delegate.data(e);return function IT(n,e){n||Xe()}(void 0!==t),t}}class ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VI(e)}where(e,t,r){try{return new ls(this.firestore,i(this._delegate,function a(n,e,t){const r=e,o=r0("where",n);return new s(o,r,t)}(e,t,r)))}catch(o){throw us(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ls(this.firestore,i(this._delegate,function c(n,e="asc"){const t=e,r=r0("orderBy",n);return new l(r,t)}(e,t)))}catch(r){throw us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ls(this.firestore,i(this._delegate,function _(n){return cC("limit",n),new f("limit",n,"F")}(e)))}catch(t){throw us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ls(this.firestore,i(this._delegate,function E(n){return cC("limitToLast",n),new f("limitToLast",n,"L")}(e)))}catch(t){throw us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ls(this.firestore,i(this._delegate,function A(...n){return new I("startAt",n,!0)}(...e)))}catch(t){throw us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ls(this.firestore,i(this._delegate,function S(...n){return new I("startAfter",n,!1)}(...e)))}catch(t){throw us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ls(this.firestore,i(this._delegate,function V(...n){return new P("endBefore",n,!1)}(...e)))}catch(t){throw us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ls(this.firestore,i(this._delegate,function W(...n){return new P("endAt",n,!0)}(...e)))}catch(t){throw us(t,"endAt()","Query.endAt()")}}isEqual(e){return Wv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function u0(n){n=zt(n,Jr);const e=zt(n.firestore,xn),t=hr(e),r=new Va(e);return function TI(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(o,u,d){try{const m=yield am(o,u,!0),w=new iI(u,m.li),C=w.Gu(m.documents),M=w.applyChanges(C,!1);d.resolve(M.snapshot)}catch(m){const w=fc(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Uv(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Wu(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function l0(n){n=zt(n,Jr);const e=zt(n.firestore,xn),t=hr(e),r=new Va(e);return AI(t,n._query,{source:"server"}).then(o=>new Wu(e,r,n,o))}(this._delegate):function a0(n){n=zt(n,Jr);const e=zt(n.firestore,xn),t=hr(e),r=new Va(e);return wC(n._query),AI(t,n._query).then(o=>new Wu(e,r,n,o))}(this._delegate),t.then(r=>new CC(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rA(e),r=iA(e,o=>new CC(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return YT(this._delegate,t,r)}withConverter(e){return new ls(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}class mx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new f0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new f0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mx(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new f0(this._firestore,r))})}isEqual(e){return EC(this._delegate,e._delegate)}}class Hm extends ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?Mm(this._delegate):Mm(this._delegate,e))}catch(t){throw us(t,"doc()","CollectionReference.doc()")}}add(e){return function nx(n,e){const t=zt(n.firestore,xn),r=Mm(n),o=st(n.converter,e);return $m(t,[Om(mc(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return zv(this._delegate,e._delegate)}withConverter(e){return new Hm(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function dp(n){return zt(n,Sn)}class TC{constructor(...e){this._delegate=new vo(...e)}static documentId(){return new TC(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,wt.m9)(e))instanceof vo&&this._delegate._internalPath.isEqual(e._internalPath)}}class hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ax(){return new Pm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hp(e)}static delete(){const e=function ox(){return new up("deleteField")}();return e._methodName="FieldValue.delete",new hp(e)}static arrayUnion(...e){const t=function ux(...n){return new kI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new hp(t)}static arrayRemove(...e){const t=function lx(...n){return new FI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new hp(t)}static increment(e){const t=function cx(n){return new vC("increment",n)}(e);return t._methodName="FieldValue.increment",new hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yx={Firestore:eA,GeoPoint:ih,Timestamp:Bn,Blob:d0,Transaction:tA,WriteBatch:nA,DocumentReference:Ko,DocumentSnapshot:h0,Query:ls,QueryDocumentSnapshot:f0,QuerySnapshot:CC,CollectionReference:Hm,FieldPath:TC,FieldValue:hp,setLogLevel:function gx(n){!function SE(n){xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function vx(n){(function _x(n,e){n.INTERNAL.registerComponent(new vu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},yx)))})(n,(e,t)=>new eA(e,t,new px)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Jp.Z);var ah=k(7579),Ex=k(6451),UI=k(5363);function cs(n,e){return(0,Mr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,yn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const M=u++;(0,Xt.Xf)(n(w,M)).subscribe(o=(0,yn.x)(r,N=>r.next(e?e(w,N,M,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var wx=k(6063);class Ix extends ah.x{constructor(e=1/0,t=1/0,r=wx.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Dx=k(3099);function sA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Dx.B)({connector:()=>new Ix(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const BI=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var AC=k(5698);function oA(n){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function aA(n=Cx){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Cx(){return new BI}function fp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ns((o,u)=>n(o,u,r)):li.y,(0,AC.q)(1),t?oA(e):aA(()=>new BI))}var SC=k(576);function uA(n,e){return(0,SC.m)(e)?cs(()=>n,e):cs(()=>n)}var xC=k(9468);k(5867);const cA=new Map,Mx={activated:!1,tokenObservers:[]},Rx={initialized:!1,enabled:!1};function hi(n){return cA.get(n)||Mx}function Ua(n,e){cA.set(n,e)}function $I(){return Rx}class Fx{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ae.Z)(function*(){t.stop();try{t.pending=new wt.BH,yield function Lx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ds=new wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hA(n){if(!hi(n).activated)throw ds.create("use-before-activation",{appName:n.name})}function OC(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw ds.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw ds.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw ds.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),PC.apply(this,arguments)}function $x(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const p0="firebase-app-check-store";let qI=null;function pA(){return qI||(qI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ds.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(p0,{keyPath:"compositeKey"})}}catch(t){e(ds.create("storage-open",{originalErrorMessage:t.message}))}}),qI)}function kC(){return kC=(0,ae.Z)(function*(n,e){const r=(yield pA()).transaction(p0,"readwrite"),u=r.objectStore(p0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(ds.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),kC.apply(this,arguments)}const g0=new Vo.Yd("@firebase/app-check");function _A(n,e){return(0,wt.hl)()?function zx(n,e){return function gA(n,e){return kC.apply(this,arguments)}(function yA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{g0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vA(){return $I().enabled}function EA(){return UC.apply(this,arguments)}function UC(){return UC=(0,ae.Z)(function*(){const n=$I();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),UC.apply(this,arguments)}const Jx={error:"UNKNOWN_ERROR"};function Xx(n){return wt.US.encodeString(JSON.stringify(n),!1)}function zI(n){return BC.apply(this,arguments)}function BC(){return BC=(0,ae.Z)(function*(n,e=!1){const t=n.app;hA(t);const r=hi(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&WI(w)&&(o=w)}if(!e&&o&&WI(o))return{token:o.token};let m,d=!1;if(vA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=OC($x(t,yield EA()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield _A(t,w),Ua(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?g0.warn(w.message):g0.error(w),u=w}return o?(m={token:o.token},Ua(t,Object.assign(Object.assign({},r),{token:o})),yield _A(t,o)):m=tM(u),d&&IA(t,m),m}),BC.apply(this,arguments)}function $C(n,e){const t=hi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ua(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function wA(n){const{app:e}=n,t=hi(e);let r=t.tokenRefresher;r||(r=function eM(n){const{app:e}=n;return new Fx((0,ae.Z)(function*(){let r;if(r=hi(e).token?yield zI(n,!0):yield zI(n),r.error)throw r.error}),()=>!0,()=>{const t=hi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ua(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function IA(n,e){const t=hi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function WI(n){return n.expireTimeMillis-Date.now()>0}function tM(n){return{token:Xx(Jx),error:n}}class nM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=hi(this.app);for(const t of e)$C(this.app,t.next);return Promise.resolve()}}const MA="app-check-internal";!function mM(){(0,uo._registerComponent)(new vu.wA("app-check",n=>function rM(n,e){return new nM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MA).initialize()})),(0,uo._registerComponent)(new vu.wA(MA,n=>function iM(n){return{getToken:e=>zI(n,e),addTokenListener:e=>function jC(n,e,t,r){const{app:o}=n,u=hi(o),d={next:t,error:r,type:e};if(Ua(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&WI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),wA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>wA(n))}(n,"INTERNAL",e),removeTokenListener:e=>$C(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,uo.registerVersion)("@firebase/app-check","0.5.6")}();class zC{constructor(){return(0,an.vb)("app-check")}}"undefined"!=typeof window&&window;var wM=k(127);const NA=new g.OlP("angularfire2.auth.use-emulator"),OA=new g.OlP("angularfire2.auth.settings"),PA=new g.OlP("angularfire2.auth.tenant-id"),kA=new g.OlP("angularfire2.auth.langugage-code"),FA=new g.OlP("angularfire2.auth.use-device-language"),LA=new g.OlP("angularfire.auth.persistence"),VA=(n,e,t,r,o,u,d,m)=>(0,pn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,M]of Object.entries(d))w.settings[C]=M;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let UA=(()=>{class n{constructor(t,r,o,u,d,m,w,C,M,N,G,Q){const he=new ah.x,ke=mt(void 0).pipe((0,UI.Q)(d.outsideAngular),cs(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Ct.U)(()=>(0,pn.on)(t,u,r)),(0,Ct.U)(tt=>VA(tt,u,m,C,M,N,w,G)),sA({bufferSize:1,refCount:!1}));if(sr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{ke.pipe(fp()).subscribe();const Ht=ke.pipe(cs(Nt=>Nt.getRedirectResult().then(qt=>qt,()=>null)),an.iC,sA({bufferSize:1,refCount:!1})),Gt=ke.pipe(cs(Nt=>new mn.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Nt.onAuthStateChanged(hn=>qt.next(hn),hn=>qt.error(hn),()=>qt.complete()))})))),Wt=ke.pipe(cs(Nt=>new mn.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Nt.onIdTokenChanged(hn=>qt.next(hn),hn=>qt.error(hn),()=>qt.complete()))}))));this.authState=Ht.pipe(uA(Gt),(0,xC.R)(d.outsideAngular),(0,UI.Q)(d.insideAngular)),this.user=Ht.pipe(uA(Wt),(0,xC.R)(d.outsideAngular),(0,UI.Q)(d.insideAngular)),this.idToken=this.user.pipe(cs(Nt=>Nt?(0,On.D)(Nt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(cs(Nt=>Nt?(0,On.D)(Nt.getIdTokenResult()):mt(null))),this.credential=(0,Ex.T)(Ht,he,this.authState.pipe(ns(Nt=>!Nt))).pipe((0,Ct.U)(Nt=>(null==Nt?void 0:Nt.user)?Nt:null),(0,xC.R)(d.outsideAngular),(0,UI.Q)(d.insideAngular))}return(0,pn.pX)(this,ke,u,{spy:{apply:(tt,Ht,Gt)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&Gt.then(Wt=>he.next(Wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pn.Dh),g.LFG(pn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(an.HU),g.LFG(NA,8),g.LFG(OA,8),g.LFG(PA,8),g.LFG(kA,8),g.LFG(FA,8),g.LFG(LA,8),g.LFG(zC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function BA(n,e){return function DM(n,e=Ea.z){return new mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ZC(n,e){return BA(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function KI(n,e){return ZC(n,e).pipe(_u(void 0),nd(),(0,Ct.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(M=>M.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function jA(n,e,t){return KI(n,t).pipe(Pl((r,o)=>function CM(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Qp(n,e=li.y){return n=null!=n?n:cy,(0,Mr.e)((t,r)=>{let o,u=!0;t.subscribe((0,yn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Ct.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function KC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function $A(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=KI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(_u(void 0),nd(),ns(([r,o])=>o.length>0||!r),(0,Ct.U)(([r,o])=>o),an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$A(e);return jA(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return ZC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),an.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(an.iC)}add(e){return this.ref.add(e)}doc(e){return new GA(this.ref.doc(e),this.afs)}}class GA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=WA(r,t);return new HA(o,u,this.afs)}snapshotChanges(){return function bM(n,e){return BA(n,e).pipe(_u(void 0),nd(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(an.iC)}}class AM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?KI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ns(t=>t.length>0),an.iC):KI(this.query,this.afs.schedulers.outsideAngular).pipe(an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$A(e);return jA(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return ZC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),an.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(an.iC)}}const qA=new g.OlP("angularfire2.enableFirestorePersistence"),zA=new g.OlP("angularfire2.firestore.persistenceSettings"),SM=new g.OlP("angularfire2.firestore.settings"),xM=new g.OlP("angularfire2.firestore.use-emulator");function WA(n,e=(t=>t)){return{query:e(n),ref:n}}let ZA=(()=>{class n{constructor(t,r,o,u,d,m,w,C,M,N,G,Q,he,ke,tt,Ht,Gt){this.schedulers=w;const Wt=(0,pn.on)(t,m,r),Nt=M;N&&VA(Wt,m,G,he,ke,tt,Q,Ht),[this.firestore,this.persistenceEnabled$]=(0,pn.cc)(`${Wt.name}.firestore`,"AngularFirestore",Wt.name,()=>{const qt=m.runOutsideAngular(()=>Wt.firestore());if(u&&qt.settings(u),Nt&&qt.useEmulator(...Nt),o&&!sr(d)){const hn=()=>{try{return(0,On.D)(qt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Li){return"undefined"!=typeof console&&console.warn(Li),mt(!1)}};return[qt,m.runOutsideAngular(hn)]}return[qt,mt(!1)]},[u,Nt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=WA(o,r),m=this.schedulers.ngZone.run(()=>u);return new HA(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new AM(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new GA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pn.Dh),g.LFG(pn.xv,8),g.LFG(qA,8),g.LFG(SM,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(an.HU),g.LFG(zA,8),g.LFG(xM,8),g.LFG(UA,8),g.LFG(NA,8),g.LFG(OA,8),g.LFG(PA,8),g.LFG(kA,8),g.LFG(FA,8),g.LFG(LA,8),g.LFG(zC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),MM=(()=>{class n{constructor(){wM.Z.registerVersion("angularfire",an.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:qA,useValue:!0},{provide:zA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ZA]}),n})();const KA_firebase={projectId:"todo-list-angular-d64d6",appId:"1:650050191403:web:b3572567bd125cc2bdaa6e",storageBucket:"todo-list-angular-d64d6.appspot.com",locationId:"europe-west",apiKey:"AIzaSyAaCh1ucihnqOrauFdjeoxZzbI9SVqYsYA",authDomain:"todo-list-angular-d64d6.firebaseapp.com",messagingSenderId:"650050191403",measurementId:"G-D5J9MV9D9L"};class Ba extends ah.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var RM=k(9672);function YA(n,e,t){n?(0,RM.f)(t,n,e):e()}function YI(n,e){const t=(0,SC.m)(n)?n:()=>n,r=o=>o.error(t());return new mn.y(e?o=>e.schedule(r,0,o):r)}function QA(n){return new mn.y(e=>{(0,Xt.Xf)(n()).subscribe(e)})}var Gm=k(515),JA=k(727);function XA(){return(0,Mr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class PM extends mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new JA.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=JA.w0.EMPTY)}return e}refCount(){return XA()(this)}}function uh(n){return(0,Mr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,d=>{u=(0,Xt.Xf)(n(d,uh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Fi=k(5577);function m0(n,e){return(0,SC.m)(e)?(0,Fi.z)(n,e,1):(0,Fi.z)(n,1)}function YC(n){return n<=0?()=>Gm.E:(0,Mr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var Eo=k(8505);class _c{constructor(e,t){this.id=e,this.url=t}}class QC extends _c{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class y0 extends _c{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eS extends _c{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class LM extends _c{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class VM extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UM extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BM extends _c{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jM extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $M extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GM{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qM{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zM{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class WM{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qm(n){return new WM(n)}const iS="ngNavigationCancelingError";function JC(n){const e=Error("NavigationCancelingError: "+n);return e[iS]=!0,e}function KM(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Zu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!sS(n[o],e[o]))return!1;return!0}function sS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function oS(n){return Array.prototype.concat.apply([],n)}function aS(n){return n.length>0?n[n.length-1]:null}function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ku(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,On.D)(Promise.resolve(n)):mt(n)}const JM={exact:function cS(n,e,t){if(!gp(n.segments,e.segments)||!QI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cS(n.children[r],e.children[r],t))return!1;return!0},subset:dS},uS={exact:function XM(n,e){return Zu(n,e)},subset:function eR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sS(n[t],e[t]))},ignored:()=>!0};function lS(n,e,t){return JM[t.paths](n.root,e.root,t.matrixParams)&&uS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dS(n,e,t){return hS(n,e,e.segments,t)}function hS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!gp(o,t)||e.hasChildren()||!QI(o,t,r))}if(n.segments.length===t.length){if(!gp(n.segments,t)||!QI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!dS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(gp(n.segments,o)&&QI(n.segments,o,r)&&n.children[$t])&&hS(n.children[$t],e,u,r)}}function QI(n,e,t){return e.every((r,o)=>uS[t](n[o].parameters,r.parameters))}class pp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qm(this.queryParams)),this._queryParamMap}toString(){return rR.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,bi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return JI(this)}}class _0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qm(this.parameters)),this._parameterMap}toString(){return yS(this)}}function gp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class fS{}class pS{parse(e){const t=new hR(e);return new pp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${v0(e.root,!0)}`,r=function oR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${XI(t)}=${XI(o)}`).join("&"):`${XI(t)}=${XI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function iR(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const rR=new pS;function JI(n){return n.segments.map(e=>yS(e)).join("/")}function v0(n,e){if(!n.hasChildren())return JI(n);if(e){const t=n.children[$t]?v0(n.children[$t],!1):"",r=[];return bi(n.children,(o,u)=>{u!==$t&&r.push(`${u}:${v0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nR(n,e){let t=[];return bi(n.children,(r,o)=>{o===$t&&(t=t.concat(e(r,o)))}),bi(n.children,(r,o)=>{o!==$t&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===$t?[v0(n.children[$t],!1)]:[`${o}:${v0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${JI(n)}/${t[0]}`:`${JI(n)}/(${t.join("//")})`}}function gS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function XI(n){return gS(n).replace(/%3B/gi,";")}function XC(n){return gS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eD(n){return decodeURIComponent(n)}function mS(n){return eD(n.replace(/\+/g,"%20"))}function yS(n){return`${XC(n.path)}${function sR(n){return Object.keys(n).map(e=>`;${XC(e)}=${XC(n[e])}`).join("")}(n.parameters)}`}const aR=/^[^\/()?;=#]+/;function tD(n){const e=n.match(aR);return e?e[0]:""}const uR=/^[^=?&#]+/,cR=/^[^&#]+/;class hR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Jt(e,t)),r}parseSegment(){const e=tD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new _0(eD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=tD(this.remaining);o&&(r=o,this.capture(r))}e[eD(t)]=eD(r)}parseQueryParam(e){const t=function lR(n){const e=n.match(uR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function dR(n){const e=n.match(cR);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=mS(t),u=mS(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tD(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[$t]:new Jt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class _S{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return tT(e,this._root).map(t=>t.value)}}function eT(n,e){if(n===e.value)return e;for(const t of e.children){const r=eT(n,t);if(r)return r}return null}function tT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tT(n,t);if(r.length)return r.unshift(e),r}return[]}class vc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vS extends _S{constructor(e,t){super(e),this.snapshot=t,nT(this,e)}toString(){return this.snapshot.toString()}}function ES(n,e){const t=function fR(n,e){const d=new nD([],{},{},"",{},$t,e,null,n.root,-1,{});return new IS("",new vc(d,[]))}(n,e),r=new Ba([new _0("",{})]),o=new Ba({}),u=new Ba({}),d=new Ba({}),m=new Ba(""),w=new mp(r,o,d,m,u,$t,e,t.root);return w.snapshot=t.root,new vS(new vc(w,[]),t)}class mp{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>qm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>qm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function pR(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nD{constructor(e,t,r,o,u,d,m,w,C,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class IS extends _S{constructor(e,t){super(t),this.url=e,nT(this,t)}toString(){return DS(this._root)}}function nT(n,e){e.value._routerState=n,e.children.forEach(t=>nT(n,t))}function DS(n){const e=n.children.length>0?` { ${n.children.map(DS).join(", ")} } `:"";return`${n.value}${e}`}function rT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zu(e.params,t.params)||n.params.next(t.params),function YM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function iT(n,e){const t=Zu(n.params,e.params)&&function tR(n,e){return gp(n,e)&&n.every((t,r)=>Zu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iT(n.parent,e.parent))}function E0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function mR(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return E0(n,r,o);return E0(n,r)})}(n,e,t);return new vc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>E0(n,m)),d}}const r=function yR(n){return new mp(new Ba(n.url),new Ba(n.params),new Ba(n.queryParams),new Ba(n.fragment),new Ba(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>E0(n,u));return new vc(r,o)}}function rD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w0(n){return"object"==typeof n&&null!=n&&n.outlets}function sT(n,e,t,r,o){let u={};if(r&&bi(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new pp(t,u,o);const d=bS(n,e,t);return new pp(d,u,o)}function bS(n,e,t){const r={};return bi(n.children,(o,u)=>{r[u]=o===e?t:bS(o,e,t)}),new Jt(n.segments,r)}class CS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rD(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(w0);if(o&&o!==aS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function TS(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return iD(n,e,t);const r=function DR(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(w0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!SS(w,C,d))return u;r+=2}else{if(!SS(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Jt(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new Jt(n.segments.slice(r.pathIndex),n.children),iD(u,0,o)}return r.match&&0===o.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?aT(n,e,t):r.match?iD(n,0,o):aT(n,e,t)}function iD(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function IR(n){return w0(n[0])?n[0].outlets:{[$t]:n}}(t),o={};return bi(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=TS(n.children[d],e,u))}),bi(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Jt(n.segments,o)}}function aT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(w0(u)){const w=bR(u.outlets);return new Jt(r,w)}if(0===o&&rD(t[0])){r.push(new _0(n.segments[e].path,AS(t[0]))),o++;continue}const d=w0(u)?u.outlets[$t]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&rD(m)?(r.push(new _0(d,AS(m))),o+=2):(r.push(new _0(d,{})),o++)}return new Jt(r,{})}function bR(n){const e={};return bi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aT(new Jt([],{}),0,t))}),e}function AS(n){const e={};return bi(n,(t,r)=>e[r]=`${t}`),e}function SS(n,e,t){return n==t.path&&Zu(e,t.parameters)}class TR{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=zm(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),bi(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=zm(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=zm(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=zm(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new zM(u.value.snapshot))}),e.children.length&&this.forwardEvent(new GM(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(rT(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),rT(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function AR(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class uT{constructor(e,t){this.routes=e,this.module=t}}function lh(n){return"function"==typeof n}function yp(n){return n instanceof pp}const I0=Symbol("INITIAL_VALUE");function D0(){return cs(n=>function NM(...n){const e=(0,Mo.yG)(n),t=(0,Mo.jO)(n),{args:r,keys:o}=eo(n);if(0===r.length)return(0,On.D)([],e);const u=new mn.y(function OM(n,e,t=li.y){return r=>{YA(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)YA(e,()=>{const C=(0,On.D)(n[w],e);let M=!1;C.subscribe((0,yn.x)(r,N=>{u[w]=N,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>uu(o,d):li.y));return t?u.pipe(ml(t)):u}(n.map(e=>e.pipe((0,AC.q)(1),_u(I0)))).pipe(Pl((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==I0?o:(u===I0&&(r=!0),r||!1!==u&&d!==t.length-1&&!yp(u)?o:u),e)},I0),ns(e=>e!==I0),(0,Ct.U)(e=>yp(e)?e:!0===e),(0,AC.q)(1)))}class OR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new b0,this.attachRef=null}}class b0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new OR,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let lT=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new PR(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(b0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class PR{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===mp?this.route:e===b0?this.childContexts:this.parent.get(e,t)}}let xS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[lT],encapsulation:2}),n})();function MS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kR(r,FR(e,r))}}function kR(n,e){n.children&&MS(n.children,e)}function FR(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function cT(n){const e=n.children&&n.children.map(cT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=xS),t}function Yo(n){return n.outlet||$t}function RS(n,e){const t=n.filter(r=>Yo(r)===e);return t.push(...n.filter(r=>Yo(r)!==e)),t}const NS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sD(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},NS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||KM)(t,n,e);if(!u)return Object.assign({},NS);const d={};bi(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function oD(n,e,t,r,o="corrected"){if(t.length>0&&function UR(n,e,t){return t.some(r=>aD(n,e,r)&&Yo(r)!==$t)}(n,t,r)){const d=new Jt(e,function VR(n,e,t,r){const o={};o[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Yo(u)!==$t){const d=new Jt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Yo(u)]=d}return o}(n,e,r,new Jt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function BR(n,e,t){return t.some(r=>aD(n,e,r))}(n,t,r)){const d=new Jt(n.segments,function LR(n,e,t,r,o,u){const d={};for(const m of r)if(aD(n,t,m)&&!o[Yo(m)]){const w=new Jt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Yo(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function aD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function OS(n,e,t,r){return!!(Yo(n)===r||r!==$t&&aD(e,t,n))&&("**"===n.path||sD(e,n,t).matched)}function PS(n,e,t){return 0===e.length&&!n.children[t]}class uD{constructor(e){this.segmentGroup=e||null}}class kS{constructor(e){this.urlTree=e}}function C0(n){return YI(new uD(n))}function FS(n){return YI(new kS(n))}function jR(n){return YI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class GR{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=oD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,$t).pipe((0,Ct.U)(u=>this.createUrlTree(dT(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uh(u=>{if(u instanceof kS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof uD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,$t).pipe((0,Ct.U)(o=>this.createUrlTree(dT(o),e.queryParams,e.fragment))).pipe(uh(o=>{throw o instanceof uD?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Jt([],{[$t]:e}):e;return new pp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(u=>new Jt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,On.D)(o).pipe(m0(u=>{const d=r.children[u],m=RS(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Ct.U)(w=>({segment:w,outlet:u})))}),Pl((u,d)=>(u[d.outlet]=d.segment,u),{}),function kM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ns((o,u)=>n(o,u,r)):li.y,YC(1),t?oA(e):aA(()=>new BI))}())}expandSegment(e,t,r,o,u,d){return(0,On.D)(r).pipe(m0(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(uh(C=>{if(C instanceof uD)return mt(null);throw C}))),fp(m=>!!m),uh((m,w)=>{if(m instanceof BI||"EmptyError"===m.name)return PS(t,o,u)?mt(new Jt([],{})):C0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return OS(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):C0(t):C0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?FS(u):this.lineralizeSegments(r,u).pipe((0,Fi.z)(d=>{const m=new Jt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:M}=sD(t,o,u);if(!m)return C0(t);const N=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?FS(N):this.lineralizeSegments(o,N).pipe((0,Fi.z)(G=>this.expandSegment(e,t,r,G.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(N=>(r._loadedConfig=N,new Jt(o,{})))):mt(new Jt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=sD(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Fi.z)(M=>{const N=M.module,G=M.routes,{segmentGroup:Q,slicedSegments:he}=oD(t,m,w,G),ke=new Jt(Q.segments,Q.children);if(0===he.length&&ke.hasChildren())return this.expandChildren(N,G,ke).pipe((0,Ct.U)(Wt=>new Jt(m,Wt)));if(0===G.length&&0===he.length)return mt(new Jt(m,{}));const tt=Yo(r)===u;return this.expandSegment(N,ke,G,he,tt?$t:u,!0).pipe((0,Ct.U)(Gt=>new Jt(m.concat(Gt.segments),Gt.children)))})):C0(t)}getChildConfig(e,t,r){return t.children?mt(new uT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Fi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(u=>(t._loadedConfig=u,u))):function $R(n){return YI(JC(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new uT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return mt(!0);const u=o.map(d=>{const m=e.get(d);let w;if(function xR(n){return n&&lh(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!lh(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return Ku(w)});return mt(u).pipe(D0(),(0,Eo.b)(d=>{if(!yp(d))return;const m=JC(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Ct.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return mt(r);if(o.numberOfChildren>1||!o.children[$t])return jR(e.redirectTo);o=o.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new pp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return bi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return bi(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Jt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function dT(n){const e={};for(const r of Object.keys(n.children)){const u=dT(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function qR(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}class LS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lD{constructor(e,t){this.component=e,this.route=t}}function WR(n,e,t){const r=n._root;return T0(r,e?e._root:null,t,[r.value])}function cD(n,e,t){const r=function KR(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function T0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=zm(e);return n.children.forEach(d=>{(function YR(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function QR(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gp(n.url,e.url)||!Zu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iT(n,e)||!Zu(n.queryParams,e.queryParams);default:return!iT(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new LS(r)):(u.data=d.data,u._resolvedData=d._resolvedData),T0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new lD(m.outlet.component,d))}else d&&A0(e,m,o),o.canActivateChecks.push(new LS(r)),T0(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),bi(u,(d,m)=>A0(d,t.getContext(m),o)),o}function A0(n,e,t){const r=zm(n),o=n.value;bi(r,(u,d)=>{A0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new lD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class oN{}function VS(n){return new mn.y(e=>e.error(n))}class uN{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=oD(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,$t);if(null===t)return null;const r=new nD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new vc(r,t),u=new IS(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=wS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=RS(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=US(r);return function lN(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return PS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!OS(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Q=r.length>0?aS(r).parameters:{};u=new nD(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$S(e),Yo(e),e.component,e,BS(t),jS(t)+r.length,HS(e))}else{const Q=sD(t,e,r);if(!Q.matched)return null;d=Q.consumedSegments,m=Q.remainingSegments,u=new nD(d,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$S(e),Yo(e),e.component,e,BS(t),jS(t)+d.length,HS(e))}const w=function cN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=oD(t,d,m,w.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const Q=this.processChildren(w,C);return null===Q?null:[new vc(u,Q)]}if(0===w.length&&0===M.length)return[new vc(u,[])];const N=Yo(e)===o,G=this.processSegment(w,C,M,N?$t:o);return null===G?null:[new vc(u,G)]}}function dN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function US(n){const e=[],t=new Set;for(const r of n){if(!dN(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=US(r.children);e.push(new vc(r.value,o))}return e.filter(r=>!t.has(r))}function BS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function $S(n){return n.data||{}}function HS(n){return n.resolve||{}}function GS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hT(n){return cs(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,Ct.U)(()=>e)):mt(e)})}class vN extends class _N{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fT=new g.OlP("ROUTES");class qS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new uT(oS(d.injector.get(fT,void 0,g.XFs.Self|g.XFs.Optional)).map(cT),d)}),uh(u=>{throw t._loader$=void 0,u}));return t._loader$=new PM(o,()=>new ah.x).pipe(XA()),t._loader$}loadModuleFactory(e){return Ku(e()).pipe((0,Fi.z)(t=>t instanceof g.YKP?mt(t):(0,On.D)(this.compiler.compileModuleAsync(t))))}}class wN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function IN(n){throw n}function DN(n,e,t){return e.parse("/")}function zS(n,e){return mt(null)}const bN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wo=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ah.x,this.errorHandler=IN,this.malformedUriErrorHandler=DN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zS,afterPreactivation:zS},this.urlHandlingStrategy=new wN,this.routeReuseStrategy=new vN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function QM(){return new pp(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qS(d,m,G=>this.triggerEvent(new tS(G)),G=>this.triggerEvent(new nS(G))),this.routerState=ES(this.currentUrlTree,this.rootComponentType),this.transitions=new Ba({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ns(o=>0!==o.id),(0,Ct.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),cs(o=>{let u=!1,d=!1;return mt(o).pipe((0,Eo.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cs(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return WS(m.source)&&(this.browserUrlTree=m.extractedUrl),mt(m).pipe(cs(N=>{const G=this.transitions.getValue();return r.next(new QC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),G!==this.transitions.getValue()?Gm.E:Promise.resolve(N)}),function zR(n,e,t,r){return cs(o=>function HR(n,e,t,r,o){return new GR(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ct.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Eo.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function hN(n,e,t,r,o){return(0,Fi.z)(u=>function aN(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new uN(n,e,t,r,o,u).recognize();return null===d?VS(new oN):mt(d)}catch(d){return VS(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ct.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Eo.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const G=new VM(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:Q,source:he,restoredState:ke,extras:tt}=m,Ht=new QC(G,this.serializeUrl(Q),he,ke);r.next(Ht);const Gt=ES(Q,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},m),{targetSnapshot:Gt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Gm.E}),hT(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,Eo.b)(m=>{const w=new UM(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ct.U)(m=>Object.assign(Object.assign({},m),{guards:WR(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function JR(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function XR(n,e,t,r){return(0,On.D)(n).pipe((0,Fi.z)(o=>function sN(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(m=>{const w=cD(m,e,o);let C;if(function NR(n){return n&&lh(n.canDeactivate)}(w))C=Ku(w.canDeactivate(n,e,t,r));else{if(!lh(w))throw new Error("Invalid CanDeactivate guard");C=Ku(w(n,e,t,r))}return C.pipe(fp())})).pipe(D0()):mt(!0)}(o.component,o.route,t,e,r)),fp(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Fi.z)(m=>m&&function SR(n){return"boolean"==typeof n}(m)?function eN(n,e,t,r){return(0,On.D)(e).pipe(m0(o=>jh(function nN(n,e){return null!==n&&e&&e(new HM(n)),mt(!0)}(o.route.parent,r),function tN(n,e){return null!==n&&e&&e(new qM(n)),mt(!0)}(o.route,r),function iN(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function ZR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>QA(()=>mt(d.guards.map(w=>{const C=cD(w,d.node,t);let M;if(function RR(n){return n&&lh(n.canActivateChild)}(C))M=Ku(C.canActivateChild(r,n));else{if(!lh(C))throw new Error("Invalid CanActivateChild guard");M=Ku(C(r,n))}return M.pipe(fp())})).pipe(D0())));return mt(u).pipe(D0())}(n,o.path,t),function rN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const o=r.map(u=>QA(()=>{const d=cD(u,e,t);let m;if(function MR(n){return n&&lh(n.canActivate)}(d))m=Ku(d.canActivate(e,n));else{if(!lh(d))throw new Error("Invalid CanActivate guard");m=Ku(d(e,n))}return m.pipe(fp())}));return mt(o).pipe(D0())}(n,o.route,t))),fp(o=>!0!==o,!0))}(r,u,n,e):mt(m)),(0,Ct.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Eo.b)(m=>{if(yp(m.guardsResult)){const C=JC(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new BM(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),ns(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),hT(m=>{if(m.guards.canActivateChecks.length)return mt(m).pipe((0,Eo.b)(w=>{const C=new jM(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),cs(w=>{let C=!1;return mt(w).pipe(function fN(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return mt(t);let u=0;return(0,On.D)(o).pipe(m0(d=>function pN(n,e,t,r){return function gN(n,e,t,r){const o=GS(n);if(0===o.length)return mt({});const u={};return(0,On.D)(o).pipe((0,Fi.z)(d=>function mN(n,e,t,r){const o=cD(n,e,r);return Ku(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Eo.b)(m=>{u[d]=m}))),YC(1),(0,Fi.z)(()=>GS(u).length===o.length?mt(u):Gm.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),wS(n,t).resolve),null)))}(d.route,r,n,e)),(0,Eo.b)(()=>u++),YC(1),(0,Fi.z)(d=>u===o.length?mt(t):Gm.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Eo.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Eo.b)(w=>{const C=new $M(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),hT(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,Ct.U)(m=>{const w=function gR(n,e,t){const r=E0(n,e._root,t?t._root:void 0);return new vS(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Eo.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new TR(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Eo.b)({next(){u=!0},complete(){u=!0}}),function FM(n){return(0,Mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),uh(m=>{if(d=!0,function ZM(n){return n&&n[iS]}(m)){const w=yp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new eS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||WS(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new LM(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Gm.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){MS(t),this.config=t.map(cT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,M=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function _R(n,e,t,r,o){if(0===t.length)return sT(e.root,e.root,e.root,r,o);const u=function vR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new CS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return bi(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new CS(t,e,r)}(t);if(u.toRoot())return sT(e.root,e.root,new Jt([],{}),r,o);const d=function ER(n,e,t){if(n.isAbsolute)return new oT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new oT(u,u===e.root,0)}const r=rD(n.commands[0])?0:1;return function wR(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new oT(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?iD(d.segmentGroup,d.index,u.commands):TS(d.segmentGroup,d.index,u.commands);return sT(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=yp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function TN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},bN):!1===r?Object.assign({},CN):r,yp(t))return lS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return lS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new y0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,M,N;d?(C=d.resolve,M=d.reject,N=d.promise):N=new Promise((he,ke)=>{C=he,M=ke});const G=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Q=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Q=0,this.setTransition({id:G,targetPageId:Q,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(he=>Promise.reject(he))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new eS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function WS(n){return"imperative"!==n}let Wm=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new ah.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Zm(this.skipLocationChange),replaceUrl:Zm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zm(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(wo),g.Y36(mp),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function Zm(n){return""===n||!!n}class ZS{}class KS{preload(e,t){return mt(null)}}let YS=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new qS(o,r,w=>t.triggerEvent(new tS(w)),w=>t.triggerEvent(new nS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(ns(t=>t instanceof y0),m0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,On.D)(o).pipe((0,Lo.J)(),(0,Ct.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Fi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wo),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(ZS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),gT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof QC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof y0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _p=new g.OlP("ROUTER_CONFIGURATION"),QS=new g.OlP("ROUTER_FORROOT_GUARD"),MN=[_e,{provide:fS,useClass:pS},{provide:wo,useFactory:function kN(n,e,t,r,o,u,d={},m,w){const C=new wo(null,n,e,t,r,o,oS(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function FN(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(M=>{var N,G;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(G=console.groupEnd)||void 0===G||G.call(console)}),C},deps:[fS,b0,_e,g.zs3,g.Sil,fT,_p,[class EN{},new g.FiY],[class yN{},new g.FiY]]},b0,{provide:mp,useFactory:function LN(n){return n.routerState.root},deps:[wo]},YS,KS,class xN{preload(e,t){return t().pipe(uh(()=>mt(null)))}},{provide:_p,useValue:{enableTracing:!1}}];function RN(){return new g.PXZ("Router",wo)}let JS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[MN,XS(t),{provide:QS,useFactory:PN,deps:[[wo,new g.FiY,new g.tp0]]},{provide:_p,useValue:r||{}},{provide:pe,useFactory:ON,deps:[fe,[new g.tBr(Ke),new g.FiY],_p]},{provide:gT,useFactory:NN,deps:[wo,Ya,_p]},{provide:ZS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:KS},{provide:g.PXZ,multi:!0,useFactory:RN},[mT,{provide:g.ip1,multi:!0,useFactory:VN,deps:[mT]},{provide:ex,useFactory:UN,deps:[mT]},{provide:g.tb,multi:!0,useExisting:ex}]]}}static forChild(t){return{ngModule:n,providers:[XS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(QS,8),g.LFG(wo,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function NN(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gT(n,e,t)}function ON(n,e,t={}){return t.useHash?new De(n,e):new Ge(n,e)}function PN(n){return"guarded"}function XS(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:fT,multi:!0,useValue:n}]}let mT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ah.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(wo),d=this.injector.get(_p);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(_p),o=this.injector.get(YS),u=this.injector.get(gT),d=this.injector.get(wo),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function VN(n){return n.appInitializer.bind(n)}function UN(n){return n.bootstrapListener.bind(n)}const ex=new g.OlP("Router Initializer");let yT=(()=>{class n{constructor(t){this.firestoreDatabase=t}getTodosFirestore(){return this.firestoreDatabase.collection("todos").snapshotChanges()}getTodoFirestore(t){return this.firestoreDatabase.collection("todos").doc(t).valueChanges()}getTodosWorkInProgressFirestore(){return this.firestoreDatabase.collection("todos",t=>t.where("completed","==",!1)).snapshotChanges()}addTodoFirestore(t){return new Promise(r=>{this.firestoreDatabase.collection("todos").add(t).then(o=>{},o=>r(o))})}deleteTodoFirestore(t){return this.firestoreDatabase.collection("todos").doc(t.payload.doc.id).delete()}updateTodoFirestore(t,r){return this.firestoreDatabase.collection("todos").doc(t).set({title:r.title,description:r.description,completed:r.completed},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ZA))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",3)(1,"div",4)(2,"label",5),g._uU(3,"T\xedtulo:"),g.qZA(),g.TgZ(4,"input",6),g.NdJ("ngModelChange",function(o){return g.CHM(t),g.oxw().todo.title=o}),g.qZA()(),g.TgZ(5,"div",4)(6,"label",7),g._uU(7,"Descripci\xf3n: "),g.qZA(),g.TgZ(8,"input",8),g.NdJ("ngModelChange",function(o){return g.CHM(t),g.oxw().todo.description=o}),g.qZA()(),g.TgZ(9,"div",4)(10,"label",9),g._uU(11,"Completado"),g.qZA(),g.TgZ(12,"input",10),g.NdJ("ngModelChange",function(o){return g.CHM(t),g.oxw().todo.completed=o}),g.qZA()(),g.TgZ(13,"div",11)(14,"button",12),g.NdJ("click",function(){return g.CHM(t),g.oxw().save()}),g.TgZ(15,"span"),g._uU(16,"Guardar"),g.qZA()(),g.TgZ(17,"button",13),g.NdJ("click",function(){return g.CHM(t),g.oxw().goBack()}),g.TgZ(18,"span"),g._uU(19,"Atr\xe1s"),g.qZA()()()()}if(2&n){const t=g.oxw();g.xp6(4),g.Q6J("ngModel",t.todo.title),g.xp6(4),g.Q6J("ngModel",t.todo.description),g.xp6(4),g.Q6J("ngModel",t.todo.completed)}}let $N=(()=>{class n{constructor(t,r,o){this.route=t,this.todoService=r,this.location=o}ngOnInit(){this.getTodo()}getTodo(){const t=String(this.route.snapshot.paramMap.get("id"));this.id=t,this.todoService.getTodoFirestore(t).subscribe(r=>this.todo=r)}goBack(){this.location.back()}save(){this.todo&&(this.todoService.updateTodoFirestore(this.id,this.todo),this.goBack())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(mp),g.Y36(yT),g.Y36(_e))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-todo-details"]],decls:3,vars:1,consts:[[1,"container"],[1,"row"],["class","todo-card card mx-2 my-2 p-5",4,"ngIf"],[1,"todo-card","card","mx-2","my-2","p-5"],[1,"mb-2"],["for","todo-title"],["type","text","id","todo-title","placeholder","title",1,"w-100",3,"ngModel","ngModelChange"],["for","todo-description"],["type","text","id","todo-description","placeholder","description",1,"w-100",3,"ngModel","ngModelChange"],["for","todo-completed",1,"me-2"],["type","checkbox","id","todo-completed",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","mb-2"],["type","button",3,"click"],["type","button",1,"ms-2",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"section",0)(1,"div",1),g.YNc(2,jN,20,3,"div",2),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("ngIf",r.todo))},directives:[Vr,No,Il,Kc,Cr],styles:[""]}),n})();function HN(n,e){1&n&&(g.TgZ(0,"h6",25),g._UZ(1,"i",26),g.qZA())}function GN(n,e){1&n&&(g.TgZ(0,"h6",25),g._UZ(1,"i",27),g.qZA())}function qN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"h5",19),g._uU(4),g.qZA(),g.YNc(5,HN,2,0,"h6",20),g.YNc(6,GN,2,0,"h6",20),g.TgZ(7,"p",21),g._uU(8),g.qZA(),g.TgZ(9,"div",22)(10,"button",23)(11,"span"),g._uU(12,"Editar"),g.qZA()(),g.TgZ(13,"button",24),g.NdJ("click",function(){const u=g.CHM(t).$implicit;return g.oxw().delete(u)}),g.TgZ(14,"span"),g._uU(15,"Eliminar"),g.qZA()()()()()()}if(2&n){const t=e.$implicit;g.xp6(4),g.Oqu(t.payload.doc.data().title),g.xp6(1),g.Q6J("ngIf",1==t.payload.doc.data().completed),g.xp6(1),g.Q6J("ngIf",0==t.payload.doc.data().completed),g.xp6(2),g.Oqu(t.payload.doc.data().description),g.xp6(2),g.MGl("routerLink","/details/",t.payload.doc.id,"")}}let zN=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.getTodos()}getTodos(){this.todoService.getTodosFirestore().subscribe(t=>this.todos=t)}add(t,r,o){t=t.trim(),r=r.trim(),t&&r&&this.todoService.addTodoFirestore({title:t,description:r,completed:o})}delete(t){this.todoService.deleteTodoFirestore(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(yT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-todos"]],decls:24,vars:1,consts:[[1,"container"],[1,"row"],[1,"todo-card","card","my-2","p-5"],[1,"mb-2"],["for","new-todo-title"],["type","text","id","new-todo-title","required","",1,"w-100"],["todoTitle",""],["for","new-todo-description"],["type","text","id","new-todo-description","required","",1,"w-100"],["todoDescription",""],["for","new-todo-title",1,"me-2"],["type","checkbox","id","new-todo-completed"],["todoCompleted",""],["type","button",3,"click"],[1,"row","gy-3","mt-3"],["class","col-12 col-sm-6 col-md-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4"],[1,"todo-card","card"],[1,"card-body","p-4","h-100","d-flex","flex-column","justify-content-between","align-items-start"],[1,"card-title","w-100"],["class","card-subtitle mb-2 text-muted",4,"ngIf"],[1,"card-text","w-100"],[1,"d-flex","flex-row","justify-content-start","align-items-end"],["type","button",3,"routerLink"],["type","button",1,"ms-2",3,"click"],[1,"card-subtitle","mb-2","text-muted"],[1,"bx","bxs-check-circle","todo-icon"],[1,"bx","bxs-circle-three-quarter","todo-icon"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._uU(5,"Titulo"),g.qZA(),g._UZ(6,"input",5,6),g.qZA(),g.TgZ(8,"div",3)(9,"label",7),g._uU(10,"Descripci\xf3n"),g.qZA(),g._UZ(11,"input",8,9),g.qZA(),g.TgZ(13,"div",3)(14,"label",10),g._uU(15,"Completado"),g.qZA(),g._UZ(16,"input",11,12),g.qZA(),g.TgZ(18,"button",13),g.NdJ("click",function(){g.CHM(o);const d=g.MAs(7),m=g.MAs(12),w=g.MAs(17);return r.add(d.value,m.value,w.checked),d.value="",m.value="",w.checked=!1}),g.TgZ(19,"span"),g._uU(20,"A\xf1adir tarea"),g.qZA()()()()(),g.TgZ(21,"section",0)(22,"div",14),g.YNc(23,qN,16,5,"div",15),g.qZA()()}2&t&&(g.xp6(23),g.Q6J("ngForOf",r.todos))},directives:[Qn,Vr,Wm],styles:[""]}),n})();function WN(n,e){if(1&n&&(g.TgZ(0,"div",3)(1,"div",4)(2,"h5",5),g._uU(3),g.qZA(),g.TgZ(4,"h6",6),g._UZ(5,"i",7),g.qZA(),g.TgZ(6,"p",8),g._uU(7),g.qZA()()()),2&n){const t=e.$implicit;g.MGl("routerLink","/details/",t.payload.doc.id,""),g.xp6(3),g.Oqu(t.payload.doc.data().title),g.xp6(4),g.Oqu(t.payload.doc.data().description)}}const ZN=[{path:"todos",component:zN},{path:"details/:id",component:$N},{path:"dashboard",component:(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.getTodos()}getTodos(){this.todoService.getTodosWorkInProgressFirestore().subscribe(t=>this.todos=t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(yT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"container","dashboard"],[1,"row"],["class","todo-card card mx-2 my-2",3,"routerLink",4,"ngFor","ngForOf"],[1,"todo-card","card","mx-2","my-2",3,"routerLink"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"bx","bxs-circle-three-quarter"],[1,"card-text"]],template:function(t,r){1&t&&(g.TgZ(0,"section",0)(1,"div",1),g.YNc(2,WN,8,3,"div",2),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("ngForOf",r.todos))},directives:[Qn,Wm],styles:[".dashboard[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},{path:"",redirectTo:"/dashboard",pathMatch:"full"}];let KN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[JS.forRoot(ZN)],JS]}),n})(),YN=(()=>{class n{constructor(){this.title="ToDoList-Angular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:20,vars:0,consts:[[1,"app","d-flex","flex-column","justify-content-between"],["aria-label","navbar",1,"navbar","navbar-dark","bg-dark","navbar-home"],["href","#",1,"navbar-brand","ms-2"],[1,"bx","bx-task"],[1,"bx","bxl-firebase"],["aria-label","navbar",1,"d-flex","justify-content-center","mt-4"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","mb-2"],["routerLink","/dashboard"],["routerLink","/todos",1,"mt-sm-0","mt-2","ms-sm-2"],[1,"footer-home","mt-4"],[1,"card","text-center"],[1,"card-header"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"main")(2,"nav",1)(3,"a",2),g._uU(4," ToDo List "),g._UZ(5,"i",3)(6,"i",4),g.qZA()(),g.TgZ(7,"nav",5)(8,"div",6)(9,"button",7)(10,"span"),g._uU(11,"Tareas en progreso"),g.qZA()(),g.TgZ(12,"button",8)(13,"span"),g._uU(14,"Lista de tareas"),g.qZA()()()(),g._UZ(15,"router-outlet"),g.TgZ(16,"footer",9)(17,"div",10)(18,"div",11),g._uU(19," \xa9 Joaquin Javier Pastore Barrios "),g.qZA()()()()())},directives:[Wm,lT],styles:[".navbar-home[_ngcontent-%COMP%]{background-color:#2c384a!important;box-shadow:0 6px 24px #0003}.navbar-brand[_ngcontent-%COMP%]{color:#ffa000;font-weight:700;font-size:1.5rem}.app[_ngcontent-%COMP%]{min-height:100vh}"]}),n})(),QN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[YN]}),n.\u0275inj=g.cJS({providers:[],imports:[[oa,Ol,KN,pn.hO.initializeApp(KA_firebase),MM]]}),n})();(0,g.G48)(),ol().bootstrapModule(QN).catch(n=>console.error(n))},5867:(nt,Ce,k)=>{k.d(Ce,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=k(9681);(0,g.registerVersion)("firebase","9.6.11","app")},127:(nt,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.11","app-compat")},820:(nt,Ce,k)=>{k.r(Ce);var g=k(5861),Z=k(3942),O=k(2090),ue=k(9681),J=k(655),ge=k(1877),se=k(4859);const Me=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new ge.Yd("@firebase/auth");function Ge(y,...h){Ke.logLevel<=ge.in.ERROR&&Ke.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Be(y,...h)}function _e(y,...h){return Be(y,...h)}function ve(y,h,p){const v=Object.assign(Object.assign({},Pe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return pe.create(y,...h)}function te(y,h,...p){if(!y)throw Be(h,...p)}function q(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ge(h),new Error(h)}function re(y,h){y||q(h)}const me=new Map;function ie(y){re(y instanceof Function,"Expected a class definition");let h=me.get(y);return h?(re(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,me.set(y,h),h)}function _t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Zt(){return"http:"===Mn()||"https:"===Mn()}function Mn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,p){this.shortDelay=h,this.longDelay=p,re(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,h){re(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class fi{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vi=new sn(3e4,6e4);function Kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Ft(y,h,p,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h,p,v,T={}){return Xr(y,T,(0,g.Z)(function*(){let R={},$={};v&&("GET"===h?$=v:R={body:JSON.stringify(v)});const ne=(0,O.xO)(Object.assign({key:y.config.apiKey},$)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),fi.fetch()(br(y,y.config.apiHost,p,ne),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Xr(y,h,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},en),h);try{const T=new Ui(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const $=yield R.json();if("needConfirmation"in $)throw Bi(y,"account-exists-with-different-credential",$);if(R.ok&&!("errorMessage"in $))return $;{const ne=R.ok?$.errorMessage:$.error.message,[Ve,Ye]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Bi(y,"credential-already-in-use",$);if("EMAIL_EXISTS"===Ve)throw Bi(y,"email-already-in-use",$);const ct=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw ve(y,ct,Ye);De(y,ct)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,h,p,v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(y,h,p,v,T={}){const R=yield Ft(y,h,p,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function br(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?on(y.config,T):`${y.config.apiScheme}://${T}`}class Ui{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Vi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bi(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=_e(y,h,v);return T.customData._tokenResponse=p,T}function Lr(){return(Lr=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Zn(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ei(y,h){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Qo(){return(Qo=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=et(v);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,$=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:fn(Lt(T.auth_time)),issuedAtTime:fn(Lt(T.iat)),expirationTime:fn(Lt(T.exp)),signInProvider:$||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Lt(y){return 1e3*Number(y)}function et(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Ge("Failed to decode base64 JWT payload"),null)}catch(T){return Ge("Caught error parsing JWT payload as JSON",T),null}}function nr(y,h){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class pr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rr(y){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield nr(y,ei(p,{idToken:v}));te(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const $=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?be(R.providerUserInfo):[],ne=qe(y.providerData,$),ct=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ne?void 0:ne.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ne,metadata:new pr(R.createdAt,R.lastLoginAt),isAnonymous:ct};Object.assign(y,it)})).apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield rr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function qe(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function be(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,g.Z)(function*(y,h){const p=yield Xr(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,$=br(y,T,"/v1/token",`key=${R}`),ne=yield y._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",fi.fetch()($,{method:"POST",headers:ne,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function gt(y){const h=et(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return te(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:$}=yield function Ze(y,h){return ut.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number($))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,$=new Ot;return v&&(te("string"==typeof v,"internal-error",{appName:h}),$.refreshToken=v),T&&(te("string"==typeof T,"internal-error",{appName:h}),$.accessToken=T),R&&(te("number"==typeof R,"internal-error",{appName:h}),$.expirationTime=R),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return q("not implemented")}}function St(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new pr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield nr(p,p.stsTokenManager.getToken(p.auth,h));return te(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function fs(y){return Qo.apply(this,arguments)}(this,h)}reload(){return function gr(y){return Rt.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield rr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield nr(h,function ot(y,h){return Lr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,$,ne,Ve,Ye,ct;const it=null!==(v=p.displayName)&&void 0!==v?v:void 0,Tn=null!==(T=p.email)&&void 0!==T?T:void 0,Ei=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,wa=null!==($=p.photoURL)&&void 0!==$?$:void 0,Ia=null!==(ne=p.tenantId)&&void 0!==ne?ne:void 0,Eu=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,wr=null!==(Ye=p.createdAt)&&void 0!==Ye?Ye:void 0,Gh=null!==(ct=p.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:kn,emailVerified:Ll,isAnonymous:id,providerData:Vl,stsTokenManager:Ul}=p;te(kn&&Ul,h,"internal-error");const Xp=Ot.fromJSON(this.name,Ul);te("string"==typeof kn,h,"internal-error"),St(it,h.name),St(Tn,h.name),te("boolean"==typeof Ll,h,"internal-error"),te("boolean"==typeof id,h,"internal-error"),St(Ei,h.name),St(wa,h.name),St(Ia,h.name),St(Eu,h.name),St(wr,h.name),St(Gh,h.name);const sd=new U({uid:kn,auth:h,email:Tn,emailVerified:Ll,displayName:it,isAnonymous:id,photoURL:wa,phoneNumber:Ei,tenantId:Ia,stsTokenManager:Xp,createdAt:wr,lastLoginAt:Gh});return Vl&&Array.isArray(Vl)&&(sd.providerData=Vl.map(qh=>Object.assign({},qh))),Eu&&(sd._redirectEventId=Eu),sd}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new Ot;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield rr(R),R})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function de(y,h,p){return`firebase:${y}:${h}:${p}`}class K{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=de(this.userKey,T.apiKey,R),this.fullPersistenceKey=de("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new K(ie(H),h,v);const T=(yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=T[0]||ie(H);const $=de(v,h.config.apiKey,h.name);let ne=null;for(const Ye of p)try{const ct=yield Ye._get($);if(ct){const it=U._fromJSON(h,ct);Ye!==R&&(ne=it),R=Ye;break}}catch(ct){}const Ve=T.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Ve.length?(R=Ve[0],ne&&(yield R._set($,ne.toJSON())),yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ct){if(ct!==R)try{yield ct._remove($)}catch(it){}});return function(ct){return Ye.apply(this,arguments)}}())),new K(R,h,v)):new K(R,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Vt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ht(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Tt(h))return"Blackberry";if(ln(h))return"Webos";if(jt(h))return"Safari";if((h.includes("chrome/")||mr(h))&&!h.includes("edge/"))return"Chrome";if(Dn(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ht(y=(0,O.z$)()){return/firefox\//i.test(y)}function jt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function mr(y=(0,O.z$)()){return/crios\//i.test(y)}function Vt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Dn(y=(0,O.z$)()){return/android/i.test(y)}function Tt(y=(0,O.z$)()){return/blackberry/i.test(y)}function ln(y=(0,O.z$)()){return/webos/i.test(y)}function Yn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ji(y=(0,O.z$)()){return Yn(y)||Dn(y)||ln(y)||Tt(y)||/windows phone/i.test(y)||Vt(y)}function Xo(y,h=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${v}`}class ti{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield K.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch($){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,$=null==T?void 0:T._redirectEventId,ne=yield p.tryRedirectSignIn(h);(!R||R===$)&&(null==ne?void 0:ne.user)&&(T=ne.user)}return T?T._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield rr(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function dt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&te(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ie(h)||p._popupRedirectResolver;te(v,p,"argument-error"),p.redirectPersistenceManager=yield K.create(p,[ie(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),$=this._isInitialized?Promise.resolve():this._initializationPromise;return te($,this,"internal-error"),$.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Re(y){return(0,O.m9)(y)}class At{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ir(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ln(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class tn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return q("not implemented")}_getIdTokenResponse(h){return q("not implemented")}_linkToIdToken(h,p){return q("not implemented")}_getReauthenticationResolver(h){return q("not implemented")}}function Rn(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:resetPassword",Kt(y,h))})).apply(this,arguments)}function bt(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(y,h){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:update",Kt(y,h))})).apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPassword",Kt(y,h))})).apply(this,arguments)}function $i(y,h){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:sendOobCode",Kt(y,h))})).apply(this,arguments)}function Vr(y,h){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(y,h){return $i(y,h)})).apply(this,arguments)}function $a(y,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(y,h){return $i(y,h)})).apply(this,arguments)}function pi(y,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h){return $i(y,h)})).apply(this,arguments)}function Ec(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return $i(y,h)})).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}function wc(){return(wc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}class qa extends tn{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new qa(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new qa(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ms(y,h){return Qn.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ga(y,h){return Ur.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return bt(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function ch(y,h){return wc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Vn(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithIdp",Kt(y,h))})).apply(this,arguments)}class Gi extends tn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const $=new Gi(v,T);return $.idToken=R.idToken||void 0,$.accessToken=R.accessToken||void 0,$.secret=R.secret,$.nonce=R.nonce,$.pendingToken=R.pendingToken||null,$}_getIdTokenResponse(h){return Vn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Vn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Vn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function wp(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,h))})).apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h))})).apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,h){const p=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h));if(p.temporaryProof)throw Bi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Dp={USER_NOT_FOUND:"user-not-found"};function Cc(){return(Cc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Dp)})).apply(this,arguments)}class Do extends tn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Do({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Do({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Yu(y,h){return _s.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Ip(y,h){return bc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function bp(y,h){return Cc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new Do({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class zs{constructor(h){var p,v,T,R,$,ne;const Ve=(0,O.zd)((0,O.pd)(h)),Ye=null!==(p=Ve.apiKey)&&void 0!==p?p:null,ct=null!==(v=Ve.oobCode)&&void 0!==v?v:null,it=function Km(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);te(Ye&&ct&&it,"argument-error"),this.apiKey=Ye,this.operation=it,this.code=ct,this.continueUrl=null!==(R=Ve.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==($=Ve.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(ne=Ve.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const p=function za(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new zs(p)}catch(v){return null}}}let Qu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return qa._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=zs.parseLink(v);return te(T,"argument-error"),qa._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Br extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class bo extends Br{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return te("providerId"in p&&"signInMethod"in p,"argument-error"),Gi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return bo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return bo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:$,providerId:ne}=h;if(!v&&!T&&!p&&!R||!ne)return null;try{return new bo(ne)._credential({idToken:p,accessToken:v,nonce:$,pendingToken:R})}catch(Ve){return null}}}let Ws=(()=>{class y extends Br{constructor(){super("facebook.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ta=(()=>{class y extends Br{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Tc=(()=>{class y extends Br{constructor(){super("github.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Co extends tn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Vn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Vn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Vn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new Co(v,R):null}static _create(h,p){return new Co(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends vs{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ri.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ri.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Co.fromJSON(h);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Co._create(v,p)}catch(T){return null}}}let Wa=(()=>{class y extends Br{constructor(){super("twitter.com")}static credential(p,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Za(y,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signUp",Kt(y,h))})).apply(this,arguments)}class sr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(h,v,T),$=hh(v);return new sr({user:R,providerId:$,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=hh(v);return new sr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function hh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ac(){return(Ac=(0,g.Z)(function*(y){var h;const p=Re(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new sr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Za(p,{returnSecureToken:!0}),T=yield sr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ya extends O.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ya.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new Ya(h,p,v,T)}}function Qa(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ya._fromErrorAndOperation(y,R,h,v):R})}function qi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ju(){return(Ju=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield ws(!0,p,h);const{providerUserInfo:v}=yield Zn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=qi(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function dn(y,h){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(y,h,p=!1){const v=yield nr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return sr._forOperation(y,"link",v)})).apply(this,arguments)}function ws(y,h,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(y,h,p){yield rr(h);const T=!1===y?"provider-already-linked":"no-such-provider";te(qi(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Sc(y,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield nr(y,Qa(v,T,h,y),p);te(R.idToken,v,"internal-error");const $=et(R.idToken);te($,v,"internal-error");const{sub:ne}=$;return te(y.uid===ne,v,"user-mismatch"),sr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Ks(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield Qa(y,v,h),R=yield sr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Nn(y,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h){return Ks(Re(y),h)})).apply(this,arguments)}function gi(y,h){return _r.apply(this,arguments)}function _r(){return(_r=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield ws(!1,p,h.providerId),dn(p,h)})).apply(this,arguments)}function Is(y,h){return zi.apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h){return Sc((0,O.m9)(y),h)})).apply(this,arguments)}function Ja(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=Re(y),v=yield Ja(p,{token:h,returnSecureToken:!0}),T=yield sr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Xa._fromServerResponse(h,p):De(h,"internal-error")}}class Xa extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Xa(p)}}function ia(y,h,p){var v;te((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function tu(){return(tu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&ia(v,T,p),yield $a(v,T)})).apply(this,arguments)}function Xu(){return(Xu=(0,g.Z)(function*(y,h,p){yield Rn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,h){yield qs((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function xt(y,h){return tl.apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Rn(p,{oobCode:h}),T=v.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,p,"internal-error");default:te(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=lt._fromServerResponse(Re(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h){const{data:p}=yield xt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h,p){const v=Re(y),T=yield Za(v,{returnSecureToken:!0,email:h,password:p}),R=yield sr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};te(p.handleCodeInApp,v,"argument-error"),p&&ia(v,T,p),yield pi(v,T)})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=Qu.credentialWithLink(h,p||_t());return te(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Nn(v,T)})).apply(this,arguments)}function or(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:createAuthUri",Kt(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:Zt()?_t():"http://localhost"},{signinMethods:T}=yield or((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function sl(){return(sl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ia(p.auth,T,h);const{email:R}=yield Vr(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ia(v.auth,R,p);const{email:$}=yield Ec(v.auth,R);$!==y.email&&(yield y.reload())})).apply(this,arguments)}function ol(y,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h){return Ft(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function al(){return(al=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},$=yield nr(v,ol(v.auth,R));v.displayName=$.displayName||null,v.photoURL=$.photoUrl||null;const ne=v.providerData.find(({providerId:Ve})=>"password"===Ve);ne&&(ne.displayName=v.displayName,ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary($)})).apply(this,arguments)}function ll(y,h,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const $=yield nr(y,bt(v,R));yield y._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class Qs{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Nc extends Qs{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Oc extends Qs{constructor(h,p){super(h,"facebook.com",p)}}class Js extends Nc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class As extends Qs{constructor(h,p){super(h,"google.com",p)}}class cl extends Nc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function vr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Rc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const $=null===(p=null===(h=et(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if($)return new Qs(R,"anonymous"!==$&&"custom"!==$?$:null)}if(!v)return null;switch(v){case"facebook.com":return new Oc(R,T);case"github.com":return new Js(R,T);case"google.com":return new As(R,T);case"twitter.com":return new cl(R,T,y.screenName||null);case"custom":case"anonymous":return new Qs(R,null);default:return new Qs(R,v,T)}}(p)}class Wi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Wi("enroll",h)}static _fromMfaPendingCredential(h){return new Wi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Wi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Wi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class aa{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Re(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(ne=>lt._fromServerResponse(v,ne));te(T.mfaPendingCredential,v,"internal-error");const $=Wi._fromMfaPendingCredential(T.mfaPendingCredential);return new aa($,R,function(){var ne=(0,g.Z)(function*(Ve){const Ye=yield Ve._process(v,$);delete T.mfaInfo,delete T.mfaPendingCredential;const ct=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(p.operationType){case"signIn":const it=yield sr._fromIdTokenResponse(v,p.operationType,ct);return yield v._updateCurrentUser(it.user),it;case"reauthenticate":return te(p.user,v,"internal-error"),sr._forOperation(p.user,p.operationType,ct);default:De(v,"internal-error")}});return function(Ve){return ne.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Un(y,h){return Ft(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,h))}class Zi{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Zi(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Wi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,R=yield v.getSession(),$=yield nr(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary($),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield nr(p.user,function Tp(y,h){return Ft(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:$})=>$!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch($){if("auth/user-token-expired"!==$.code)throw $}})()}}const xo=new WeakMap,fl="__sak";class Xs{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(fl,"1"),this.storage.removeItem(fl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const mn=(()=>{class y extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fc(){const y=(0,O.z$)();return jt(y)||Yn(y)}()&&function $n(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ji(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ne,Ve,Ye)=>{this.notifyListeners(ne,Ye)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(T);if(p.newValue!==ne)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const ne=this.storage.getItem(T);!v&&this.localCache[T]===ne||this.notifyListeners(T,ne)},$=this.storage.getItem(T);!function Jo(){return(0,O.w1)()&&10===document.documentMode}()||$===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Ki=(()=>{class y extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let ua=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:$,data:ne}=T.data,Ve=v.handlersMap[$];if(!(null==Ve?void 0:Ve.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:$});const Ye=Array.from(Ve).map(function(){var it=(0,g.Z)(function*(Tn){return Tn(T.origin,ne)});return function(Tn){return it.apply(this,arguments)}}()),ct=yield function gl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:R,eventType:$,response:ct})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function eo(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Lc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let $,ne;return new Promise((Ve,Ye)=>{const ct=eo("",20);R.port1.start();const it=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);ne={messageChannel:R,onMessage(Tn){const Ei=Tn;if(Ei.data.eventId===ct)switch(Ei.data.status){case"ack":clearTimeout(it),$=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Ve(Ei.data.response);break;default:clearTimeout(it),clearTimeout($),Ye(new Error("invalid_response"))}}},T.handlers.add(ne),R.port1.addEventListener("message",ne.onMessage),T.target.postMessage({eventType:h,eventId:ct,data:p},[R.port2])}).finally(()=>{ne&&T.removeMessageHandler(ne)})})()}}function Xt(){return window}function yn(){return void 0!==Xt().WorkerGlobalScope&&"function"==typeof Xt().importScripts}function xs(){return(xs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const uu="firebaseLocalStorageDb",to="firebaseLocalStorage",si="fbase_key";class Hn{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ro(y,h){return y.transaction([to],h?"readwrite":"readonly").objectStore(to)}function no(){const y=indexedDB.open(uu,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(to,{keyPath:si})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(to)?h(v):(v.close(),yield function Cr(){const y=indexedDB.deleteDatabase(uu);return new Hn(y).toPromise()}(),h(yield no()))}))})}function yl(y,h,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,h,p){const v=Ro(y,!0).put({[si]:h,value:p});return new Hn(v).toPromise()})).apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(y,h){const p=Ro(y,!1).get(h),v=yield new Hn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ms(y,h){const p=Ro(y,!0).delete(h);return new Hn(p).toPromise()}const Yi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield no()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return yn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ua._getInstance(function ml(){return yn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Ct(){return xs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Lc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Sp(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield no();return yield yl(p,fl,"1"),yield Ms(p,fl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>yl(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function No(y,h){return oi.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Ms(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries($=>{const ne=Ro($,!1).getAll();return new Hn(ne).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:$,value:ne}of v)R.add($),JSON.stringify(p.localCache[$])!==JSON.stringify(ne)&&(p.notifyListeners($,ne),T.push($));for(const $ of Object.keys(p.localCache))p.localCache[$]&&!R.has($)&&(p.notifyListeners($,null),T.push($));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Vc(y,h){return Ft(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,h))}function yi(){return(yi=(0,g.Z)(function*(y){return(yield Ft(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=_e("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function El(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function ca(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ai=1e12;class Uc{constructor(h){this.auth=h,this.counter=ai,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new lu(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||ai;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ai))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||ai))||void 0===v||v.execute(),""})()}}class lu{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cu=ca("rcb"),mh=new sn(3e4,6e4);class Bc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xt().grecaptcha}load(h,p=""){return te(function xp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Xt().grecaptcha):new Promise((v,T)=>{const R=Xt().setTimeout(()=>{T(_e(h,"network-request-failed"))},mh.get());Xt()[cu]=()=>{Xt().clearTimeout(R),delete Xt()[cu];const ne=Xt().grecaptcha;if(!ne)return void T(_e(h,"internal-error"));const Ve=ne.render;ne.render=(Ye,ct)=>{const it=Ve(Ye,ct);return this.counter++,it},this.hostLanguage=p,v(ne)},so(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:cu,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Xt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jc{load(h){return(0,g.Z)(function*(){return new Uc(h)})()}clearedOneInstance(){}}const wl="recaptcha",$c={theme:"light",type:"image"};class yh{constructor(h,p=Object.assign({},$c),v){this.parameters=p,this.type=wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jc:new Bc,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const $=ne=>{!ne||(h.tokenChangeListeners.delete($),R(ne))};h.tokenChangeListeners.add($),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Xt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){te(Zt()&&!yn(),h.auth,"internal-error"),yield function Hc(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function vl(y){return yi.apply(this,arguments)}(h.auth);te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Si{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Do._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function En(){return(En=(0,g.Z)(function*(y,h,p){const v=Re(y),T=yield Ar(v,h,(0,O.m9)(p));return new Si(T,R=>Nn(v,R))})).apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield ws(!1,v,"phone");const T=yield Ar(v.auth,h,(0,O.m9)(p));return new Si(T,R=>gi(v,R))})).apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield Ar(v.auth,h,(0,O.m9)(p));return new Si(T,R=>Is(v,R))})).apply(this,arguments)}function Ar(y,h,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(te("string"==typeof T,y,"argument-error"),te(p.type===wl,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const $=R.session;if("phoneNumber"in R)return te("enroll"===$.type,y,"internal-error"),(yield Un(y,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===$.type,y,"internal-error");const ne=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return te(ne,y,"missing-multi-factor-info"),(yield Vc(y,{mfaPendingCredential:$.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield wp(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return $}}finally{p._reset()}})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){yield dn((0,O.m9)(y),h)})).apply(this,arguments)}let qr=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Re(p)}verifyPhoneNumber(p,v){return Ar(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Do._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Do._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function zr(y,h){return h?ie(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class da extends tn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Vn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Vn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Vn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function ha(y){return Ks(y.auth,new da(y),y.bypassAuthState)}function Gc(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),Sc(p,new da(y),y.bypassAuthState)}function vh(y){return qc.apply(this,arguments)}function qc(){return(qc=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),dn(p,new da(y),y.bypassAuthState)})).apply(this,arguments)}class ui{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:$,error:ne,type:Ve}=h;if(ne)return void p.reject(ne);const Ye={auth:p.auth,requestUri:v,sessionId:T,tenantId:$||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(Ye))}catch(ct){p.reject(ct)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ha;case"linkViaPopup":case"linkViaRedirect":return vh;case"reauthViaPopup":case"reauthViaRedirect":return Gc;default:De(this.auth,"internal-error")}}resolve(h){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eh=new sn(2e3,1e4);function wh(){return(wh=(0,g.Z)(function*(y,h,p){const v=Re(y);je(y,h,vs);const T=zr(v,p);return new Xi(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=zr(v.auth,p);return new Xi(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=zr(v.auth,p);return new Xi(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Xi=(()=>{class y extends ui{constructor(p,v,T,R,$){super(p,v,R,$),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return te(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){re(1===p.filter.length,"Popup operations only handle one event");const v=eo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Eh.get())};p()}}return y.currentPopupAction=null,y})();const Er=new Map;class ga extends ui{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Er.get(p.auth._key());if(!v){try{const R=(yield function Oo(y,h){return bl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}Er.set(p.auth._key(),v)}return p.bypassAuthState||Er.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function bl(){return(bl=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function es(y,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return ie(y._redirectPersistence)}function b(y){return de("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,h,p){const v=Re(y);je(y,h,vs);const T=zr(v,p);return yield es(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=zr(v.auth,p);yield es(T,v.auth);const R=yield Po(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ut(){return(Ut=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=zr(v.auth,p);yield ws(!1,v,h.providerId),yield es(T,v.auth);const R=yield Po(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(y,h){return yield Re(y)._initializationPromise,wn(y,h,!1)})).apply(this,arguments)}function wn(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,h,p=!1){const v=Re(y),T=zr(v,h),$=yield new ga(v,T,p).execute();return $&&!p&&(delete $.user._redirectEventId,yield v._persistUserIfCurrent($.user),yield v._setRedirectUser(null,h)),$})).apply(this,arguments)}function Po(y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(function*(y){const h=eo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Wr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mp(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Mp(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vi(h))}saveEventToCache(h){this.cachedEventUids.add(vi(h)),this.lastProcessedEventTime=Date.now()}}function vi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Mp({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Tl(y){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(y,h={}){return Ft(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Dh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wc=/^https?/;function Os(){return(Os=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Tl(y);for(const p of h)try{if(Al(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Al(y){const h=_t(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const $=new URL(y);return""===$.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&$.hostname===v}if(!Wc.test(p))return!1;if(Dh.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Np=new sn(3e4,6e4);function Op(){const y=Xt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let pu=null;function Qm(y){return pu=pu||function bh(y){return new Promise((h,p)=>{var v,T,R;function $(){Op(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Op(),p(_e(y,"network-request-failed"))},timeout:Np.get()})}if(null===(T=null===(v=Xt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Xt().gapi)||void 0===R?void 0:R.load)){const ne=ca("iframefcb");return Xt()[ne]=()=>{gapi.load?$():p(_e(y,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Ve=>p(Ve))}$()}}).catch(h=>{throw pu=null,h})}(y),pu}const Ch=new sn(5e3,15e3),Fo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ya(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?on(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},T=Sl.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Pp(){return Pp=(0,g.Z)(function*(y){const h=yield Qm(y),p=Xt().gapi;return te(p,y,"internal-error"),h.open({where:document.body,url:ya(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fo,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,$){yield v.restyle({setHideOnLeave:!1});const ne=_e(y,"network-request-failed"),Ve=Xt().setTimeout(()=>{$(ne)},Ch.get());function Ye(){Xt().clearTimeout(Ve),R(v)}v.ping(Ye).then(Ye,()=>{$(ne)})});return function(R,$){return T.apply(this,arguments)}}()))}),Pp.apply(this,arguments)}const dD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function xh(y,h,p,v,T,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const $={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ue.SDK_VERSION,eventId:T};if(h instanceof vs){h.setDefaultLanguage(y.languageCode),$.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||($.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Ye]of Object.entries(R||{}))$[Ve]=Ye}if(h instanceof Br){const Ve=h.getScopes().filter(Ye=>""!==Ye);Ve.length>0&&($.scopes=Ve.join(","))}y.tenantId&&($.tid=y.tenantId);const ne=$;for(const Ve of Object.keys(ne))void 0===ne[Ve]&&delete ne[Ve];return`${function R0({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ne).slice(1)}`}const ts="webStorageSupport";class Rh extends class N0{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Rh(h)}_finalizeEnroll(h,p,v){return function Pc(y,h){return Ft(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function la(y,h){return Ft(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ny=(()=>{class y{constructor(){}static assertion(p){return Rh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var ry="@firebase/auth",Lp="0.19.12";class Vp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _a(){return window}function gu(){return(gu=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=_a();re(h.sessionId,"AuthEvent did not contain a session ID");const R=yield O0(h.sessionId),$={};return Yn()?$.ibi=T.packageName:Dn()?$.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&($.appDisplayName=T.displayName),$.sessionId=R,xh(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,$)})).apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y){const{BuildInfo:h}=_a(),p={};Yn()?p.iosBundleId=h.packageName:Dn()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Tl(y,p)})).apply(this,arguments)}function yu(){return(yu=(0,g.Z)(function*(y,h,p){const{cordova:v}=_a();let T=()=>{};try{yield new Promise((R,$)=>{let ne=null;function Ve(){var it;R();const Tn=null===(it=v.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof Tn&&Tn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ye(){ne||(ne=window.setTimeout(()=>{$(_e(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}h.addPassiveListener(Ve),document.addEventListener("resume",Ye,!1),Dn()&&document.addEventListener("visibilitychange",ct,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ct,!1),ne&&window.clearTimeout(ne)}})}finally{T()}})).apply(this,arguments)}function O0(y){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,g.Z)(function*(y){const h=P0(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function P0(y){if(re(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function iy(y){(0,ue._registerComponent)(new se.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:$}=v.options;return((ne,Ve)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:ne.name}),te(!(null==$?void 0:$.includes(":")),"argument-error",{appName:ne.name});const Ye={apiKey:R,authDomain:$,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(y)},ct=new ti(ne,Ve,Ye);return function oe(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(ie);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ct,p),ct})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new se.wA("auth-internal",h=>{const p=Re(h.getProvider("auth").getImmediate());return new Vp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(ry,Lp,function Nh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(ry,Lp,"esm2017")}("Browser");class Ml extends Wr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function oy(y){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(y){const h=yield Yc()._get(Fh(y));return h&&(yield Yc()._remove(Fh(y))),h})).apply(this,arguments)}function ay(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Yc(){return ie(mn)}function Fh(y){return de("authEvent",y.config.apiKey,y.name)}function Jc(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Vh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function ed(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function ly(y=(0,O.z$)()){return!("file:"!==ed()&&"ionic:"!==ed()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zr(){try{const y=self.localStorage,h=eo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Ol(y=(0,O.z$)()){return function hD(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function F0(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return td()&&(0,O.hl)()}return!1}function td(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uh(){return(function Zp(){return"http:"===ed()||"https:"===ed()}()||(0,O.ru)()||ly())&&!function k0(){return(0,O.b$)()||(0,O.UG)()}()&&Zr()&&!td()}function Kp(){return ly()&&"undefined"!=typeof document}function Ea(){return(Ea=(0,g.Z)(function*(){return!!Kp()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},Lo=te,Bh="persistence";function Mr(y){return _u.apply(this,arguments)}function _u(){return(_u=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Yp(),p=de(Bh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Yp(){var y;try{return(null===(y=function mt(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Pl=te;class li{constructor(){this.browserResolver=ie(class xl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=wn}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){var $;re(null===($=R.eventManagers[h._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const ne=xh(h,p,v,_t(),T);return function Kc(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),$=Math.max((window.screen.availWidth-v)/2,0).toString();let ne="";const Ve=Object.assign(Object.assign({},dD),{width:v.toString(),height:T.toString(),top:R,left:$}),Ye=(0,O.z$)().toLowerCase();p&&(ne=mr(Ye)?"_blank":p),ht(Ye)&&(h=h||"http://localhost",Ve.scrollbars="yes");const ct=Object.entries(Ve).reduce((Tn,[Ei,wa])=>`${Tn}${Ei}=${wa},`,"");if(function ja(y=(0,O.z$)()){var h;return Yn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ye)&&"_self"!==ne)return function ey(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ne),new Zc(null);const it=window.open(h||"",ne,ct);te(it,y,"popup-blocked");try{it.focus()}catch(Tn){}return new Zc(it)}(h,ne,eo())})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function Mo(y){Xt().location.href=y}(xh(h,p,v,_t(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(re(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function M0(y){return Pp.apply(this,arguments)}(h),T=new Wr(h);return v.register("authEvent",R=>(te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(ts,{type:ts},T=>{var R;const $=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[ts];void 0!==$&&p(!!$),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Rp(y){return Os.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ji()||jt()||Yn()}}),this.cordovaResolver=ie(class qp{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wn}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new Ml(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){!function Hp(y){var h,p,v,T,R,$,ne,Ve,Ye,ct;const it=_a();te("function"==typeof(null===(h=null==it?void 0:it.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==it?void 0:it.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(T=null===(v=null==it?void 0:it.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ve=null===(ne=null===($=null==it?void 0:it.cordova)||void 0===$?void 0:$.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(ct=null===(Ye=null==it?void 0:it.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const $=yield R._initialize(h);yield $.initialized(),$.resetRedirect(),function Cl(){Er.clear()}(),yield R._originValidation(h);const ne=function kh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ay(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,v,T);yield function sy(y,h){return Yc()._set(Fh(y),h)}(h,ne);const Ve=yield function jp(y,h,p){return gu.apply(this,arguments)}(h,ne,p),Ye=yield function mu(y){const{cordova:h}=_a();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Gs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ve);return function $p(y,h,p){return yu.apply(this,arguments)}(h,$,Ye)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Oh(y){return xi.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=_a(),$=setTimeout((0,g.Z)(function*(){yield oy(h),p.onEvent(Vh())}),500),ne=function(){var ct=(0,g.Z)(function*(it){clearTimeout($);const Tn=yield oy(h);let Ei=null;Tn&&(null==it?void 0:it.url)&&(Ei=function va(y,h){var p,v;const T=function Qc(y){const h=Jc(y),p=h.link?decodeURIComponent(h.link):void 0,v=Jc(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Jc(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=Jc(T),$=R.firebaseError?function Lh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ne=null===(v=null===(p=null==$?void 0:$.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ve=ne?_e(ne):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Tn,it.url)),p.onEvent(Ei||Vh())});return function(Tn){return ct.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ne);const Ve=T,Ye=`${R.packageName.toLowerCase()}://`;_a().handleOpenURL=function(){var ct=(0,g.Z)(function*(it){if(it.toLowerCase().startsWith(Ye)&&ne({url:it}),"function"==typeof Ve)try{Ve(it)}catch(Tn){console.error(Tn)}});return function(it){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=wn}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Kp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function pn(){return Ea.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Qp(y){return y.unwrap()}function ns(y){return Jp(y)}function Jp(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return qr.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ta;break;case"facebook.com":v=Ws;break;case"github.com":v=Tc;break;case"twitter.com":v=Wa;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:$,pendingToken:ne,nonce:Ve}=h;return R||$||T||ne?ne?p.startsWith("saml.")?Co._create(p,ne):Gi._fromParams({providerId:p,signInMethod:p,pendingToken:ne,idToken:T,accessToken:R}):new bo(p).credential({idToken:T,accessToken:R,rawNonce:Ve}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ae(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function L0(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Vo(y,function au(y,h){var p;const v=(0,O.m9)(y),T=h;return te(h.customData.operationType,v,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),aa._fromError(v,T)}(y,h));else if(v){const T=Jp(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:ns(p),additionalUserInfo:vr(p),user:wt.getOrCreate(T)}})}function uo(y,h){return vu.apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>ae(y,p.confirm(v))}})).apply(this,arguments)}class Vo{constructor(h,p){this.resolver=p,this.auth=function cy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ae(Qp(this.auth),this.resolver.resolveSignIn(h))}}class wt{constructor(h){this._delegate=h,this.multiFactor=function kc(y){const h=(0,O.m9)(y);return xo.has(h)||xo.set(h,Zi._fromUser(h)),xo.get(h)}(h)}static getOrCreate(h){return wt.USER_MAP.has(h)||wt.USER_MAP.set(h,new wt(h)),wt.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ae(p.auth,gi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return uo(v.auth,function du(y,h,p){return Gr.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ae(p.auth,function Ih(y,h,p){return Dl.apply(this,arguments)}(p._delegate,h,li))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Mr(Re(p.auth)),function Je(y,h,p){return function ft(y,h,p){return Ut.apply(this,arguments)}(y,h,p)}(p._delegate,h,li)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ae(p.auth,Is(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return uo(this.auth,function Tr(y,h,p){return hu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ae(this.auth,function ao(y,h,p){return pa.apply(this,arguments)}(this._delegate,h,li))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Mr(Re(p.auth)),function ee(y,h,p){return function Se(y,h,p){return ze.apply(this,arguments)}(y,h,p)}(p._delegate,h,li)})()}sendEmailVerification(h){return function mi(y,h){return sl.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function na(y,h){return Ju.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ul(y,h){return ll((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Mc(y,h){return ll((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Il(y,h){return Rs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function oa(y,h){return al.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function su(y,h,p){return ou.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wt.USER_MAP=new WeakMap;const kl=te;let rs=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;kl(T,"invalid-api-key",{appName:p.name}),kl(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?li:void 0;this._delegate=v.initialize({options:{persistence:$h(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function cn(y,h,p){const v=Re(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=ir(h),{host:$,port:ne}=function ps(y){const h=ir(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Ln(v.substr(R.length+1))}}{const[R,$]=v.split(":");return{host:R,port:Ln($)}}}(h);v.config.emulator={url:`${R}//${$}${null===ne?"":`:${ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:$,port:ne,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ai(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function el(y,h){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xt(this._delegate,p)}confirmPasswordReset(p,v){return function nu(y,h,p){return Xu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return ae(T._delegate,function So(y,h,p){return Hr.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function iu(y,h){return Ts.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function il(y,h){const p=zs.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){kl(Uh(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function vt(y,h){return Pn.apply(this,arguments)}(p._delegate,li);return v?ae(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function uy(y,h){Re(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:$,complete:ne}=We(p,v,T);return this._delegate.onAuthStateChanged(R,$,ne)}onIdTokenChanged(p,v,T){const{next:R,error:$,complete:ne}=We(p,v,T);return this._delegate.onIdTokenChanged(R,$,ne)}sendSignInLinkToEmail(p,v){return function rl(y,h,p){return xc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function eu(y,h,p){return tu.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function jh(y,h){Lo(Object.values(an).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Lo(h!==an.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Lo(h===an.NONE,y,"unsupported-persistence-type"):td()?Lo(h===an.NONE||h===an.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Lo(h===an.NONE||Zr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case an.SESSION:T=Ki;break;case an.LOCAL:T=(yield ie(Yi)._isAvailable())?Yi:mn;break;case an.NONE:T=H;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ae(this._delegate,function Ka(y){return Ac.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ae(this._delegate,Nn(this._delegate,p))}signInWithCustomToken(p){return ae(this._delegate,function Ds(y,h){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ae(this._delegate,function nl(y,h,p){return Nn((0,O.m9)(y),Qu.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ae(this._delegate,function ru(y,h,p){return Cs.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return uo(this._delegate,function _h(y,h,p){return En.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return kl(Uh(),v._delegate,"operation-not-supported-in-this-environment"),ae(v._delegate,function fa(y,h,p){return wh.apply(this,arguments)}(v._delegate,p,li))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return kl(Uh(),v._delegate,"operation-not-supported-in-this-environment"),yield Mr(v._delegate),function x(y,h,p){return function F(y,h,p){return z.apply(this,arguments)}(y,h,p)}(v._delegate,p,li)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function gn(y,h){return Ao.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=an,y})();function We(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:$=>T($&&wt.getOrCreate($)),error:h,complete:p}}function $h(y,h){const p=function nd(y,h){const p=Yp();if(!p)return[];const v=de(Bh,y,h);switch(p.getItem(v)){case an.NONE:return[H];case an.LOCAL:return[Yi,Ki];case an.SESSION:return[Ki];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Yi)&&p.push(Yi),"undefined"!=typeof window)for(const v of[mn,Ki])p.includes(v)||p.push(v);return p.includes(H)||p.push(H),p}class Et{constructor(){this.providerId="phone",this._delegate=new qr(Qp(Z.Z.auth()))}static credential(h,p){return qr.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Et.PHONE_SIGN_IN_METHOD=qr.PHONE_SIGN_IN_METHOD,Et.PROVIDER_ID=qr.PROVIDER_ID;const rd=te;class Hh{constructor(h,p,v=Z.Z.app()){var T;rd(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new yh(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dy(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new rs(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qu,FacebookAuthProvider:Ws,GithubAuthProvider:Tc,GoogleAuthProvider:ta,OAuthProvider:bo,SAMLAuthProvider:ri,PhoneAuthProvider:Et,PhoneMultiFactorGenerator:ny,RecaptchaVerifier:Hh,TwitterAuthProvider:Wa,Auth:rs,AuthCredential:tn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(Z.Z)},8306:(nt,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),Z=k(727),O=k(8822),ue=k(4671);var se=k(2416),fe=k(576),ce=k(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const pe=new Te;return pe.source=this,pe.operator=Pe,pe}subscribe(Pe,pe,Ee){const Ke=function He(Te){return Te&&Te instanceof g.Lv||function Y(Te){return Te&&(0,fe.m)(Te.next)&&(0,fe.m)(Te.error)&&(0,fe.m)(Te.complete)}(Te)&&(0,Z.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,pe,Ee);return(0,ce.x)(()=>{const{operator:Ge,source:De}=this;Ke.add(Ge?Ge.call(Ke,De):De?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(pe){Pe.error(pe)}}forEach(Pe,pe){return new(pe=j(pe))((Ee,Ke)=>{const Ge=new g.Hp({next:De=>{try{Pe(De)}catch(_e){Ke(_e),Ge.unsubscribe()}},error:Ke,complete:Ee});this.subscribe(Ge)})}_subscribe(Pe){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function ge(Te){return 0===Te.length?ue.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((pe,Ee)=>Ee(pe),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((pe,Ee)=>{let Ke;this.subscribe(Ge=>Ke=Ge,Ge=>Ee(Ge),()=>pe(Ke))})}}return Te.create=Me=>new Te(Me),Te})();function j(Te){var Me;return null!==(Me=null!=Te?Te:se.v.Promise)&&void 0!==Me?Me:Promise}},7579:(nt,Ce,k)=>{k.d(Ce,{x:()=>se});var g=k(8306),Z=k(727);const ue=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),ge=k(2806);let se=(()=>{class ce extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Y=new fe(this,this);return Y.operator=j,Y}_throwIfClosed(){if(this.closed)throw new ue}next(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(j)}})}error(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Y}=this;for(;Y.length;)Y.shift().error(j)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Y,isStopped:He,observers:Te}=this;return Y||He?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Y,thrownError:He,isStopped:Te}=this;Y?j.error(He):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ce.create=(B,j)=>new fe(B,j),ce})();class fe extends se{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Y||Y.call(j,B)}error(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Y||Y.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Y;return null!==(Y=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Y?Y:Z.Lc}}},2961:(nt,Ce,k)=>{k.d(Ce,{Hp:()=>Pe,Lv:()=>Y});var g=k(576),Z=k(727),O=k(2416),ue=k(7849);function J(){}const ge=ce("C",void 0,void 0);function ce(De,_e,ve){return{kind:De,value:_e,error:ve}}var B=k(3410),j=k(2806);class Y extends Z.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Z.Nn)(_e)&&_e.add(this)):this.destination=Ge}static create(_e,ve,je){return new Pe(_e,ve,je)}next(_e){this.isStopped?Ke(function fe(De){return ce("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ke(function se(De){return ce("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ke(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(De,_e){return He.call(De,_e)}class Me{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(je){pe(je)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(je){pe(je)}else pe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){pe(ve)}}}class Pe extends Y{constructor(_e,ve,je){let Be;if(super(),(0,g.m)(_e)||!_e)Be={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Te(_e.next,te),error:_e.error&&Te(_e.error,te),complete:_e.complete&&Te(_e.complete,te)}):Be=_e}this.destination=new Me(Be)}}function pe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,ue.h)(De)}function Ke(De,_e){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,_e))}const Ge={closed:!0,next:J,error:function Ee(De){throw De},complete:J}},727:(nt,Ce,k)=>{k.d(Ce,{Lc:()=>ge,w0:()=>J,Nn:()=>se});var g=k(576);const O=(0,k(3888).d)(ce=>function(j){ce(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Y,He)=>`${He+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ue=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Y}=this;if((0,g.m)(Y))try{Y()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{fe(Te)}catch(Me){B=null!=B?B:[],Me instanceof O?B=[...B,...Me.errors]:B.push(Me)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)fe(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ue.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ue.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ce=new J;return ce.closed=!0,ce})();const ge=J.EMPTY;function se(ce){return ce instanceof J||ce&&"closed"in ce&&(0,g.m)(ce.remove)&&(0,g.m)(ce.add)&&(0,g.m)(ce.unsubscribe)}function fe(ce){(0,g.m)(ce)?ce():ce.unsubscribe()}},2416:(nt,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ce,k)=>{k.d(Ce,{E:()=>Z});const Z=new(k(8306).y)(J=>J.complete())},8996:(nt,Ce,k)=>{k.d(Ce,{D:()=>_e});var g=k(8421),Z=k(5363),O=k(9468),ge=k(8306),fe=k(2202),ce=k(576),B=k(9672);function Y(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,B.f)(Be,je,()=>{const te=ve[Symbol.asyncIterator]();(0,B.f)(Be,je,()=>{te.next().then(q=>{q.done?Be.complete():Be.next(q.value)})},0,!0)})})}var He=k(3670),Te=k(8239),Me=k(1144),Pe=k(6495),pe=k(2206),Ee=k(4532),Ke=k(3260);function _e(ve,je){return je?function De(ve,je){if(null!=ve){if((0,He.c)(ve))return function ue(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,Me.z)(ve))return function se(ve,je){return new ge.y(Be=>{let te=0;return je.schedule(function(){te===ve.length?Be.complete():(Be.next(ve[te++]),Be.closed||this.schedule())})})}(ve,je);if((0,Te.t)(ve))return function J(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,pe.D)(ve))return Y(ve,je);if((0,Pe.T)(ve))return function j(ve,je){return new ge.y(Be=>{let te;return(0,B.f)(Be,je,()=>{te=ve[fe.h](),(0,B.f)(Be,je,()=>{let q,re;try{({value:q,done:re}=te.next())}catch(me){return void Be.error(me)}re?Be.complete():Be.next(q)},0,!0)}),()=>(0,ce.m)(null==te?void 0:te.return)&&te.return()})}(ve,je);if((0,Ke.L)(ve))return function Ge(ve,je){return Y((0,Ke.Q)(ve),je)}(ve,je)}throw(0,Ee.z)(ve)}(ve,je):(0,g.Xf)(ve)}},8421:(nt,Ce,k)=>{k.d(Ce,{Xf:()=>He});var g=k(655),Z=k(1144),O=k(8239),ue=k(8306),J=k(3670),ge=k(2206),se=k(4532),fe=k(6495),ce=k(3260),B=k(576),j=k(7849),Y=k(8822);function He(De){if(De instanceof ue.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new ue.y(_e=>{const ve=De[Y.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Z.z)(De))return function Me(De){return new ue.y(_e=>{for(let ve=0;ve<De.length&&!_e.closed;ve++)_e.next(De[ve]);_e.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new ue.y(_e=>{De.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,j.h)})}(De);if((0,ge.D)(De))return Ee(De);if((0,fe.T)(De))return function pe(De){return new ue.y(_e=>{for(const ve of De)if(_e.next(ve),_e.closed)return;_e.complete()})}(De);if((0,ce.L)(De))return function Ke(De){return Ee((0,ce.Q)(De))}(De)}throw(0,se.z)(De)}function Ee(De){return new ue.y(_e=>{(function Ge(De,_e){var ve,je,Be,te;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!(je=yield ve.next()).done;)if(_e.next(je.value),_e.closed)return}catch(q){Be={error:q}}finally{try{je&&!je.done&&(te=ve.return)&&(yield te.call(ve))}finally{if(Be)throw Be.error}}_e.complete()})})(De,_e).catch(ve=>_e.error(ve))})}},6451:(nt,Ce,k)=>{k.d(Ce,{T:()=>ge});var g=k(8189),Z=k(8421),O=k(515),ue=k(7669),J=k(8996);function ge(...se){const fe=(0,ue.yG)(se),ce=(0,ue._6)(se,1/0),B=se;return B.length?1===B.length?(0,Z.Xf)(B[0]):(0,g.J)(ce)((0,J.D)(B,fe)):O.E}},5403:(nt,Ce,k)=>{k.d(Ce,{x:()=>Z});var g=k(2961);function Z(ue,J,ge,se,fe){return new O(ue,J,ge,se,fe)}class O extends g.Lv{constructor(J,ge,se,fe,ce,B){super(J),this.onFinalize=ce,this.shouldUnsubscribe=B,this._next=ge?function(j){try{ge(j)}catch(Y){J.error(Y)}}:super._next,this._error=fe?function(j){try{fe(j)}catch(Y){J.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(nt,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),Z=k(5403);function O(ue,J){return(0,g.e)((ge,se)=>{let fe=0;ge.subscribe((0,Z.x)(se,ce=>{se.next(ue.call(J,ce,fe++))}))})}},8189:(nt,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),Z=k(4671);function O(ue=1/0){return(0,g.z)(Z.y,ue)}},5577:(nt,Ce,k)=>{k.d(Ce,{z:()=>fe});var g=k(4004),Z=k(8421),O=k(4482),ue=k(9672),J=k(5403),se=k(576);function fe(ce,B,j=1/0){return(0,se.m)(B)?fe((Y,He)=>(0,g.U)((Te,Me)=>B(Y,Te,He,Me))((0,Z.Xf)(ce(Y,He))),j):("number"==typeof B&&(j=B),(0,O.e)((Y,He)=>function ge(ce,B,j,Y,He,Te,Me,Pe){const pe=[];let Ee=0,Ke=0,Ge=!1;const De=()=>{Ge&&!pe.length&&!Ee&&B.complete()},_e=je=>Ee<Y?ve(je):pe.push(je),ve=je=>{Te&&B.next(je),Ee++;let Be=!1;(0,Z.Xf)(j(je,Ke++)).subscribe((0,J.x)(B,te=>{null==He||He(te),Te?_e(te):B.next(te)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ee--;pe.length&&Ee<Y;){const te=pe.shift();Me?(0,ue.f)(B,Me,()=>ve(te)):ve(te)}De()}catch(te){B.error(te)}}))};return ce.subscribe((0,J.x)(B,_e,()=>{Ge=!0,De()})),()=>{null==Pe||Pe()}}(Y,He,ce,j)))}},5363:(nt,Ce,k)=>{k.d(Ce,{Q:()=>ue});var g=k(9672),Z=k(4482),O=k(5403);function ue(J,ge=0){return(0,Z.e)((se,fe)=>{se.subscribe((0,O.x)(fe,ce=>(0,g.f)(fe,J,()=>fe.next(ce),ge),()=>(0,g.f)(fe,J,()=>fe.complete(),ge),ce=>(0,g.f)(fe,J,()=>fe.error(ce),ge)))})}},3099:(nt,Ce,k)=>{k.d(Ce,{B:()=>ge});var g=k(8996),Z=k(5698),O=k(7579),ue=k(2961),J=k(4482);function ge(fe={}){const{connector:ce=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Y=!0}=fe;return He=>{let Te=null,Me=null,Pe=null,pe=0,Ee=!1,Ke=!1;const Ge=()=>{null==Me||Me.unsubscribe(),Me=null},De=()=>{Ge(),Te=Pe=null,Ee=Ke=!1},_e=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,je)=>{pe++,!Ke&&!Ee&&Ge();const Be=Pe=null!=Pe?Pe:ce();je.add(()=>{pe--,0===pe&&!Ke&&!Ee&&(Me=se(_e,Y))}),Be.subscribe(je),Te||(Te=new ue.Hp({next:te=>Be.next(te),error:te=>{Ke=!0,Ge(),Me=se(De,B,te),Be.error(te)},complete:()=>{Ee=!0,Ge(),Me=se(De,j),Be.complete()}}),(0,g.D)(ve).subscribe(Te))})(He)}}function se(fe,ce,...B){return!0===ce?(fe(),null):!1===ce?null:ce(...B).pipe((0,Z.q)(1)).subscribe(()=>fe())}},9468:(nt,Ce,k)=>{k.d(Ce,{R:()=>Z});var g=k(4482);function Z(O,ue=0){return(0,g.e)((J,ge)=>{ge.add(O.schedule(()=>J.subscribe(ge),ue))})}},5698:(nt,Ce,k)=>{k.d(Ce,{q:()=>ue});var g=k(515),Z=k(4482),O=k(5403);function ue(J){return J<=0?()=>g.E:(0,Z.e)((ge,se)=>{let fe=0;ge.subscribe((0,O.x)(se,ce=>{++fe<=J&&(se.next(ce),J<=fe&&se.complete())}))})}},8505:(nt,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),Z=k(4482),O=k(5403),ue=k(4671);function J(ge,se,fe){const ce=(0,g.m)(ge)||se||fe?{next:ge,error:se,complete:fe}:ge;return ce?(0,Z.e)((B,j)=>{var Y;null===(Y=ce.subscribe)||void 0===Y||Y.call(ce);let He=!0;B.subscribe((0,O.x)(j,Te=>{var Me;null===(Me=ce.next)||void 0===Me||Me.call(ce,Te),j.next(Te)},()=>{var Te;He=!1,null===(Te=ce.complete)||void 0===Te||Te.call(ce),j.complete()},Te=>{var Me;He=!1,null===(Me=ce.error)||void 0===Me||Me.call(ce,Te),j.error(Te)},()=>{var Te,Me;He&&(null===(Te=ce.unsubscribe)||void 0===Te||Te.call(ce)),null===(Me=ce.finalize)||void 0===Me||Me.call(ce)}))}):ue.y}},4408:(nt,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class Z extends g.w0{constructor(se,fe){super()}schedule(se,fe=0){return this}}const O={setInterval(ge,se,...fe){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,se,...fe):setInterval(ge,se,...fe)},clearInterval(ge){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class J extends Z{constructor(se,fe){super(se,fe),this.scheduler=se,this.work=fe,this.pending=!1}schedule(se,fe=0){if(this.closed)return this;this.state=se;const ce=this.id,B=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(B,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(B,this.id,fe),this}requestAsyncId(se,fe,ce=0){return O.setInterval(se.flush.bind(se,this),ce)}recycleAsyncId(se,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;O.clearInterval(fe)}execute(se,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(se,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,fe){let B,ce=!1;try{this.work(se)}catch(j){ce=!0,B=j||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:se,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=se&&(this.id=this.recycleAsyncId(fe,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class Z{constructor(J,ge=Z.now){this.schedulerActionCtor=J,this.now=ge}schedule(J,ge=0,se){return new this.schedulerActionCtor(this,J).schedule(se,ge)}}Z.now=g.l.now;class O extends Z{constructor(J,ge=Z.now){super(J,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:ge}=this;if(this._active)return void ge.push(J);let se;this._active=!0;do{if(se=J.execute(J.state,J.delay))break}while(J=ge.shift());if(this._active=!1,se){for(;J=ge.shift();)J.unsubscribe();throw se}}}},4986:(nt,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(nt,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(Z,O,...ue){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(Z,O,...ue):setTimeout(Z,O,...ue)},clearTimeout(Z){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(nt,Ce,k)=>{k.d(Ce,{h:()=>Z});const Z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ce,k)=>{k.d(Ce,{_6:()=>ge,jO:()=>ue,yG:()=>J});var g=k(576);function O(se){return se[se.length-1]}function ue(se){return(0,g.m)(O(se))?se.pop():void 0}function J(se){return function Z(se){return se&&(0,g.m)(se.schedule)}(O(se))?se.pop():void 0}function ge(se,fe){return"number"==typeof O(se)?se.pop():fe}},8737:(nt,Ce,k)=>{function g(Z,O){if(Z){const ue=Z.indexOf(O);0<=ue&&Z.splice(ue,1)}}k.d(Ce,{P:()=>g})},3888:(nt,Ce,k)=>{function g(Z){const ue=Z(J=>{Error.call(J),J.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(Ce,{d:()=>g})},2806:(nt,Ce,k)=>{k.d(Ce,{x:()=>O,O:()=>ue});var g=k(2416);let Z=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const ge=!Z;if(ge&&(Z={errorThrown:!1,error:null}),J(),ge){const{errorThrown:se,error:fe}=Z;if(Z=null,se)throw fe}}else J()}function ue(J){g.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(nt,Ce,k)=>{function g(Z,O,ue,J=0,ge=!1){const se=O.schedule(function(){ue(),ge?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(se),!ge)return se}k.d(Ce,{f:()=>g})},4671:(nt,Ce,k)=>{function g(Z){return Z}k.d(Ce,{y:()=>g})},1144:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(nt,Ce,k)=>{k.d(Ce,{D:()=>Z});var g=k(576);function Z(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,Ce,k)=>{function g(Z){return"function"==typeof Z}k.d(Ce,{m:()=>g})},3670:(nt,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),Z=k(576);function O(ue){return(0,Z.m)(ue[g.L])}},6495:(nt,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),Z=k(576);function O(ue){return(0,Z.m)(null==ue?void 0:ue[g.h])}},8239:(nt,Ce,k)=>{k.d(Ce,{t:()=>Z});var g=k(576);function Z(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(nt,Ce,k)=>{k.d(Ce,{Q:()=>O,L:()=>ue});var g=k(655),Z=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const se=J.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,g.qq)(se.read());if(ce)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(fe)}}finally{se.releaseLock()}})}function ue(J){return(0,Z.m)(null==J?void 0:J.getReader)}},4482:(nt,Ce,k)=>{k.d(Ce,{A:()=>Z,e:()=>O});var g=k(576);function Z(ue){return(0,g.m)(null==ue?void 0:ue.lift)}function O(ue){return J=>{if(Z(J))return J.lift(function(ge){try{return ue(ge,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),Z=k(3410);function O(ue){Z.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw ue;J(ue)})}},4532:(nt,Ce,k)=>{function g(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(nt,Ce,k)=>{function ue(q,re){var me={};for(var ie in q)Object.prototype.hasOwnProperty.call(q,ie)&&re.indexOf(ie)<0&&(me[ie]=q[ie]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(ie=Object.getOwnPropertySymbols(q);xe<ie.length;xe++)re.indexOf(ie[xe])<0&&Object.prototype.propertyIsEnumerable.call(q,ie[xe])&&(me[ie[xe]]=q[ie[xe]])}return me}function fe(q,re,me,ie){return new(me||(me=Promise))(function(oe,_t){function Zt(dt){try{rt(ie.next(dt))}catch(sn){_t(sn)}}function Mn(dt){try{rt(ie.throw(dt))}catch(sn){_t(sn)}}function rt(dt){dt.done?oe(dt.value):function xe(oe){return oe instanceof me?oe:new me(function(_t){_t(oe)})}(dt.value).then(Zt,Mn)}rt((ie=ie.apply(q,re||[])).next())})}function pe(q){return this instanceof pe?(this.v=q,this):new pe(q)}function Ee(q,re,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,ie=me.apply(q,re||[]),oe=[];return xe={},_t("next"),_t("throw"),_t("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function _t(on){ie[on]&&(xe[on]=function(fi){return new Promise(function(en,Vi){oe.push([on,fi,en,Vi])>1||Zt(on,fi)})})}function Zt(on,fi){try{!function Mn(on){on.value instanceof pe?Promise.resolve(on.value.v).then(rt,dt):sn(oe[0][2],on)}(ie[on](fi))}catch(en){sn(oe[0][3],en)}}function rt(on){Zt("next",on)}function dt(on){Zt("throw",on)}function sn(on,fi){on(fi),oe.shift(),oe.length&&Zt(oe[0][0],oe[0][1])}}function Ge(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,re=q[Symbol.asyncIterator];return re?re.call(q):(q=function Y(q){var re="function"==typeof Symbol&&Symbol.iterator,me=re&&q[re],ie=0;if(me)return me.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ie>=q.length&&(q=void 0),{value:q&&q[ie++],done:!q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),me={},ie("next"),ie("throw"),ie("return"),me[Symbol.asyncIterator]=function(){return this},me);function ie(oe){me[oe]=q[oe]&&function(_t){return new Promise(function(Zt,Mn){!function xe(oe,_t,Zt,Mn){Promise.resolve(Mn).then(function(rt){oe({value:rt,done:Zt})},_t)}(Zt,Mn,(_t=q[oe](_t)).done,_t.value)})}}}k.d(Ce,{_T:()=>ue,mG:()=>fe,qq:()=>pe,FC:()=>Ee,KL:()=>Ge})},5e3:(nt,Ce,k)=>{k.d(Ce,{deG:()=>Bc,tb:()=>EI,AFp:()=>Cm,ip1:()=>bm,CZH:()=>xv,hGG:()=>lp,z2F:()=>js,sBO:()=>BT,Sil:()=>II,_Vd:()=>om,EJc:()=>iC,SBq:()=>dc,qLn:()=>ae,vpe:()=>Us,tBr:()=>Sr,XFs:()=>ot,OlP:()=>Cn,zs3:()=>vn,ZZ4:()=>Fm,aQg:()=>Lm,soG:()=>Pv,YKP:()=>zd,h0i:()=>ka,PXZ:()=>SI,R0b:()=>Bs,FiY:()=>xr,Lbi:()=>Nv,g9A:()=>Rv,Qsj:()=>Fw,FYo:()=>K_,JOm:()=>ne,tp0:()=>vi,Rgc:()=>$u,dDg:()=>jv,q4F:()=>Lw,GfV:()=>um,s_b:()=>fm,ifc:()=>Lt,eFA:()=>ap,G48:()=>Zv,Gpc:()=>j,X6Q:()=>hC,_c5:()=>LI,VLi:()=>aC,c2e:()=>Ov,zSh:()=>Ag,wAp:()=>pt,vHH:()=>Me,cg1:()=>T_,kL8:()=>mw,dqk:()=>kt,sIi:()=>mf,CqO:()=>WE,QGY:()=>zg,F4k:()=>wf,RDi:()=>qi,AaK:()=>fe,qOj:()=>Bn,TTD:()=>Ws,_Bn:()=>W_,xp6:()=>by,uIk:()=>Ql,ekj:()=>ki,Suo:()=>Xw,Xpm:()=>St,lG2:()=>jt,Yz7:()=>en,cJS:()=>Kt,oAB:()=>K,Yjl:()=>mr,Y36:()=>sc,_UZ:()=>Ef,qZA:()=>vf,TgZ:()=>xu,EpF:()=>r_,n5z:()=>El,LFG:()=>Je,$8M:()=>ca,$Z:()=>Gg,NdJ:()=>i_,CRH:()=>eI,oxw:()=>a_,Q6J:()=>Su,MGl:()=>Wg,iGM:()=>mv,MAs:()=>Yy,CHM:()=>tl,LSH:()=>Xc,YNc:()=>PE,_uU:()=>ow,Oqu:()=>dr});var g=k(7579),Z=k(727),O=k(8306),ue=k(6451),J=k(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function se(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function fe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(fe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=ge({__forward_ref__:ge});function j(i){return i.__forward_ref__=j,i.toString=function(){return fe(this())},i}function Y(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Me extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Me(-201,`No provider for ${Ee(i)} found${a}`)}function rt(i,s){null==i&&function dt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ft(i){return tr(i,Ci)||tr(i,Ui)}function tr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Dr(i){return i&&(i.hasOwnProperty(br)||i.hasOwnProperty(Bi))?i[br]:null}const Ci=ge({\u0275prov:ge}),br=ge({\u0275inj:ge}),Ui=ge({ngInjectableDef:ge}),Bi=ge({ngInjectorDef:ge});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Lr;function jn(i){const s=Lr;return Lr=i,s}function ei(i,s,a){const l=Ft(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ot.Optional?null:void 0!==s?s:void _e(fe(i),"Injector")}function fn(i){return{toString:i}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),Lt=(()=>{return(i=Lt||(Lt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Lt;var i})();const et="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=et||"undefined"!=typeof global&&global||gt||nr,rr={},at=[],gr=ge({\u0275cmp:ge}),Rt=ge({\u0275dir:ge}),qe=ge({\u0275pipe:ge}),be=ge({\u0275mod:ge}),Ze=ge({\u0275fac:ge}),ut=ge({__NG_ELEMENT_ID__:ge});let Ot=0;function St(i){return fn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Lt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return l.id+=Ot++,l.inputs=ht(i.inputs,a),l.outputs=ht(i.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,l})}function L(i){return Vt(i)||function Dn(i){return i[Rt]||null}(i)}function H(i){return function Tt(i){return i[qe]||null}(i)}const de={};function K(i){return fn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(de[i.id]=i.type),s})}function ht(i,s){if(null==i)return rr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const jt=St;function mr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Vt(i){return i[gr]||null}function ln(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${fe(i)} does not have '\u0275mod' property.`);return a}function pi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ni(i){return Array.isArray(i)&&!0===i[1]}function Ec(i){return 0!=(8&i.flags)}function ys(i){return 2==(2&i.flags)}function Ga(i){return 1==(1&i.flags)}function Ur(i){return null!==i.template}function ch(i){return 0!=(512&i[2])}function Br(i,s){return i.hasOwnProperty(Ze)?i[Ze]:null}class bo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ws(){return ta}function ta(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cp),Tc}function Tc(){const i=Es(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===rr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Cp(i,s,a,l){const c=Es(i)||function ri(i,s){return i[Co]=s}(i,{previous:rr,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new bo(I&&I.currentValue,s,_===rr),i[l]=s}Ws.ngInherit=!0;const Co="__ngSimpleChanges__";function Es(i){return i[Co]||null}let Qa;function qi(i){Qa=i}function dn(i){return!!i.listen}const To={createRenderer:(i,s)=>function na(){return void 0!==Qa?Qa:"undefined"!=typeof document?document:void 0}()};function rn(i){for(;Array.isArray(i);)i=i[0];return i}function Ks(i,s){return rn(s[i])}function yr(i,s){return rn(s[i.index])}function ra(i,s){return i.data[s]}function _r(i,s){const a=s[i];return pi(a)?a:a[0]}function Is(i){return 4==(4&i[2])}function zi(i){return 128==(128&i[2])}function $r(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:Qs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nu(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function xt(){return lt.lFrame.tView}function tl(i){return lt.lFrame.contextLView=i,i[8]}function gn(){let i=Ao();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ao(){return lt.lFrame.currentTNode}function Hr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function nl(){return lt.lFrame.isParent}function ru(){return lt.isInCheckNoChangesMode}function Cs(i){lt.isInCheckNoChangesMode=i}function Ts(){return lt.lFrame.bindingIndex++}function ou(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,sa(s)}function sa(i){lt.lFrame.currentDirectiveIndex=i}function al(){return lt.lFrame.currentQueryIndex}function ul(i){lt.lFrame.currentQueryIndex=i}function Mc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ll(i,s,a){if(a&ot.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ot.Host||(c=Mc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=lt.lFrame=Rc();return l.currentTNode=s,l.lView=i,!0}function Ys(i){const s=Rc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Rc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Qs(i):s}function Qs(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Nc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Oc=Nc;function Js(){const i=Nc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return lt.lFrame.selectedIndex}function Ss(i){lt.lFrame.selectedIndex=i}function bn(){const i=lt.lFrame;return ra(i.tView,i.selectedIndex)}function Wi(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function aa(i,s,a){Pc(i,s,3,a)}function au(i,s,a,l){(3&i[2])===a&&Pc(i,s,a,l)}function Un(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Pc(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Tp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Tp(i,s,a,l){const c=a[l]<0,f=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class xo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function pl(i,s,a){const l=dn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];gl(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Ki(i){return 3===i||4===i||6===i}function gl(i){return 64===i.charCodeAt(0)}function ua(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||eo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function eo(i,s,a,l,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Lc(i){return-1!==i}function Xt(i){return 32767&i}function yn(i,s){let a=function Mo(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Ct=!0;function xs(i){const s=Ct;return Ct=i,s}let gh=0;function si(i,s){const a=Ro(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Hn(l.data,i),Hn(s,null),Hn(l.blueprint,null));const c=Cr(i,s),f=i.injectorIndex;if(Lc(c)){const _=Xt(c),E=yn(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function Hn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ro(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Cr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(l=2===_?f.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function no(i,s,a){!function to(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(l=a[ut]),null==l&&(l=a[ut]=gh++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function ro(i,s,a){if(a&ot.Optional)return i;_e(s,"NodeInjector")}function No(i,s,a,l){if(a&ot.Optional&&void 0===l&&(l=null),0==(a&(ot.Self|ot.Host))){const c=i[9],f=jn(void 0);try{return c?c.get(s,l,a&ot.Optional):ei(s,l,a&ot.Optional)}finally{jn(f)}}return ro(l,s,a)}function oi(i,s,a,l=ot.Default,c){if(null!==i){const f=function Vc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:Gn:s}(a);if("function"==typeof f){if(!ll(s,i,l))return l&ot.Host?ro(c,a,l):No(s,a,l,c);try{const _=f(l);if(null!=_||l&ot.Optional)return _;_e(a)}finally{Oc()}}else if("number"==typeof f){let _=null,E=Ro(i,s),I=-1,A=l&ot.Host?s[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(I=-1===E?Cr(i,s):s[E+8],-1!==I&&vl(l,!1)?(_=s[1],E=Xt(I),s=yn(I,s)):E=-1);-1!==E;){const S=s[1];if(la(f,E,S.data)){const P=io(E,s,a,_,l,A);if(P!==Ms)return P}I=s[E+8],-1!==I&&vl(l,s[1].data[E+8]===A)&&la(f,E,s)?(_=S,E=Xt(I),s=yn(I,s)):E=-1}}}return No(s,a,l,c)}const Ms={};function Gn(){return new yi(gn(),we())}function io(i,s,a,l,c,f){const _=s[1],E=_.data[i+8],S=_l(E,_,a,null==l?ys(E)&&Ct:l!=_&&0!=(3&E.type),c&ot.Host&&f===E);return null!==S?Yi(s,_,S,E):Ms}function _l(i,s,a,l,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=l?E:E+S;W<V;W++){const ye=_[W];if(W<I&&a===ye||W>=I&&ye.type===a)return W}if(c){const W=_[I];if(W&&Ur(W)&&W.type===a)return I}return null}function Yi(i,s,a,l){let c=i[a];const f=s.data;if(function kc(i){return i instanceof xo}(c)){const _=c;_.resolving&&function Ke(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Me(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(f[a]));const E=xs(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?jn(_.injectImpl):null;ll(i,l,ot.Default);try{c=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function hl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const _=ta(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&jn(I),xs(E),_.resolving=!1,Oc()}}return c}function la(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function vl(i,s){return!(i&ot.Self||i&ot.Host&&s)}class yi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return oi(this._tNode,this._lView,s,l,a)}}function El(i){return fn(()=>{const s=i.prototype.constructor,a=s[Ze]||so(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[Ze]||so(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function so(i){return He(i)?()=>{const s=so(Y(i));return s&&s()}:Br(i)}function ca(i){return function yl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(Ki(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(gn(),i)}const Ji="__parameters__";function oo(i,s,a){return fn(()=>{const l=function lu(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const P=I.hasOwnProperty(Ji)?I[Ji]:Object.defineProperty(I,Ji,{value:[]})[Ji];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Bc=new Cn("AnalyzeForEntryComponents");function Ar(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Ar(l,s)):s!==i&&s.push(l)}return s}function _i(i,s){i.forEach(a=>Array.isArray(a)?_i(a,s):s(a))}function Il(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Rs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ui(i,s,a){let l=fa(i,s);return l>=0?i[1|l]=a:(l=~l,function ha(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Eh(i,s){const a=fa(i,s);if(a>=0)return i[1|a]}function fa(i,s){return function ao(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const es={},Ns="__NG_DI_FLAG__",Cl="ngTempTokenPath",b=/\n/gm,F="__source",z=ge({provide:String,useValue:ge});let ee;function Se(i){const s=ee;return ee=i,s}function ze(i,s=ot.Default){if(void 0===ee)throw new Me(203,"");return null===ee?ei(i,void 0,s):ee.get(i,s&ot.Optional?null:void 0,s)}function Je(i,s=ot.Default){return(function Zn(){return Lr}()||ze)(Y(i),s)}const Ut=Je;function vt(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Me(900,"");let c,f=ot.Default;for(let _=0;_<l.length;_++){const E=l[_],I=wn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Je(c,f))}else s.push(Je(l))}return s}function Pn(i,s){return i[Ns]=s,i.prototype[Ns]=s,i}function wn(i){return i[Ns]}const Sr=Pn(oo("Inject",i=>({token:i})),-1),xr=Pn(oo("Optional"),8),vi=Pn(oo("SkipSelf"),4);class Kc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ts(i){return i instanceof Kc?i.changingThisBreaksApplicationSecurity:i}const _a=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var qn=(()=>((qn=qn||{})[qn.NONE=0]="NONE",qn[qn.HTML=1]="HTML",qn[qn.STYLE=2]="STYLE",qn[qn.SCRIPT=3]="SCRIPT",qn[qn.URL=4]="URL",qn[qn.RESOURCE_URL=5]="RESOURCE_URL",qn))();function Xc(i){const s=function Ol(){const i=we();return i&&i[12]}();return s?s.sanitize(qn.URL,i)||"":function xl(i,s){const a=function Mh(i){return i instanceof Kc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ts(i):function gu(i){return(i=String(i)).match(_a)||i.match(jp)?i:"unsafe:"+i}(pe(i))}const Kp="__ngContext__";function pn(i,s){i[Kp]=s}function mt(i){const s=function Ea(i){return i[Kp]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function ns(i){return i.ngOriginalError}function Jp(i,...s){i.error(...s)}class ae{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function L0(i){return i&&i.ngErrorLogger||Jp}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ns(s);for(;a&&ns(a);)a=ns(a);return a||null}}const Hh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function p(i){return i instanceof Function?i():i}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function Ye(i,s){return undefined(i,s)}function Tn(i){const s=i[3];return ni(s)?s[3]:s}function Ia(i){return wr(i[13])}function Eu(i){return wr(i[4])}function wr(i){for(;null!==i&&!ni(i);)i=i[4];return i}function kn(i,s,a,l,c){if(null!=l){let f,_=!1;ni(l)?f=l:pi(l)&&(_=!0,l=l[0]);const E=rn(l);0===i&&null!==a?null==c?U0(s,a,E):Da(s,a,E,c||null,!0):1===i&&null!==a?Da(s,a,E,c||null,!0):2===i?function sg(i,s,a){const l=Wh(i,s);l&&function gy(i,s,a,l){dn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function $0(i,s,a,l,c){const f=a[7];f!==rn(a)&&kn(s,i,l,f,c);for(let E=10;E<a.length;E++){const I=a[E];Bl(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function Ul(i,s,a){if(dn(i))return i.createElement(s,a);{const l=null!==a?function Ya(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function hy(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(l,1)}function zh(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&hy(c,l),s>0&&(i[a-1][4]=l[4]);const f=Rs(i,10+s);!function Xp(i,s){Bl(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function fy(i,s){if(!(256&s[2])){const a=s[11];dn(a)&&a.destroyNode&&Bl(i,s,a,3,null,null),function fD(i){let s=i[13];if(!s)return py(i[1],i);for(;s;){let a=null;if(pi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)pi(s)&&py(s[1],s),s=s[3];null===s&&(s=i),pi(s)&&py(s[1],s),a=s&&s[4]}s=a}}(s)}}function py(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function eg(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof xo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function V0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):rn(s[_]),I=l[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),f+=2}else{const _=l[c=a[f+1]];a[f].call(_)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&dn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ni(s[3])){a!==s[3]&&hy(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function tg(i,s,a){return function ng(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Lt.None||c===Lt.Emulated)return null}return yr(l,a)}(i,s.parent,a)}function Da(i,s,a,l,c){dn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function U0(i,s,a){dn(i)?i.appendChild(s,a):s.appendChild(a)}function B0(i,s,a,l,c){null!==l?Da(i,s,a,l,c):U0(i,s,a)}function Wh(i,s){return dn(i)?i.parentNode(s):s.parentNode}let ad=function Kr(i,s,a){return 40&i.type?yr(i,a):null};function rg(i,s,a,l){const c=tg(i,l,s),f=s[11],E=function j0(i,s,a){return ad(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)B0(f,c,a[I],E,!1);else B0(f,c,a,E,!1)}function ig(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return ld(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return ig(i,l);{const c=i[s.index];return ni(c)?ld(-1,c):rn(c)}}if(32&a)return Ye(s,i)()||rn(i[s.index]);{const l=Zh(i,s);return null!==l?Array.isArray(l)?l[0]:ig(Tn(i[16]),l):ig(i,s.next)}}return null}function Zh(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ld(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return ig(l,c)}return s[7]}function Kh(i,s,a,l,c,f,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&pn(rn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Kh(i,s,a.child,l,c,f,!1),kn(s,i,c,E,f);else if(32&I){const A=Ye(a,l);let S;for(;S=A();)kn(s,i,c,S,f);kn(s,i,c,E,f)}else 16&I?_y(i,s,l,a,c,f):kn(s,i,c,E,f);a=_?a.projectionNext:a.next}}function Bl(i,s,a,l,c,f){Kh(a,l,i.firstChild,s,c,f,!1)}function _y(i,s,a,l,c,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)kn(s,i,c,I[A],f);else Kh(i,s,I,_[3],c,f,!0)}function vy(i,s,a){dn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function og(i,s,a){dn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function ag(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const H0="ng-template";function Ey(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==ag(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function ug(i){return 4===i.type&&i.value!==H0}function wy(i,s,a){return s===(4!==i.type||a?i.value:H0)}function Rr(i,s,a){let l=4;const c=i.attrs||[],f=function vD(i){for(let s=0;s<i.length;s++)if(Ki(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!wy(i,I,a)||""===I&&1===s.length){if(_n(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!Ey(i.attrs,A,a)){if(_n(l))return!1;_=!0}continue}const P=lg(8&l?"class":I,c,ug(i),a);if(-1===P){if(_n(l))return!1;_=!0;continue}if(""!==A){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&l?V:null;if(W&&-1!==ag(W,A,0)||2&l&&A!==V){if(_n(l))return!1;_=!0}}}}else{if(!_&&!_n(l)&&!_n(I))return!1;if(_&&_n(I))continue;_=!1,l=I|1&l}}return _n(l)||_}function _n(i){return 0==(1&i)}function lg(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function G0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function cg(i,s,a=!1){for(let l=0;l<s.length;l++)if(Rr(i,s[l],a))return!0;return!1}function q0(i,s){return i?":not("+s.trim()+")":s}function Iy(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!_n(_)&&(s+=q0(f,c),c=""),l=_,f=f||!_n(l);a++}return""!==c&&(s+=q0(f,c)),s}const Dt={};function by(i){z0(xt(),we(),vr()+i,ru())}function z0(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&aa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&au(s,f,0,a)}Ss(a)}function cd(i,s){return i<<17|s<<2}function is(i){return i>>17&32767}function jl(i){return 2|i}function Uo(i){return(131068&i)>>2}function dg(i,s){return-131069&i|s<<2}function dd(i){return 1|i}function Iu(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];ul(c),_.contentQueries(2,s[f],f)}}}function lo(i,s,a,l,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Mi(i,s,a,l,c){let f=i.data[s];if(null===f)f=function gd(i,s,a,l,c){const f=Ao(),_=nl(),I=i.data[s]=function rf(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function sl(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const _=function So(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Hr(f,!0),f}function Ta(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Du(i,s,a){Ys(s);try{const l=i.viewQuery;null!==l&&lf(1,l,a);const c=i.template;null!==c&&nf(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Iu(i,s),i.staticViewQueries&&lf(2,i.viewQuery,a);const f=i.components;null!==f&&function AD(i,s){for(let a=0;a<s.length;a++)vE(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Js()}}function Gl(i,s,a,l){const c=s[2];if(256==(256&c))return;Ys(s);const f=ru();try{Ds(s),function iu(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&nf(i,s,a,2,l);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&aa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&au(s,A,0,null),Un(s,0)}if(function kD(i){for(let s=Ia(i);null!==s;s=Eu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&bs(f,1),c[2]|=1024}}}(s),function PD(i){for(let s=Ia(i);null!==s;s=Eu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];zi(l)&&Gl(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Iu(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&aa(s,A)}else{const A=i.contentHooks;null!==A&&au(s,A,1),Un(s,1)}!function Oy(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ss(~c);else{const f=c,_=a[++l],E=a[++l];ou(_,f),E(2,s[f])}}}finally{Ss(-1)}}(i,s);const E=i.components;null!==E&&function rE(i,s){for(let a=0;a<s.length;a++)FD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&lf(2,I,l),!f)if(_){const A=i.viewCheckHooks;null!==A&&aa(s,A)}else{const A=i.viewHooks;null!==A&&au(s,A,2),Un(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Js()}}function Fn(i,s,a,l){const c=s[10],f=!ru(),_=Is(s);try{f&&!_&&c.begin&&c.begin(),_&&Du(i,s,l),Gl(i,s,a,l)}finally{f&&!_&&c.end&&c.end()}}function nf(i,s,a,l,c){const f=vr(),_=2&l;try{Ss(-1),_&&s.length>20&&z0(i,s,20,ru()),a(l,c)}finally{Ss(f)}}function Py(i,s,a){!nu()||(function pE(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||si(a,s),pn(l,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Ur(I);A&&yE(s,a,I);const S=Yi(s,i,E,a);pn(S,s),null!==_&&ND(0,E-c,S,I,0,_),A&&(_r(a.index,s)[8]=S)}}(i,s,a,yr(a,s)),128==(128&a.flags)&&function ky(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function ol(){return lt.lFrame.currentDirectiveIndex}();try{Ss(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];sa(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&gE(A,S)}}finally{Ss(-1),sa(E)}}(i,s,a))}function ql(i,s,a=yr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function md(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=_g(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function _g(i,s,a,l,c,f,_,E,I,A){const S=20+l,P=S+c,V=function sE(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,P),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function uE(i,s,a,l){const c=Tg(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&cf(i).push(l,c.length-1))}function Aa(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Ri(i,s,a,l,c,f,_,E){const I=yr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(_d(i,a,S,l,c),ys(s)&&function yd(i,s){const a=_r(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function cE(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,dn(f)?f.setProperty(I,l,c):gl(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function sf(i,s,a,l){let c=!1;if(nu()){const f=function RD(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];cg(a,_.selectors,!1)&&(c||(c=[]),no(si(a,s),i,_.type),Ur(_)?(mE(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==f){c=!0,af(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,A=Ta(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=ua(a.mergedAttrs,P.hostAttrs),wg(i,a,s,A,P),of(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function lE(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],P=S.inputs,V=null===f||ug(s)?null:ar(P,f);_.push(V),E=Aa(P,A,E),I=Aa(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function Eg(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Me(-301,!1);l.push(s[c],f)}}}(a,l,_)}return a.mergedAttrs=ua(a.mergedAttrs,a.attrs),c}function vg(i,s,a,l,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function fE(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function gE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function mE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function of(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ur(s)&&(a[""]=i)}}function af(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function wg(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=Br(c.type)),_=new xo(f,Ur(c),null);i.blueprint[l]=_,a[l]=_,vg(i,s,0,l,Ta(i,a,c.hostVars,Dt),c)}function yE(i,s,a){const l=yr(s,i),c=md(a),f=i[10],_=Wl(i,lo(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function Ni(i,s,a,l,c,f){const _=yr(i,s);!function zl(i,s,a,l,c,f,_){if(null==f)dn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?pe(f):_(f,l||"",c);dn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,l,c)}function ND(i,s,a,l,c,f){const _=f[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],P=_[I++];null!==E?l.setInput(a,P,A,S):a[S]=P}}}function ar(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function _E(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function FD(i,s){const a=_r(s,i);if(zi(a)){const l=a[1];80&a[2]?Gl(l,a,l.template,a[8]):a[5]>0&&Ig(a)}}function Ig(i){for(let l=Ia(i);null!==l;l=Eu(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const _=f[1];Gl(_,f,_.template,f[8])}else f[5]>0&&Ig(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=_r(a[l],i);zi(c)&&c[5]>0&&Ig(c)}}function vE(i,s){const a=_r(s,i),l=a[1];(function EE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Du(l,a,a[8])}function Wl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Dg(i){for(;i;){i[2]|=64;const s=Tn(i);if(ch(i)&&!s)return i;i=s}return null}function Fy(i,s,a){const l=s[10];l.begin&&l.begin();try{Gl(i,s,i.template,a)}catch(c){throw Vy(s,c),c}finally{l.end&&l.end()}}function Cg(i){!function bg(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=mt(a),c=l[1];Fn(c,l,c.template,a)}}(i[8])}function lf(i,s,a){ul(0),s(i,a)}const IE=(()=>Promise.resolve(null))();function Tg(i){return i[7]||(i[7]=[])}function cf(i){return i.cleanup||(i.cleanup=[])}function Vy(i,s){const a=i[9],l=a?a.get(ae,null):null;l&&l.handleError(s)}function _d(i,s,a,l,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function jo(i,s,a){const l=Ks(s,i);!function id(i,s,a){dn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function df(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ce(c,E):2==f&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const vd=new Cn("INJECTOR",-1);class jy{get(s,a=es){if(a===es){const l=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw l.name="NullInjectorError",l}return a}}const Ag=new Cn("Set Injector scope."),co={},bE={};let Sg;function $y(){return void 0===Sg&&(Sg=new jy),Sg}function Hy(i,s=null,a=null,l){const c=hf(i,s,a,l);return c._resolveInjectorDefTypes(),c}function hf(i,s=null,a=null,l){return new ss(i,a,s||$y(),l)}class ss{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&_i(a,E=>this.processProvider(E,s,a)),_i([s],E=>this.processInjectorType(E,[],f)),this.records.set(vd,wd(void 0,this));const _=this.records.get(Ag);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:fe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=es,l=ot.Default){this.assertNotDestroyed();const c=Se(this),f=jn(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function AE(i){return"function"==typeof i||"object"==typeof i&&i instanceof Cn}(s)&&Ft(s);E=I&&this.injectableDefInScope(I)?wd(xg(s),co):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ot.Self?$y():this.parent).get(s,a=l&ot.Optional&&a===es?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Cl]=_[Cl]||[]).unshift(fe(s)),c)throw _;return function ma(i,s,a,l){const c=i[Cl];throw s[F]&&c.unshift(s[F]),i.message=function Po(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=fe(s);if(Array.isArray(s))c=s.map(fe).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Cl]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{jn(f),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(fe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(s,a,l){if(!(s=Y(s)))return!1;let c=Dr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==l.indexOf(_);if(void 0!==f&&(c=Dr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{_i(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];_i(W,ye=>this.processProvider(ye,V,W||at))}}this.injectorDefTypes.add(_);const I=Br(_)||(()=>new _);this.records.set(_,wd(I,co));const A=c.providers;if(null!=A&&!E){const S=s;_i(A,P=>this.processProvider(P,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=Zl(s=Y(s))?s:Y(s&&s.provide);const f=function Ed(i,s,a){return Mg(i)?wd(void 0,i.useValue):wd(TE(i),co)}(s);if(Zl(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=wd(void 0,co,!0),_.factory=()=>vt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===co&&(a.value=bE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function jD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function xg(i){const s=Ft(i),a=null!==s?s.factory:Br(i);if(null!==a)return a;if(i instanceof Cn)throw new Me(204,!1);if(i instanceof Function)return function CE(i){const s=i.length;if(s>0)throw function qr(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Me(204,!1);const a=function Xr(i){const s=i&&(i[Ci]||i[Ui]);if(s){const a=function hs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Me(204,!1)}function TE(i,s,a){let l;if(Zl(i)){const c=Y(i);return Br(c)||xg(c)}if(Mg(i))l=()=>Y(i.useValue);else if(function UD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...vt(i.deps||[]));else if(function VD(i){return!(!i||!i.useExisting)}(i))l=()=>Je(Y(i.useExisting));else{const c=Y(i&&(i.useClass||i.provide));if(!function Rg(i){return!!i.deps}(i))return Br(c)||xg(c);l=()=>new c(...vt(i.deps))}return l}function wd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Mg(i){return null!==i&&"object"==typeof i&&z in i}function Zl(i){return"function"==typeof i}let vn=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Hy({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return Hy({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=es,i.NULL=new jy,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>Je(vd)}),i.__NG_ELEMENT_ID__=-1,i})();function Mt(i,s){Wi(mt(i)[1],gn())}function Bn(i){let s=function Wy(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ur(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Me(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Og(i.inputs),_.declaredInputs=Og(i.declaredInputs),_.outputs=Og(i.outputs);const E=c.hostBindings;E&&gf(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&Kl(i,I),A&&NE(i,A),se(i.inputs,c.inputs),se(i.declaredInputs,c.declaredInputs),se(i.outputs,c.outputs),Ur(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===Bn&&(a=!1)}}s=Object.getPrototypeOf(s)}!function yt(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ua(c.hostAttrs,a=ua(a,c.hostAttrs))}}(l)}function Og(i){return i===rr?{}:i===at?[]:i}function Kl(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function NE(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function gf(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Ma=null;function Id(){if(!Ma){const i=kt.Symbol;if(i&&i.iterator)Ma=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ma=l)}}}return Ma}function mf(i){return!!Ra(i)&&(Array.isArray(i)||!(i instanceof Map)&&Id()in i)}function Ra(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function lr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ql(i,s,a,l){const c=we();return lr(c,Ts(),s)&&(xt(),Ni(bn(),c,i,s,a,l)),Ql}function Fe(i,s,a,l){return lr(i,Ts(),a)?s+pe(a)+l:Dt}function PE(i,s,a,l,c,f,_,E){const I=we(),A=xt(),S=i+20,P=A.firstCreatePass?function OE(i,s,a,l,c,f,_,E,I){const A=s.consts,S=Mi(s,i,4,_||null,$r(A,E));sf(s,a,S,$r(A,I)),Wi(s,S);const P=S.tViews=_g(2,S,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,f,_):A.data[S];Hr(P,!1);const V=I[11].createComment("");rg(A,I,V,P),pn(V,I),Wl(I,I[S]=_E(V,I,V,P)),Ga(P)&&Py(A,I,P),null!=_&&ql(I,P,E)}function Yy(i){return function gi(i,s){return i[s]}(function il(){return lt.lFrame.contextLView}(),20+i)}function sc(i,s=ot.Default){const a=we();return null===a?Je(i,s):oi(gn(),a,Y(i),s)}function Gg(){throw new Error("invalid")}function Su(i,s,a){const l=we();return lr(l,Ts(),s)&&Ri(xt(),bn(),l,i,s,l[11],a,!1),Su}function Pi(i,s,a,l,c){const _=c?"class":"style";_d(i,a,s.inputs[_],_,l)}function xu(i,s,a,l){const c=we(),f=xt(),_=20+i,E=c[11],I=c[_]=Ul(E,s,function Ym(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function GE(i,s,a,l,c,f,_){const E=s.consts,A=Mi(s,i,2,c,$r(E,f));return sf(s,a,A,$r(E,_)),null!==A.attrs&&df(A,A.attrs,!1),null!==A.mergedAttrs&&df(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,l):f.data[_];Hr(A,!0);const S=A.mergedAttrs;null!==S&&pl(E,I,S);const P=A.classes;null!==P&&og(E,I,P);const V=A.styles;return null!==V&&vy(E,I,V),64!=(64&A.flags)&&rg(f,c,I,A),0===function ia(){return lt.lFrame.elementDepthCount}()&&pn(I,c),function eu(){lt.lFrame.elementDepthCount++}(),Ga(A)&&(Py(f,c,A),function iE(i,s,a){if(Ec(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==l&&ql(c,A),xu}function vf(){let i=gn();nl()?function rl(){lt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function tu(){lt.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(Wi(a,i),Ec(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ph(i){return 0!=(16&i.flags)}(s)&&Pi(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ap(i){return 0!=(32&i.flags)}(s)&&Pi(a,s,we(),s.stylesWithoutHost,!1),vf}function Ef(i,s,a,l){return xu(i,s,a,l),vf(),Ef}function r_(){return we()}function zg(i){return!!i&&"function"==typeof i.then}function wf(i){return!!i&&"function"==typeof i.subscribe}const WE=wf;function i_(i,s,a,l){const c=we(),f=xt(),_=gn();return function Mu(i,s,a,l,c,f,_,E){const I=Ga(l),S=i.firstCreatePass&&cf(i),P=s[8],V=Tg(s);let W=!0;if(3&l.type||E){const Ue=yr(l,s),Qe=E?E(Ue):Ue,Ie=V.length,st=E?Bt=>E(rn(Bt[l.index])):l.index;if(dn(a)){let Bt=null;if(!E&&I&&(Bt=function Md(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===l){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=f,Bt.__ngLastListenerFn__=f,W=!1;else{f=Na(l,s,P,f,!1);const un=a.listen(Qe,c,f);V.push(f,un),S&&S.push(c,st,Ie,Ie+1)}}else f=Na(l,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,st,Ie,_)}else f=Na(l,s,P,f,!1);const ye=l.outputs;let Oe;if(W&&null!==ye&&(Oe=ye[c])){const Ue=Oe.length;if(Ue)for(let Qe=0;Qe<Ue;Qe+=2){const fr=s[Oe[Qe]][Oe[Qe+1]].subscribe(f),yc=V.length;V.push(f,fr),S&&S.push(c,l.index,yc,-(yc+1))}}}(f,c,c[11],_,i,s,!!a,l),i_}function o_(i,s,a,l){try{return!1!==a(l)}catch(c){return Vy(i,c),!1}}function Na(i,s,a,l,c){return function f(_){if(_===Function)return l;const E=2&i.flags?_r(i.index,s):s;0==(32&s[2])&&Dg(E);let I=o_(s,0,l,_),A=f.__ngNextListenerFn__;for(;A;)I=o_(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function a_(i=1){return function As(i){return(lt.lFrame.contextLView=function cl(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function Wg(i,s,a,l,c){const f=we(),_=Fe(f,s,a,l);return _!==Dt&&Ri(xt(),bn(),f,i,_,f[11],c,!1),Wg}function l_(i,s,a,l,c){const f=i[a+1],_=null===s;let E=l?is(f):Uo(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];XE(i[E],s)&&(I=!0,i[E+1]=l?dd(S):jl(S)),E=l?is(S):Uo(S)}I&&(i[a+1]=l?jl(f):dd(f))}function XE(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&fa(i,s)>=0}function ki(i,s){return function fo(i,s,a,l){const c=we(),f=xt(),_=function mi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Af(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[vr()],_=function tw(i,s){return s>=i.expandoStartIndex}(i,a);(function m_(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function Sf(i,s,a,l){const c=function oa(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Pd(a=Qg(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Qg(c,i,s,a,l),null===f){let I=function xf(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Uo(l))return i[is(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Qg(null,i,s,I[1],l),I=Pd(I,s.attrs,l),function Yg(i,s,a,l){i[is(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function nw(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Pd(l,i[f].hostAttrs,a);return Pd(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function bf(i,s,a,l,c,f){let _=f?s.classBindings:s.styleBindings,E=is(_),I=Uo(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||fa(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=is(i[E+1]);i[l+1]=cd(V,E),0!==V&&(i[V+1]=dg(i[V+1],l)),i[E+1]=function ID(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=cd(E,0),0!==E&&(i[E+1]=dg(i[E+1],l)),E=l;else i[l+1]=cd(I,0),0===E?E=l:i[I+1]=dg(i[I+1],l),I=l;A&&(i[l+1]=jl(i[l+1])),l_(i,S,l,!0),l_(i,S,l,!1),function oc(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&fa(f,s)>=0&&(a[l+1]=dd(a[l+1]))}(s,S,i,l,f),_=cd(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,l)}}(f,i,_,l),s!==Dt&&lr(c,_,s)&&function iw(i,s,a,l,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];Jg(function Ty(i){return 1==(1&i)}(A)?sw(I,s,a,c,Uo(A),_):void 0)||(Jg(f)||function Cy(i){return 2==(2&i)}(A)&&(f=sw(I,null,a,c,E,_)),function mD(i,s,a,l,c){const f=dn(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ne.DashCase;if(null==c)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ne.Important),f?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Ks(vr(),a),c,f))}(f,f.data[vr()],c,c[11],i,c[_+1]=function Mf(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=fe(ts(i)))),i}(s,a),l,_)}(i,s,null,!0),ki}function Qg(i,s,a,l,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],l=Pd(l,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Pd(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ui(i,_,!!a||s[++f]))}return void 0===i?null:i}function sw(i,s,a,l,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,P=null===S;let V=a[c+1];V===Dt&&(V=P?at:void 0);let W=P?Eh(V,l):S===l?V:void 0;if(A&&!Jg(W)&&(W=Eh(I,l)),Jg(W)&&(E=W,_))return E;const ye=i[c+1];c=_?is(ye):Uo(ye)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=Eh(I,l))}return E}function Jg(i){return void 0!==i}function ow(i,s=""){const a=we(),l=xt(),c=i+20,f=l.firstCreatePass?Mi(l,c,1,s,null):l.data[c],_=a[c]=function Ll(i,s){return dn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);rg(l,a,_,f),Hr(f,!1)}function dr(i){return Rf("",i,""),dr}function Rf(i,s,a){const l=we(),c=Fe(l,i,s,a);return c!==Dt&&jo(l,vr(),c),Rf}const ac=void 0;var hb=["en",[["a","p"],["AM","PM"],ac],[["AM","PM"],ac,ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ac,"{1} 'at' {0}",ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function db(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ud={};function T_(i){const s=function fb(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=yw(s);if(a)return a;const l=s.split("-")[0];if(a=yw(l),a)return a;if("en"===l)return hb;throw new Error(`Missing locale data for the locale "${i}".`)}function mw(i){return T_(i)[pt.PluralCase]}function yw(i){return i in Ud||(Ud[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),Ud[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const Pf="en-US";let Vs=Pf;function zf(i,s,a,l,c){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)zf(i[f],s,a,l,c);else{const f=xt(),_=we();let E=Zl(i)?i:Y(i.provide),I=TE(i);const A=gn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(Zl(i)||!i.multi){const W=new xo(I,c,sc),ye=Zf(E,s,c?S:S+V,P);-1===ye?(no(si(A,_),f,E),cc(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[ye]=W,_[ye]=W)}else{const W=Zf(E,s,S+V,P),ye=Zf(E,s,S,S+V),Oe=W>=0&&a[W],Ue=ye>=0&&a[ye];if(c&&!Ue||!c&&!Oe){no(si(A,_),f,E);const Qe=function xb(i,s,a,l,c){const f=new xo(i,a,sc);return f.multi=[],f.index=s,f.componentProviders=0,Wf(f,c,l&&!a),f}(c?z_:Sb,a.length,c,l,I);!c&&Ue&&(a[ye].providerFactory=Qe),cc(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else cc(f,i,W>-1?W:ye,Wf(a[c?ye:W],I,!c&&l));!c&&l&&Ue&&a[ye].componentProviders++}}}function cc(i,s,a,l){const c=Zl(s),f=function BD(i){return!!i.useClass}(s);if(c||f){const I=(f?Y(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function Wf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Zf(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Sb(i,s,a,l){return im(this.multi,[])}function z_(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Yi(a,a[1],this.providerFactory.index,l);f=E.slice(0,_),im(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],im(c,f);return f}function im(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function W_(i,s=[]){return a=>{a.providersResolver=(l,c)=>function q_(i,s,a){const l=xt();if(l.firstCreatePass){const c=Ur(i);zf(a,l.data,l.blueprint,c,!0),zf(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class sm{}class kw{resolveComponentFactory(s){throw function Mb(i){const s=Error(`No component factory found for ${fe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let om=(()=>{class i{}return i.NULL=new kw,i})();function Gd(){return yo(gn(),we())}function yo(i,s){return new dc(yr(i,s))}let dc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Gd,i})();function am(i){return i instanceof dc?i.nativeElement:i}class K_{}let Fw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Y_(){const i=we(),a=_r(gn().index,i);return function Nb(i){return i[11]}(pi(a)?a:i)}(),i})(),Ob=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class um{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Lw=new um("13.2.7"),Q_={};function qd(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(rn(f)),ni(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&qd(I[1],I,A,l)}const _=a.type;if(8&_)qd(i,s,a.child,l);else if(32&_){const E=Ye(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=Zh(s,a);if(Array.isArray(E))l.push(...E);else{const I=Tn(s[16]);qd(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Wn{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return qd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ni(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(zh(s,l),Rs(a,l))}this._attachedToViewContainer=!1}fy(this._lView[1],this._lView)}onDestroy(s){uE(this._lView[1],this._lView,null,s)}markForCheck(){Dg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function uf(i,s,a){Cs(!0);try{Fy(i,s,a)}finally{Cs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qh(i,s){Bl(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=s}}class Pb extends Wn{constructor(s){super(s),this._view=s}detectChanges(){Cg(this._view)}checkNoChanges(){!function wE(i){Cs(!0);try{Cg(i)}finally{Cs(!1)}}(this._view)}get context(){return null}}class Vw extends om{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Vt(s);return new J_(a,this.ngModule)}}function Uw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class J_ extends sm{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Dy(i){return i.map(Iy).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Uw(this.componentDef.inputs)}get outputs(){return Uw(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function Fb(i,s){return{get:(a,l,c)=>{const f=i.get(a,Q_,c);return f!==Q_||l===Q_?f:s.get(a,l,c)}}}(s,c.injector):s,_=f.get(K_,To),E=f.get(Ob,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function aE(i,s,a){if(dn(i))return i.selectRootElement(s,a===Lt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Ul(_.createRenderer(null,this.componentDef),A,function kb(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function zy(i,s){return{components:[],scheduler:i||Hh,clean:IE,playerHandler:s||null,flags:0}}(),W=_g(0,null,null,1,0,null,null,null,null,null),ye=lo(null,W,V,P,null,null,_,I,E,f);let Oe,Ue;Ys(ye);try{const Qe=function Oi(i,s,a,l,c,f){const _=a[1];a[20]=i;const I=Mi(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(df(I,A,!0),null!==i&&(pl(c,i,A),null!==I.classes&&og(c,i,I.classes),null!==I.styles&&vy(c,i,I.styles)));const S=l.createRenderer(i,s),P=lo(a,md(s),null,s.onPush?64:16,a[20],I,l,S,f||null,null);return _.firstCreatePass&&(no(si(I,a),_,s.type),mE(_,I),af(I,a.length,1)),Wl(a,P),a[20]=P}(S,this.componentDef,ye,_,I);if(S)if(l)pl(I,S,["ng-version",Lw.full]);else{const{attrs:Ie,classes:st}=function wD(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!_n(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&pl(I,S,Ie),st&&st.length>0&&og(I,S,st.join(" "))}if(Ue=ra(W,20),void 0!==a){const Ie=Ue.projection=[];for(let st=0;st<this.ngContentSelectors.length;st++){const Bt=a[st];Ie.push(null!=Bt?Array.from(Bt):null)}}Oe=function RE(i,s,a,l,c){const f=a[1],_=function hE(i,s,a){const l=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),wg(i,l,s,Ta(i,s,1,null),a));const c=Yi(s,i,l.directiveStart,l);pn(c,s);const f=yr(l,s);return f&&pn(f,s),c}(f,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=gn();s.contentQueries(1,_,I.directiveStart)}const E=gn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ss(E.index),vg(a[1],E,0,E.directiveStart,E.directiveEnd,s),gE(s,_)),_}(Qe,this.componentDef,ye,V,[Mt]),Du(W,ye,null)}finally{Js()}return new Bw(this.componentType,Oe,yo(Ue,ye),ye,Ue)}}class Bw extends class Pw{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Pb(c),this.componentType=s}get injector(){return new yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ka{}class zd{}const Fa=new Map;class Hw extends ka{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Vw(this);const l=ln(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=hf(s,a,[{provide:ka,useValue:this},{provide:om,useValue:this.componentFactoryResolver}],fe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=vn.THROW_IF_NOT_FOUND,l=ot.Default){return s===vn||s===ka||s===vd?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class nv extends zd{constructor(s){super(),this.moduleType=s,null!==ln(s)&&function tv(i){const s=new Set;!function a(l){const c=ln(l,!0),f=c.id;null!==f&&(function lm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${fe(s)} vs ${fe(s.name)}`)}(f,Fa.get(f),l),Fa.set(f,l));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Hw(this.moduleType,s)}}function uv(i){return s=>{setTimeout(i,void 0,s)}}const Us=class av extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=uv(I),E&&(E=uv(E)),A&&(A=uv(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Z.w0&&s.add(S),S}};function qb(){return this._results[Id()]()}class ep{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Id(),l=ep.prototype;l[a]||(l[a]=qb)}get changes(){return this._changes||(this._changes=new Us)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Ar(s);(this._changesDetected=!function hu(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $u=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zd,i})();const lv=$u,Zw=class extends lv{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=lo(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Du(a,l,s),new Wn(l)}};function Zd(){return Kd(gn(),we())}function Kd(i,s){return 4&i.type?new Zw(s,i,yo(i,s)):null}let fm=(()=>{class i{}return i.__NG_ELEMENT_ID__=zb,i})();function zb(){return Qw(gn(),we())}const Kw=fm,cv=class extends Kw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return yo(this._hostTNode,this._hostLView)}get injector(){return new yi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Cr(this._hostTNode,this._hostLView);if(Lc(s)){const a=yn(s,this._hostLView),l=Xt(s);return new yi(a[1].data[l+8],a)}return new yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Yw(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const _=s&&!function Gr(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new J_(Vt(s)),A=l||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(ka,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function Ja(i){return ni(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],V=new cv(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function pD(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],Il(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function od(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,f);const E=ld(f,_),I=l[11],A=Wh(I,_[7]);return null!==A&&function sd(i,s,a,l,c,f){l[0]=c,l[6]=s,Bl(i,l,a,1,c,f)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),Il(tp(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Yw(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=zh(this._lContainer,a);l&&(Rs(tp(this._lContainer),a),fy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=zh(this._lContainer,a);return l&&null!=Rs(tp(this._lContainer),a)?new Wn(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Yw(i){return i[8]}function tp(i){return i[8]||(i[8]=[])}function Qw(i,s){let a;const l=s[i.index];if(ni(l))a=l;else{let c;if(8&i.type)c=rn(l);else{const f=s[11];c=f.createComment("");const _=yr(i,s);Da(f,Wh(f,_),c,function gD(i,s){return dn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=_E(l,s,c,i),Wl(s,a)}return new cv(a,i,s)}class hv{constructor(s){this.queryList=s,this.matches=null}clone(){return new hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class np{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new np(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==tI(s,a).matches&&this.queries[a].setDirty()}}class fv{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class rp{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new rp(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class ip{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new ip(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,pv(a,f)),this.matchTNodeWithReadOption(s,a,_l(a,s,f,!1,!1))}else l===$u?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,_l(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===dc||c===fm||c===$u&&4&a.type)this.addMatch(a.index,-2);else{const f=_l(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function pv(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Hu(i,s,a,l){return-1===a?function Yd(i,s){return 11&i.type?yo(i,s):4&i.type?Kd(i,s):null}(s,i):-2===a?function gv(i,s,a){return a===dc?yo(s,i):a===$u?Kd(s,i):a===fm?Qw(s,i):void 0}(i,s,l):Yi(i,i[1],a,s)}function fc(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:Hu(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Gu(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=fc(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&Gu(V[1],V,A,l)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];Gu(W[1],W,A,l)}}}}}return l}function mv(i){const s=we(),a=xt(),l=al();ul(l+1);const c=tI(a,l);if(i.dirty&&Is(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Gu(a,s,l,[]):fc(a,s,c,l);i.reset(f,am),i.notifyOnChanges()}return!0}return!1}function Xw(i,s,a,l){const c=xt();if(c.firstCreatePass){const f=gn();(function gm(i,s,a){null===i.queries&&(i.queries=new rp),i.queries.track(new ip(s,a))})(c,new fv(s,a,l),f.index),function _v(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function pm(i,s,a){const l=new ep(4==(4&a));uE(i,s,l,l.destroy),null===s[19]&&(s[19]=new np),s[19].queries.push(new hv(l))}(c,we(),a)}function eI(){return function yv(i,s){return i[19].queries[s].queryList}(we(),al())}function tI(i,s){return i.queries.getByIndex(s)}function Dm(...i){}const bm=new Cn("Application Initializer");let xv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Dm,this.reject=Dm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(zg(f))a.push(f);else if(WE(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Je(bm,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cm=new Cn("AppId",{providedIn:"root",factory:function Tm(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rv=new Cn("Platform Initializer"),Nv=new Cn("Platform ID"),EI=new Cn("appBootstrapListener");let Ov=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const Pv=new Cn("LocaleId",{providedIn:"root",factory:()=>Ut(Pv,ot.Optional|ot.SkipSelf)||function Am(){return"undefined"!=typeof $localize&&$localize.locale||Pf}()}),iC=new Cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class kv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let II=(()=>{class i{compileModuleSync(a){return new nv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=p(ln(a).declarations).reduce((_,E)=>{const I=Vt(E);return I&&_.push(new J_(I)),_},[]);return new kv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Lv=(()=>Promise.resolve(0))();function th(i){"undefined"==typeof Zone?Lv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Bs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Us(!1),this.onMicrotaskEmpty=new Us(!1),this.onStable=new Us(!1),this.onError=new Us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Vv(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function nh(i){const s=()=>{!function Bv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,op(i),i.isCheckStableRunning=!0,Sm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),op(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,_,E)=>{try{return bI(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),CI(i)}},onInvoke:(a,l,c,f,_,E,I)=>{try{return bI(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),CI(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,op(i),Sm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Bs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,Uv,Dm,Dm);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Uv={};function Sm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function op(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function bI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function CI(i){i._nesting--,Sm(i)}class oC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Us,this.onMicrotaskEmpty=new Us,this.onStable=new Us,this.onError=new Us}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let jv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bs.assertNotInAngularZone(),th(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())th(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Je(Bs))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),TI=(()=>{class i{constructor(){this._applications=new Map,$v.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return $v.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();class AI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function aC(i){$v=i}let _o,$v=new AI;const Gv=new Cn("AllowMultipleToken");class SI{constructor(s,a){this.name=s,this.token=a}}function ap(i,s,a=[]){const l=`Platform: ${s}`,c=new Cn(l);return(f=[])=>{let _=qv();if(!_||_.injector.get(Gv,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:Ag,useValue:"platform"});!function xI(i){if(_o&&!_o.destroyed&&!_o.injector.get(Gv,!1))throw new Me(400,"");_o=i.get(rh);const s=i.get(Rv,null);s&&s.forEach(a=>a())}(vn.create({providers:E,name:l}))}return function zt(i){const s=qv();if(!s)throw new Me(401,"");return s}()}}function qv(){return _o&&!_o.destroyed?_o:null}let rh=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function dC(i,s){let a;return a="noop"===i?new oC:("zone.js"===i?void 0:i)||new Bs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Bs,useValue:E}];return E.run(()=>{const A=vn.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(ae,null);if(!P)throw new Me(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{xm(this._modules,S),V.unsubscribe()})}),function Sn(i,s,a){try{const l=a();return zg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const V=S.injector.get(xv);return V.runInitializers(),V.donePromise.then(()=>(function mb(i){rt(i,"Expected localeId to be defined"),"string"==typeof i&&(Vs=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Pv,Pf)||Pf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Jr({},l);return function uC(i,s,a){const l=new nv(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(js);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Me(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Je(vn))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();function Jr(i,s){return Array.isArray(s)?s.reduce(Jr,i):Object.assign(Object.assign({},i),s)}let js=(()=>{class i{constructor(a,l,c,f,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Bs.assertNotInAngularZone(),th(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Bs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ue.T)(E,I.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Me(405,"");let c;c=a instanceof sm?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function Hv(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ka),E=c.create(vn.NULL,[],l||c.selector,f),I=E.location.nativeElement,A=E.injector.get(jv,null),S=A&&E.injector.get(TI);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),xm(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;xm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(EI,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Je(Bs),Je(vn),Je(ae),Je(om),Je(xv))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let zv=!0,Wv=!1;function hC(){return Wv=!0,zv}function Zv(){if(Wv)throw new Error("Cannot enable prod mode after platform setup.");zv=!1}let BT=(()=>{class i{}return i.__NG_ELEMENT_ID__=jT,i})();function jT(i){return function hr(i,s,a){if(ys(i)&&!a){const l=_r(i.index,s);return new Wn(l,l)}return 47&i.type?new Wn(s[16],s):null}(gn(),we(),16==(16&i))}class OI{constructor(){}supports(s){return mf(s)}create(s){return new Om(s)}}const mc=(i,s)=>s;class Om{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||mc}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<kI(l,c,f)?a:l,E=kI(_,c,f),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<f.length?f[V]:f[V]=0,ye=W+V;S<=ye&&ye<A&&(f[V]=W+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!mf(s))throw new Me(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),l=!0),a=a._next}else c=0,function zn(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Id()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new up(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Pm),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class up{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class PI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Pm{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new PI,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kI(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class FI{constructor(){}supports(s){return s instanceof Map||Ra(s)}create(){return new vC}}class vC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ra(s)))throw new Me(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const l=new Qv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Qv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function km(){return new Fm([new OI])}let Fm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||km()),deps:[[i,new vi,new xr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Me(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:km}),i})();function Jv(){return new Lm([new FI])}let Lm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Jv()),deps:[[i,new vi,new xr]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Me(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:Jv}),i})();const LI=ap(null,"core",[{provide:Nv,useValue:"unknown"},{provide:rh,deps:[vn]},{provide:TI,deps:[]},{provide:Ov,deps:[]}]);let lp=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Je(js))},i.\u0275mod=K({type:i}),i.\u0275inj=Kt({}),i})()},3942:(nt,Ce,k)=>{k.d(Ce,{Z:()=>Me});var g=k(2090),Z=k(4859),O=k(9681),ue=k(1877);class J{constructor(pe,Ee){this._delegate=pe,this.firebase=Ee,(0,O._addComponent)(pe,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ee=O._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(pe);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Ke=Ge.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Ee})}_removeServiceInstance(pe,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ee)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ce(){const Pe=function fe(Pe){const pe={},Ee={__esModule:!0,initializeApp:function De(Be,te={}){const q=O.initializeApp(Be,te);if((0,g.r3)(pe,q.name))return pe[q.name];const re=new Pe(q,Ee);return pe[q.name]=re,re},app:Ge,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const te=Be.name,q=te.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const re=(me=Ge())=>{if("function"!=typeof me[q])throw se.create("invalid-app-argument",{appName:te});return me[q]()};void 0!==Be.serviceProps&&(0,g.ZB)(re,Be.serviceProps),Ee[q]=re,Pe.prototype[q]=function(...me){return this._getService.bind(this,te).apply(this,Be.multipleInstances?me:[])}}return"PUBLIC"===Be.type?Ee[q]:null},removeApp:function Ke(Be){delete pe[Be]},useAsService:function je(Be,te){return"serverAuth"===te?null:te},modularAPIs:O}};function Ge(Be){if(!(0,g.r3)(pe,Be=Be||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Be});return pe[Be]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function _e(){return Object.keys(pe).map(Be=>pe[Be])}}),Ge.App=Pe,Ee}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(Ee){(0,g.ZB)(Pe,Ee)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new ue.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Pe)}()},9681:(nt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>Mn,_addComponent:()=>on,_addOrOverwriteComponent:()=>fi,_apps:()=>dt,_clearComponents:()=>Ft,_components:()=>sn,_getProvider:()=>Vi,_registerComponent:()=>en,_removeServiceInstance:()=>Kt,deleteApp:()=>Bi,getApp:()=>br,getApps:()=>Ui,initializeApp:()=>Ci,onLog:()=>Zn,registerVersion:()=>Lr,setLogLevel:()=>jn});var g=k(5861),Z=k(4859),O=k(1877),ue=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function ge(qe){const be=qe.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Ze)){const ut=Ze.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ze=>Ze).join(" ")}}const se="@firebase/app",ce=new O.Yd("@firebase/app"),Mn="[DEFAULT]",rt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,sn=new Map;function on(qe,be){try{qe.container.addComponent(be)}catch(Ze){ce.debug(`Component ${be.name} failed to register with FirebaseApp ${qe.name}`,Ze)}}function fi(qe,be){qe.container.addOrOverwriteComponent(be)}function en(qe){const be=qe.name;if(sn.has(be))return ce.debug(`There were multiple attempts to register component ${be}.`),!1;sn.set(be,qe);for(const Ze of dt.values())on(Ze,qe);return!0}function Vi(qe,be){const Ze=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),qe.container.getProvider(be)}function Kt(qe,be,Ze=Mn){Vi(qe,be).clearInstance(Ze)}function Ft(){sn.clear()}const Xr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hs{constructor(be,Ze,ut){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}const Dr="9.6.11";function Ci(qe,be={}){"object"!=typeof be&&(be={name:be});const Ze=Object.assign({name:Mn,automaticDataCollectionEnabled:!1},be),ut=Ze.name;if("string"!=typeof ut||!ut)throw Xr.create("bad-app-name",{appName:String(ut)});const Ot=dt.get(ut);if(Ot){if((0,ue.vZ)(qe,Ot.options)&&(0,ue.vZ)(Ze,Ot.config))return Ot;throw Xr.create("duplicate-app",{appName:ut})}const St=new Z.H0(ut);for(const L of sn.values())St.addComponent(L);const U=new hs(qe,Ze,St);return dt.set(ut,U),U}function br(qe=Mn){const be=dt.get(qe);if(!be)throw Xr.create("no-app",{appName:qe});return be}function Ui(){return Array.from(dt.values())}function Bi(qe){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(qe){const be=qe.name;dt.has(be)&&(dt.delete(be),yield Promise.all(qe.container.getProviders().map(Ze=>Ze.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Lr(qe,be,Ze){var ut;let Ot=null!==(ut=rt[qe])&&void 0!==ut?ut:qe;Ze&&(Ot+=`-${Ze}`);const St=Ot.match(/\s|\//),U=be.match(/\s|\//);if(St||U){const L=[`Unable to register library "${Ot}" with version "${be}":`];return St&&L.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),St&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ce.warn(L.join(" "))}en(new Z.wA(`${Ot}-version`,()=>({library:Ot,version:be}),"VERSION"))}function Zn(qe,be){if(null!==qe&&"function"!=typeof qe)throw Xr.create("invalid-log-argument");(0,O.Am)(qe,be)}function jn(qe){(0,O.Ub)(qe)}const fn="firebase-heartbeat-store";let Kn=null;function fs(){return Kn||(Kn=(0,ue.X3)("firebase-heartbeat-database",1,(qe,be)=>{0===be&&qe.createObjectStore(fn)}).catch(qe=>{throw Xr.create("storage-open",{originalErrorMessage:qe.message})})),Kn}function Lt(){return(Lt=(0,g.Z)(function*(qe){try{return(yield fs()).transaction(fn).objectStore(fn).get(nr(qe))}catch(be){throw Xr.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(qe,be){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(qe,be){try{const ut=(yield fs()).transaction(fn,"readwrite");return yield ut.objectStore(fn).put(be,nr(qe)),ut.complete}catch(Ze){throw Xr.create("storage-set",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function nr(qe){return`${qe.name}!${qe.options.appId}`}class Hs{constructor(be){this.container=be,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new at(Ze),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ut=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=pr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!be._heartbeatsCache.heartbeats.some(St=>St.date===Ot))return be._heartbeatsCache.heartbeats.push({date:Ot,agent:ut}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(St=>{const U=new Date(St.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ze=pr(),{heartbeatsToSend:ut,unsentEntries:Ot}=function rr(qe,be=1024){const Ze=[];let ut=qe.slice();for(const Ot of qe){const St=Ze.find(U=>U.agent===Ot.agent);if(St){if(St.dates.push(Ot.date),gr(Ze)>be){St.dates.pop();break}}else if(Ze.push({agent:Ot.agent,dates:[Ot.date]}),gr(Ze)>be){Ze.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:ut}}(be._heartbeatsCache.heartbeats),St=(0,ue.L)(JSON.stringify({version:2,heartbeats:ut}));return be._heartbeatsCache.lastSentHeartbeatDate=Ze,Ot.length>0?(be._heartbeatsCache.heartbeats=Ot,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),St})()}}function pr(){return(new Date).toISOString().substring(0,10)}class at{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Qo(qe){return Lt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const St=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:St.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const St=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...be.heartbeats]})}})()}}function gr(qe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Rt(qe){en(new Z.wA("platform-logger",be=>new J(be),"PRIVATE")),en(new Z.wA("heartbeat",be=>new Hs(be),"PRIVATE")),Lr(se,"0.7.21",qe),Lr(se,"0.7.21","esm2017"),Lr("fire-js","")}("")},4859:(nt,Ce,k)=>{k.d(Ce,{wA:()=>O,H0:()=>fe});var g=k(5861),Z=k(2090);class O{constructor(B,j,Y){this.name=B,this.instanceFactory=j,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ue="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Y=new Z.BH;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&Y.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Y=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),He=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function se(ce){return"EAGER"===ce.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(j){}for(const[j,Y]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:He});Y.resolve(Te)}catch(Te){}}}}clearInstance(B=ue){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...j.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ue){return this.instances.has(B)}getOptions(B=ue){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Y,options:j});for(const[Te,Me]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Te)&&Me.resolve(He);return He}onInit(B,j){var Y;const He=this.normalizeInstanceIdentifier(j),Te=null!==(Y=this.onInitCallbacks.get(He))&&void 0!==Y?Y:new Set;Te.add(B),this.onInitCallbacks.set(He,Te);const Me=this.instances.get(He);return Me&&B(Me,He),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Y=this.onInitCallbacks.get(j);if(Y)for(const He of Y)try{He(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=B,ce===ue?void 0:ce),options:j}),this.instances.set(B,Y),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch(He){}var ce;return Y||null}normalizeInstanceIdentifier(B=ue){return this.component?this.component.multipleInstances?B:ue:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ce,k)=>{k.d(Ce,{in:()=>Z,Yd:()=>se,Ub:()=>fe,Am:()=>ce});const g=[];var Z=(()=>{return(B=Z||(Z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Z;var B})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ue=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},ge=(B,j,...Y)=>{if(j<B.logLevel)return;const He=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${He}]  ${B.name}:`,...Y)};class se{constructor(j){this.name=j,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function fe(B){g.forEach(j=>{j.setLogLevel(B)})}function ce(B,j){for(const Y of g){let He=null;j&&j.level&&(He=O[j.level]),Y.userLogHandler=null===B?null:(Te,Me,...Pe)=>{const pe=Pe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Ke){return null}}).filter(Ee=>Ee).join(" ");Me>=(null!=He?He:Te.logLevel)&&B({level:Z[Me].toLowerCase(),message:pe,args:Pe,type:Te.name})}}}},5861:(nt,Ce,k)=>{function g(O,ue,J,ge,se,fe,ce){try{var B=O[fe](ce),j=B.value}catch(Y){return void J(Y)}B.done?ue(j):Promise.resolve(j).then(ge,se)}function Z(O){return function(){var ue=this,J=arguments;return new Promise(function(ge,se){var fe=O.apply(ue,J);function ce(j){g(fe,ge,se,ce,B,"next",j)}function B(j){g(fe,ge,se,ce,B,"throw",j)}ce(void 0)})}}k.d(Ce,{Z:()=>Z})}},nt=>{nt(nt.s=18)}]);